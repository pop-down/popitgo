(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();const Si=!1;var In=Array.isArray,el=Array.prototype.indexOf,si=Array.from,Pa=Object.defineProperty,wr=Object.getOwnPropertyDescriptor,Ta=Object.getOwnPropertyDescriptors,tl=Object.prototype,rl=Array.prototype,ii=Object.getPrototypeOf,Ei=Object.isExtensible;function Zr(t){return typeof t=="function"}const zt=()=>{};function nl(t){return t()}function Fs(t){for(var e=0;e<t.length;e++)t[e]()}const Lt=2,Oa=4,cs=8,us=16,nr=32,un=64,Xn=128,Pt=256,Zn=512,vt=1024,Yt=2048,br=4096,er=8192,ds=16384,Aa=32768,dn=65536,Ca=1<<17,sl=1<<19,ja=1<<20,qs=1<<21,tr=Symbol("$state"),La=Symbol("legacy props"),il=Symbol("");function Ra(t){return t===this.v}function Ia(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function ai(t){return!Ia(t,this.v)}function al(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ol(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ll(t){throw new Error("https://svelte.dev/e/effect_orphan")}function cl(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function ul(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function dl(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function hl(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function fl(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let hn=!1,vl=!1;function gl(){hn=!0}const oi=1,li=2,Da=4,pl=8,_l=16,ml=1,wl=2,Ma=4,yl=8,bl=16,xl=4,kl=1,$l=2,bt=Symbol(),Sl="http://www.w3.org/1999/xhtml",El="http://www.w3.org/2000/svg";function Na(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Pe=null;function Pi(t){Pe=t}function lt(t,e=!1,r){var n=Pe={p:Pe,c:null,d:!1,e:null,m:!1,s:t,x:null,l:null};hn&&!e&&(Pe.l={s:null,u:null,r1:[],r2:nn(!1)}),ci(()=>{n.d=!0})}function ct(t){const e=Pe;if(e!==null){const a=e.e;if(a!==null){var r=pe,n=xe;e.e=null;try{for(var s=0;s<a.length;s++){var i=a[s];Jt(i.effect),Rt(i.reaction),Nn(i.fn)}}finally{Jt(r),Rt(n)}}Pe=e.p,e.m=!0}return{}}function Dn(){return!hn||Pe!==null&&Pe.l===null}function jr(t){if(typeof t!="object"||t===null||tr in t)return t;const e=ii(t);if(e!==tl&&e!==rl)return t;var r=new Map,n=In(t),s=or(0),i=xe,a=o=>{var l=xe;Rt(i);var c=o();return Rt(l),c};return n&&r.set("length",or(t.length)),new Proxy(t,{defineProperty(o,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&dl();var u=r.get(l);return u===void 0?(u=a(()=>or(c.value)),r.set(l,u)):E(u,a(()=>jr(c.value))),!0},deleteProperty(o,l){var c=r.get(l);if(c===void 0)l in o&&(r.set(l,a(()=>or(bt))),ks(s));else{if(n&&typeof l=="string"){var u=r.get("length"),h=Number(l);Number.isInteger(h)&&h<u.v&&E(u,h)}E(c,bt),ks(s)}return!0},get(o,l,c){var m;if(l===tr)return t;var u=r.get(l),h=l in o;if(u===void 0&&(!h||(m=wr(o,l))!=null&&m.writable)&&(u=a(()=>or(jr(h?o[l]:bt))),r.set(l,u)),u!==void 0){var f=d(u);return f===bt?void 0:f}return Reflect.get(o,l,c)},getOwnPropertyDescriptor(o,l){var c=Reflect.getOwnPropertyDescriptor(o,l);if(c&&"value"in c){var u=r.get(l);u&&(c.value=d(u))}else if(c===void 0){var h=r.get(l),f=h==null?void 0:h.v;if(h!==void 0&&f!==bt)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return c},has(o,l){var f;if(l===tr)return!0;var c=r.get(l),u=c!==void 0&&c.v!==bt||Reflect.has(o,l);if(c!==void 0||pe!==null&&(!u||(f=wr(o,l))!=null&&f.writable)){c===void 0&&(c=a(()=>or(u?jr(o[l]):bt)),r.set(l,c));var h=d(c);if(h===bt)return!1}return u},set(o,l,c,u){var b;var h=r.get(l),f=l in o;if(n&&l==="length")for(var m=c;m<h.v;m+=1){var p=r.get(m+"");p!==void 0?E(p,bt):m in o&&(p=a(()=>or(bt)),r.set(m+"",p))}h===void 0?(!f||(b=wr(o,l))!=null&&b.writable)&&(h=a(()=>or(void 0)),E(h,a(()=>jr(c))),r.set(l,h)):(f=h.v!==bt,E(h,a(()=>jr(c))));var _=Reflect.getOwnPropertyDescriptor(o,l);if(_!=null&&_.set&&_.set.call(u,c),!f){if(n&&typeof l=="string"){var g=r.get("length"),k=Number(l);Number.isInteger(k)&&k>=g.v&&E(g,k+1)}ks(s)}return!0},ownKeys(o){d(s);var l=Reflect.ownKeys(o).filter(h=>{var f=r.get(h);return f===void 0||f.v!==bt});for(var[c,u]of r)u.v!==bt&&!(c in o)&&l.push(c);return l},setPrototypeOf(){hl()}})}function ks(t,e=1){E(t,t.v+e)}function Ti(t){try{if(t!==null&&typeof t=="object"&&tr in t)return t[tr]}catch{}return t}function Pl(t,e){return Object.is(Ti(t),Ti(e))}function Tn(t){var e=Lt|Yt,r=xe!==null&&(xe.f&Lt)!==0?xe:null;return pe===null||r!==null&&(r.f&Pt)!==0?e|=Pt:pe.f|=ja,{ctx:Pe,deps:null,effects:null,equals:Ra,f:e,fn:t,reactions:null,rv:0,v:null,wv:0,parent:r??pe}}function ce(t){const e=Tn(t);return e.equals=ai,e}function Ua(t){var e=t.effects;if(e!==null){t.effects=null;for(var r=0;r<e.length;r+=1)rr(e[r])}}function Tl(t){for(var e=t.parent;e!==null;){if((e.f&Lt)===0)return e;e=e.parent}return null}function za(t){var e,r=pe;Jt(Tl(t));try{Ua(t),e=to(t)}finally{Jt(r)}return e}function Fa(t){var e=za(t),r=(pr||(t.f&Pt)!==0)&&t.deps!==null?br:vt;It(t,r),t.equals(e)||(t.v=e,t.wv=Za())}const On=new Map;function nn(t,e){var r={f:0,v:t,reactions:null,equals:Ra,rv:0,wv:0};return r}function or(t,e){const r=nn(t);return Nl(r),r}function R(t,e=!1){var n;const r=nn(t);return e||(r.equals=ai),hn&&Pe!==null&&Pe.l!==null&&((n=Pe.l).s??(n.s=[])).push(r),r}function $s(t,e){return E(t,Tt(()=>d(t))),e}function E(t,e,r=!1){xe!==null&&!Bt&&Dn()&&(xe.f&(Lt|us))!==0&&!(ft!=null&&ft.includes(t))&&fl();let n=r?jr(e):e;return An(t,n)}function An(t,e){if(!t.equals(e)){var r=t.v;Fn?On.set(t,e):On.set(t,r),t.v=e,(t.f&Lt)!==0&&((t.f&Yt)!==0&&za(t),It(t,(t.f&Pt)===0?vt:br)),t.wv=Za(),qa(t,Yt),Dn()&&pe!==null&&(pe.f&vt)!==0&&(pe.f&(nr|un))===0&&(jt===null?Ul([t]):jt.push(t))}return e}function Oi(t,e=1){var r=d(t),n=e===1?r++:r--;return E(t,r),n}function qa(t,e){var r=t.reactions;if(r!==null)for(var n=Dn(),s=r.length,i=0;i<s;i++){var a=r[i],o=a.f;(o&Yt)===0&&(!n&&a===pe||(It(a,e),(o&(vt|Pt))!==0&&((o&Lt)!==0?qa(a,br):ps(a))))}}let Ol=!1;var Bs,Ba,Wa,Ha;function Al(){if(Bs===void 0){Bs=window,Ba=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,r=Text.prototype;Wa=wr(e,"firstChild").get,Ha=wr(e,"nextSibling").get,Ei(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Ei(r)&&(r.__t=void 0)}}function Mn(t=""){return document.createTextNode(t)}function sn(t){return Wa.call(t)}function hs(t){return Ha.call(t)}function v(t,e){return sn(t)}function V(t,e){{var r=sn(t);return r instanceof Comment&&r.data===""?hs(r):r}}function w(t,e=1,r=!1){let n=t;for(;e--;)n=hs(n);return n}function Cl(t){t.textContent=""}function Va(t){pe===null&&xe===null&&ll(),xe!==null&&(xe.f&Pt)!==0&&pe===null&&ol(),Fn&&al()}function jl(t,e){var r=e.last;r===null?e.last=e.first=t:(r.next=t,t.prev=r,e.last=t)}function fn(t,e,r,n=!0){var s=pe,i={ctx:Pe,deps:null,nodes_start:null,nodes_end:null,f:t|Yt,first:null,fn:e,last:null,next:null,parent:s,prev:null,teardown:null,transitions:null,wv:0};if(r)try{gs(i),i.f|=Aa}catch(l){throw rr(i),l}else e!==null&&ps(i);var a=r&&i.deps===null&&i.first===null&&i.nodes_start===null&&i.teardown===null&&(i.f&(ja|Xn))===0;if(!a&&n&&(s!==null&&jl(i,s),xe!==null&&(xe.f&Lt)!==0)){var o=xe;(o.effects??(o.effects=[])).push(i)}return i}function ci(t){const e=fn(cs,null,!1);return It(e,vt),e.teardown=t,e}function Ws(t){Va();var e=pe!==null&&(pe.f&nr)!==0&&Pe!==null&&!Pe.m;if(e){var r=Pe;(r.e??(r.e=[])).push({fn:t,effect:pe,reaction:xe})}else{var n=Nn(t);return n}}function Ll(t){return Va(),Un(t)}function Rl(t){const e=fn(un,t,!0);return(r={})=>new Promise(n=>{r.outro?an(e,()=>{rr(e),n(void 0)}):(rr(e),n(void 0))})}function Nn(t){return fn(Oa,t,!1)}function dt(t,e){var r=Pe,n={effect:null,ran:!1};r.l.r1.push(n),n.effect=Un(()=>{t(),!n.ran&&(n.ran=!0,E(r.l.r2,!0),Tt(e))})}function ui(){var t=Pe;Un(()=>{if(d(t.l.r2)){for(var e of t.l.r1){var r=e.effect;(r.f&vt)!==0&&It(r,br),vn(r)&&gs(r),e.ran=!1}t.l.r2.v=!1}})}function Un(t){return fn(cs,t,!0)}function z(t,e=[],r=Tn){const n=e.map(r);return zn(()=>t(...n.map(d)))}function zn(t,e=0){return fn(cs|us|e,t,!0)}function Mr(t,e=!0){return fn(cs|nr,t,!0,e)}function Ga(t){var e=t.teardown;if(e!==null){const r=Fn,n=xe;Ai(!0),Rt(null);try{e.call(null)}finally{Ai(r),Rt(n)}}}function Ya(t,e=!1){var r=t.first;for(t.first=t.last=null;r!==null;){var n=r.next;(r.f&un)!==0?r.parent=null:rr(r,e),r=n}}function Il(t){for(var e=t.first;e!==null;){var r=e.next;(e.f&nr)===0&&rr(e),e=r}}function rr(t,e=!0){var r=!1;(e||(t.f&sl)!==0)&&t.nodes_start!==null&&(Dl(t.nodes_start,t.nodes_end),r=!0),Ya(t,e&&!r),ns(t,0),It(t,ds);var n=t.transitions;if(n!==null)for(const i of n)i.stop();Ga(t);var s=t.parent;s!==null&&s.first!==null&&Ja(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=null}function Dl(t,e){for(;t!==null;){var r=t===e?null:hs(t);t.remove(),t=r}}function Ja(t){var e=t.parent,r=t.prev,n=t.next;r!==null&&(r.next=n),n!==null&&(n.prev=r),e!==null&&(e.first===t&&(e.first=n),e.last===t&&(e.last=r))}function an(t,e){var r=[];di(t,r,!0),Ka(r,()=>{rr(t),e&&e()})}function Ka(t,e){var r=t.length;if(r>0){var n=()=>--r||e();for(var s of t)s.out(n)}else e()}function di(t,e,r){if((t.f&er)===0){if(t.f^=er,t.transitions!==null)for(const a of t.transitions)(a.is_global||r)&&e.push(a);for(var n=t.first;n!==null;){var s=n.next,i=(n.f&dn)!==0||(n.f&nr)!==0;di(n,e,i?r:!1),n=s}}}function Cn(t){Qa(t,!0)}function Qa(t,e){if((t.f&er)!==0){t.f^=er,(t.f&vt)===0&&(t.f^=vt),vn(t)&&(It(t,Yt),ps(t));for(var r=t.first;r!==null;){var n=r.next,s=(r.f&dn)!==0||(r.f&nr)!==0;Qa(r,s?e:!1),r=n}if(t.transitions!==null)for(const i of t.transitions)(i.is_global||e)&&i.in()}}let es=[];function Ml(){var t=es;es=[],Fs(t)}function fs(t){es.length===0&&queueMicrotask(Ml),es.push(t)}let Kn=!1,Hs=!1,ts=null,Rr=!1,Fn=!1;function Ai(t){Fn=t}let Qn=[];let xe=null,Bt=!1;function Rt(t){xe=t}let pe=null;function Jt(t){pe=t}let ft=null;function Nl(t){xe!==null&&xe.f&qs&&(ft===null?ft=[t]:ft.push(t))}let ht=null,$t=0,jt=null;function Ul(t){jt=t}let Xa=1,rs=0,pr=!1,vr=null;function Za(){return++Xa}function vn(t){var h;var e=t.f;if((e&Yt)!==0)return!0;if((e&br)!==0){var r=t.deps,n=(e&Pt)!==0;if(r!==null){var s,i,a=(e&Zn)!==0,o=n&&pe!==null&&!pr,l=r.length;if(a||o){var c=t,u=c.parent;for(s=0;s<l;s++)i=r[s],(a||!((h=i==null?void 0:i.reactions)!=null&&h.includes(c)))&&(i.reactions??(i.reactions=[])).push(c);a&&(c.f^=Zn),o&&u!==null&&(u.f&Pt)===0&&(c.f^=Pt)}for(s=0;s<l;s++)if(i=r[s],vn(i)&&Fa(i),i.wv>t.wv)return!0}(!n||pe!==null&&!pr)&&It(t,vt)}return!1}function zl(t,e){for(var r=e;r!==null;){if((r.f&Xn)!==0)try{r.fn(t);return}catch{r.f^=Xn}r=r.parent}throw Kn=!1,t}function Ci(t){return(t.f&ds)===0&&(t.parent===null||(t.parent.f&Xn)===0)}function vs(t,e,r,n){if(Kn){if(r===null&&(Kn=!1),Ci(e))throw t;return}if(r!==null&&(Kn=!0),zl(t,e),Ci(e))throw t}function eo(t,e,r=!0){var n=t.reactions;if(n!==null)for(var s=0;s<n.length;s++){var i=n[s];ft!=null&&ft.includes(t)||((i.f&Lt)!==0?eo(i,e,!1):e===i&&(r?It(i,Yt):(i.f&vt)!==0&&It(i,br),ps(i)))}}function to(t){var m;var e=ht,r=$t,n=jt,s=xe,i=pr,a=ft,o=Pe,l=Bt,c=t.f;ht=null,$t=0,jt=null,pr=(c&Pt)!==0&&(Bt||!Rr||xe===null),xe=(c&(nr|un))===0?t:null,ft=null,Pi(t.ctx),Bt=!1,rs++,t.f|=qs;try{var u=(0,t.fn)(),h=t.deps;if(ht!==null){var f;if(ns(t,$t),h!==null&&$t>0)for(h.length=$t+ht.length,f=0;f<ht.length;f++)h[$t+f]=ht[f];else t.deps=h=ht;if(!pr)for(f=$t;f<h.length;f++)((m=h[f]).reactions??(m.reactions=[])).push(t)}else h!==null&&$t<h.length&&(ns(t,$t),h.length=$t);if(Dn()&&jt!==null&&!Bt&&h!==null&&(t.f&(Lt|br|Yt))===0)for(f=0;f<jt.length;f++)eo(jt[f],t);return s!==null&&s!==t&&(rs++,jt!==null&&(n===null?n=jt:n.push(...jt))),u}finally{ht=e,$t=r,jt=n,xe=s,pr=i,ft=a,Pi(o),Bt=l,t.f^=qs}}function Fl(t,e){let r=e.reactions;if(r!==null){var n=el.call(r,t);if(n!==-1){var s=r.length-1;s===0?r=e.reactions=null:(r[n]=r[s],r.pop())}}r===null&&(e.f&Lt)!==0&&(ht===null||!ht.includes(e))&&(It(e,br),(e.f&(Pt|Zn))===0&&(e.f^=Zn),Ua(e),ns(e,0))}function ns(t,e){var r=t.deps;if(r!==null)for(var n=e;n<r.length;n++)Fl(t,r[n])}function gs(t){var e=t.f;if((e&ds)===0){It(t,vt);var r=pe,n=Pe,s=Rr;pe=t,Rr=!0;try{(e&us)!==0?Il(t):Ya(t),Ga(t);var i=to(t);t.teardown=typeof i=="function"?i:null,t.wv=Xa;var a=t.deps,o;Si&&vl&&t.f&Yt}catch(l){vs(l,t,r,n||t.ctx)}finally{Rr=s,pe=r}}}function ql(){try{cl()}catch(t){if(ts!==null)vs(t,ts,null);else throw t}}function Bl(){var t=Rr;try{var e=0;for(Rr=!0;Qn.length>0;){e++>1e3&&ql();var r=Qn,n=r.length;Qn=[];for(var s=0;s<n;s++){var i=Hl(r[s]);Wl(i)}On.clear()}}finally{Hs=!1,Rr=t,ts=null}}function Wl(t){var e=t.length;if(e!==0)for(var r=0;r<e;r++){var n=t[r];if((n.f&(ds|er))===0)try{vn(n)&&(gs(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?Ja(n):n.fn=null))}catch(s){vs(s,n,null,n.ctx)}}}function ps(t){Hs||(Hs=!0,queueMicrotask(Bl));for(var e=ts=t;e.parent!==null;){e=e.parent;var r=e.f;if((r&(un|nr))!==0){if((r&vt)===0)return;e.f^=vt}}Qn.push(e)}function Hl(t){for(var e=[],r=t;r!==null;){var n=r.f,s=(n&(nr|un))!==0,i=s&&(n&vt)!==0;if(!i&&(n&er)===0){if((n&Oa)!==0)e.push(r);else if(s)r.f^=vt;else try{vn(r)&&gs(r)}catch(l){vs(l,r,null,r.ctx)}var a=r.first;if(a!==null){r=a;continue}}var o=r.parent;for(r=r.next;r===null&&o!==null;)r=o.next,o=o.parent}return e}function d(t){var e=t.f,r=(e&Lt)!==0;if(vr!==null&&vr.add(t),xe!==null&&!Bt){if(!(ft!=null&&ft.includes(t))){var n=xe.deps;t.rv<rs&&(t.rv=rs,ht===null&&n!==null&&n[$t]===t?$t++:ht===null?ht=[t]:(!pr||!ht.includes(t))&&ht.push(t))}}else if(r&&t.deps===null&&t.effects===null){var s=t,i=s.parent;i!==null&&(i.f&Pt)===0&&(s.f^=Pt)}return r&&(s=t,vn(s)&&Fa(s)),Fn&&On.has(t)?On.get(t):t.v}function Vl(t){var e=vr;vr=new Set;var r=vr,n;try{if(Tt(t),e!==null)for(n of vr)e.add(n)}finally{vr=e}return r}function Ir(t){var e=Vl(()=>Tt(t));for(var r of e)if((r.f&Ca)!==0)for(const n of r.deps||[])(n.f&Lt)===0&&An(n,n.v);else An(r,r.v)}function Tt(t){var e=Bt;try{return Bt=!0,t()}finally{Bt=e}}const Gl=-7169;function It(t,e){t.f=t.f&Gl|e}function dr(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(tr in t)Vs(t);else if(!Array.isArray(t))for(let e in t){const r=t[e];typeof r=="object"&&r&&tr in r&&Vs(r)}}}function Vs(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let n in t)try{Vs(t[n],e)}catch{}const r=ii(t);if(r!==Object.prototype&&r!==Array.prototype&&r!==Map.prototype&&r!==Set.prototype&&r!==Date.prototype){const n=Ta(r);for(let s in n){const i=n[s].get;if(i)try{i.call(t)}catch{}}}}}function Yl(t){return t.endsWith("capture")&&t!=="gotpointercapture"&&t!=="lostpointercapture"}const Jl=["beforeinput","click","change","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"];function Kl(t){return Jl.includes(t)}const Ql={formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly",defaultvalue:"defaultValue",defaultchecked:"defaultChecked",srcobject:"srcObject",novalidate:"noValidate",allowfullscreen:"allowFullscreen",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback"};function Xl(t){return t=t.toLowerCase(),Ql[t]??t}const Zl=["touchstart","touchmove"];function ec(t){return Zl.includes(t)}function tc(t,e){if(e){const r=document.body;t.autofocus=!0,fs(()=>{document.activeElement===r&&t.focus()})}}let ji=!1;function rc(){ji||(ji=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function hi(t){var e=xe,r=pe;Rt(null),Jt(null);try{return t()}finally{Rt(e),Jt(r)}}function fi(t,e,r,n=r){t.addEventListener(e,()=>hi(r));const s=t.__on_r;s?t.__on_r=()=>{s(),n(!0)}:t.__on_r=()=>n(!0),rc()}const ro=new Set,Gs=new Set;function no(t,e,r,n={}){function s(i){if(n.capture||xn.call(e,i),!i.cancelBubble)return hi(()=>r==null?void 0:r.call(this,i))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?fs(()=>{e.addEventListener(t,s,n)}):e.addEventListener(t,s,n),s}function D(t,e,r,n,s){var i={capture:n,passive:s},a=no(t,e,r,i);(e===document.body||e===window||e===document)&&ci(()=>{e.removeEventListener(t,a,i)})}function nc(t){for(var e=0;e<t.length;e++)ro.add(t[e]);for(var r of Gs)r(t)}function xn(t){var b;var e=this,r=e.ownerDocument,n=t.type,s=((b=t.composedPath)==null?void 0:b.call(t))||[],i=s[0]||t.target,a=0,o=t.__root;if(o){var l=s.indexOf(o);if(l!==-1&&(e===document||e===window)){t.__root=e;return}var c=s.indexOf(e);if(c===-1)return;l<=c&&(a=l)}if(i=s[a]||t.target,i!==e){Pa(t,"currentTarget",{configurable:!0,get(){return i||r}});var u=xe,h=pe;Rt(null),Jt(null);try{for(var f,m=[];i!==null;){var p=i.assignedSlot||i.parentNode||i.host||null;try{var _=i["__"+n];if(_!=null&&(!i.disabled||t.target===i))if(In(_)){var[g,...k]=_;g.apply(i,[t,...k])}else _.call(i,t)}catch(y){f?m.push(y):f=y}if(t.cancelBubble||p===e||p===null)break;i=p}if(f){for(let y of m)queueMicrotask(()=>{throw y});throw f}}finally{t.__root=e,delete t.currentTarget,Rt(u),Jt(h)}}}function so(t){var e=document.createElement("template");return e.innerHTML=t,e.content}function on(t,e){var r=pe;r.nodes_start===null&&(r.nodes_start=t,r.nodes_end=e)}function P(t,e){var r=(e&kl)!==0,n=(e&$l)!==0,s,i=!t.startsWith("<!>");return()=>{s===void 0&&(s=so(i?t:"<!>"+t),r||(s=sn(s)));var a=n||Ba?document.importNode(s,!0):s.cloneNode(!0);if(r){var o=sn(a),l=a.lastChild;on(o,l)}else on(a,a);return a}}function sc(t,e,r="svg"){var n=!t.startsWith("<!>"),s=`<${r}>${n?t:"<!>"+t}</${r}>`,i;return()=>{if(!i){var a=so(s),o=sn(a);i=sn(o)}var l=i.cloneNode(!0);return on(l,l),l}}function st(t=""){{var e=Mn(t+"");return on(e,e),e}}function ye(){var t=document.createDocumentFragment(),e=document.createComment(""),r=Mn();return t.append(e,r),on(e,r),t}function x(t,e){t!==null&&t.before(e)}let ss=!0;function Li(t){ss=t}function M(t,e){var r=e==null?"":typeof e=="object"?e+"":e;r!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=r,t.nodeValue=r+"")}function ic(t,e){return ac(t,e)}const qr=new Map;function ac(t,{target:e,anchor:r,props:n={},events:s,context:i,intro:a=!0}){Al();var o=new Set,l=h=>{for(var f=0;f<h.length;f++){var m=h[f];if(!o.has(m)){o.add(m);var p=ec(m);e.addEventListener(m,xn,{passive:p});var _=qr.get(m);_===void 0?(document.addEventListener(m,xn,{passive:p}),qr.set(m,1)):qr.set(m,_+1)}}};l(si(ro)),Gs.add(l);var c=void 0,u=Rl(()=>{var h=r??e.appendChild(Mn());return Mr(()=>{if(i){lt({});var f=Pe;f.c=i}s&&(n.$$events=s),ss=a,c=t(h,n)||{},ss=!0,i&&ct()}),()=>{var p;for(var f of o){e.removeEventListener(f,xn);var m=qr.get(f);--m===0?(document.removeEventListener(f,xn),qr.delete(f)):qr.set(f,m)}Gs.delete(l),h!==r&&((p=h.parentNode)==null||p.removeChild(h))}});return oc.set(c,u),c}let oc=new WeakMap;function N(t,e,[r,n]=[0,0]){var s=t,i=null,a=null,o=bt,l=r>0?dn:0,c=!1;const u=(f,m=!0)=>{c=!0,h(m,f)},h=(f,m)=>{o!==(o=f)&&(o?(i?Cn(i):m&&(i=Mr(()=>m(s))),a&&an(a,()=>{a=null})):(a?Cn(a):m&&(a=Mr(()=>m(s,[r+1,n]))),i&&an(i,()=>{i=null})))};zn(()=>{c=!1,e(u),c||h(null,null)},l)}function Gt(t,e){return e}function lc(t,e,r,n){for(var s=[],i=e.length,a=0;a<i;a++)di(e[a].e,s,!0);var o=i>0&&s.length===0&&r!==null;if(o){var l=r.parentNode;Cl(l),l.append(r),n.clear(),hr(t,e[0].prev,e[i-1].next)}Ka(s,()=>{for(var c=0;c<i;c++){var u=e[c];o||(n.delete(u.k),hr(t,u.prev,u.next)),rr(u.e,!o)}})}function Et(t,e,r,n,s,i=null){var a=t,o={flags:e,items:new Map,first:null},l=(e&Da)!==0;if(l){var c=t;a=c.appendChild(Mn())}var u=null,h=!1,f=ce(()=>{var m=r();return In(m)?m:m==null?[]:si(m)});zn(()=>{var m=d(f),p=m.length;h&&p===0||(h=p===0,cc(m,o,a,s,e,n,r),i!==null&&(p===0?u?Cn(u):u=Mr(()=>i(a)):u!==null&&an(u,()=>{u=null})),d(f))})}function cc(t,e,r,n,s,i,a){var L,re,Y,ue;var o=(s&pl)!==0,l=(s&(oi|li))!==0,c=t.length,u=e.items,h=e.first,f=h,m,p=null,_,g=[],k=[],b,y,S,$;if(o)for($=0;$<c;$+=1)b=t[$],y=i(b,$),S=u.get(y),S!==void 0&&((L=S.a)==null||L.measure(),(_??(_=new Set)).add(S));for($=0;$<c;$+=1){if(b=t[$],y=i(b,$),S=u.get(y),S===void 0){var O=f?f.e.nodes_start:r;p=dc(O,e,p,p===null?e.first:p.next,b,y,$,n,s,a),u.set(y,p),g=[],k=[],f=p.next;continue}if(l&&uc(S,b,$,s),(S.e.f&er)!==0&&(Cn(S.e),o&&((re=S.a)==null||re.unfix(),(_??(_=new Set)).delete(S))),S!==f){if(m!==void 0&&m.has(S)){if(g.length<k.length){var U=k[0],C;p=U.prev;var K=g[0],B=g[g.length-1];for(C=0;C<g.length;C+=1)Ri(g[C],U,r);for(C=0;C<k.length;C+=1)m.delete(k[C]);hr(e,K.prev,B.next),hr(e,p,K),hr(e,B,U),f=U,p=B,$-=1,g=[],k=[]}else m.delete(S),Ri(S,f,r),hr(e,S.prev,S.next),hr(e,S,p===null?e.first:p.next),hr(e,p,S),p=S;continue}for(g=[],k=[];f!==null&&f.k!==y;)(f.e.f&er)===0&&(m??(m=new Set)).add(f),k.push(f),f=f.next;if(f===null)continue;S=f}g.push(S),p=S,f=S.next}if(f!==null||m!==void 0){for(var T=m===void 0?[]:si(m);f!==null;)(f.e.f&er)===0&&T.push(f),f=f.next;var H=T.length;if(H>0){var A=(s&Da)!==0&&c===0?r:null;if(o){for($=0;$<H;$+=1)(Y=T[$].a)==null||Y.measure();for($=0;$<H;$+=1)(ue=T[$].a)==null||ue.fix()}lc(e,T,A,u)}}o&&fs(()=>{var he;if(_!==void 0)for(S of _)(he=S.a)==null||he.apply()}),pe.first=e.first&&e.first.e,pe.last=p&&p.e}function uc(t,e,r,n){(n&oi)!==0&&An(t.v,e),(n&li)!==0?An(t.i,r):t.i=r}function dc(t,e,r,n,s,i,a,o,l,c){var u=(l&oi)!==0,h=(l&_l)===0,f=u?h?R(s):nn(s):s,m=(l&li)===0?a:nn(a),p={i:m,v:f,k:i,a:null,e:null,prev:r,next:n};try{return p.e=Mr(()=>o(t,f,m,c),Ol),p.e.prev=r&&r.e,p.e.next=n&&n.e,r===null?e.first=p:(r.next=p,r.e.next=p.e),n!==null&&(n.prev=p,n.e.prev=p.e),p}finally{}}function Ri(t,e,r){for(var n=t.next?t.next.e.nodes_start:r,s=e?e.e.nodes_start:r,i=t.e.nodes_start;i!==n;){var a=hs(i);s.before(i),i=a}}function hr(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function je(t,e,r,n,s){var o;var i=(o=e.$$slots)==null?void 0:o[r],a=!1;i===!0&&(i=e.children,a=!0),i===void 0||i(t,a?()=>n:n)}function hc(t,e,r){var n=t,s,i;zn(()=>{s!==(s=e())&&(i&&(an(i),i=null),s&&(i=Mr(()=>r(n,s))))},dn)}function fc(t,e,r,n,s,i){var a,o,l=null,c=t,u;zn(()=>{const h=e()||null;var f=El;h!==a&&(u&&(h===null?an(u,()=>{u=null,o=null}):h===o?Cn(u):(rr(u),Li(!1))),h&&h!==o&&(u=Mr(()=>{if(l=document.createElementNS(f,h),on(l,l),n){var m=l.appendChild(Mn());n(l,m)}pe.nodes_end=l,c.before(l)})),a=h,a&&(o=a),Li(!0))},dn)}function io(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=io(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function vc(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=io(t))&&(n&&(n+=" "),n+=e);return n}function is(t){return typeof t=="object"?vc(t):t??""}const Ii=[...` 	
\r\f \v\uFEFF`];function gc(t,e,r){var n=t==null?"":""+t;if(e&&(n=n?n+" "+e:e),r){for(var s in r)if(r[s])n=n?n+" "+s:s;else if(n.length)for(var i=s.length,a=0;(a=n.indexOf(s,a))>=0;){var o=a+i;(a===0||Ii.includes(n[a-1]))&&(o===n.length||Ii.includes(n[o]))?n=(a===0?"":n.substring(0,a))+n.substring(o+1):a=o}}return n===""?null:n}function Di(t,e=!1){var r=e?" !important;":";",n="";for(var s in t){var i=t[s];i!=null&&i!==""&&(n+=" "+s+": "+i+r)}return n}function Ss(t){return t[0]!=="-"||t[1]!=="-"?t.toLowerCase():t}function pc(t,e){if(e){var r="",n,s;if(Array.isArray(e)?(n=e[0],s=e[1]):n=e,t){t=String(t).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,a=0,o=!1,l=[];n&&l.push(...Object.keys(n).map(Ss)),s&&l.push(...Object.keys(s).map(Ss));var c=0,u=-1;const _=t.length;for(var h=0;h<_;h++){var f=t[h];if(o?f==="/"&&t[h-1]==="*"&&(o=!1):i?i===f&&(i=!1):f==="/"&&t[h+1]==="*"?o=!0:f==='"'||f==="'"?i=f:f==="("?a++:f===")"&&a--,!o&&i===!1&&a===0){if(f===":"&&u===-1)u=h;else if(f===";"||h===_-1){if(u!==-1){var m=Ss(t.substring(c,u).trim());if(!l.includes(m)){f!==";"&&h++;var p=t.substring(c,h).trim();r+=" "+p+";"}}c=h+1,u=-1}}}}return n&&(r+=Di(n)),s&&(r+=Di(s,!0)),r=r.trim(),r===""?null:r}return t==null?null:String(t)}function at(t,e,r,n,s,i){var a=t.__className;if(a!==r||a===void 0){var o=gc(r,n,i);o==null?t.removeAttribute("class"):e?t.className=o:t.setAttribute("class",o),t.__className=r}else if(i&&s!==i)for(var l in i){var c=!!i[l];(s==null||c!==!!s[l])&&t.classList.toggle(l,c)}return i}function Es(t,e={},r,n){for(var s in r){var i=r[s];e[s]!==i&&(r[s]==null?t.style.removeProperty(s):t.style.setProperty(s,i,n))}}function _c(t,e,r,n){var s=t.__style;if(s!==e){var i=pc(e,n);i==null?t.removeAttribute("style"):t.style.cssText=i,t.__style=e}else n&&(Array.isArray(n)?(Es(t,r==null?void 0:r[0],n[0]),Es(t,r==null?void 0:r[1],n[1],"important")):Es(t,r,n));return n}const mn=Symbol("class"),wn=Symbol("style"),ao=Symbol("is custom element"),oo=Symbol("is html");function mc(t,e){e?t.hasAttribute("selected")||t.setAttribute("selected",""):t.removeAttribute("selected")}function _r(t,e,r,n){var s=lo(t);s[e]!==(s[e]=r)&&(e==="loading"&&(t[il]=r),r==null?t.removeAttribute(e):typeof r!="string"&&co(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function Mi(t,e,r,n,s=!1){var i=lo(t),a=i[ao],o=!i[oo],l=e||{},c=t.tagName==="OPTION";for(var u in e)u in r||(r[u]=null);r.class?r.class=is(r.class):r[mn]&&(r.class=null),r[wn]&&(r.style??(r.style=null));var h=co(t);for(const b in r){let y=r[b];if(c&&b==="value"&&y==null){t.value=t.__value="",l[b]=y;continue}if(b==="class"){var f=t.namespaceURI==="http://www.w3.org/1999/xhtml";at(t,f,y,n,e==null?void 0:e[mn],r[mn]),l[b]=y,l[mn]=r[mn];continue}if(b==="style"){_c(t,y,e==null?void 0:e[wn],r[wn]),l[b]=y,l[wn]=r[wn];continue}var m=l[b];if(y!==m){l[b]=y;var p=b[0]+b[1];if(p!=="$$")if(p==="on"){const S={},$="$$"+b;let O=b.slice(2);var _=Kl(O);if(Yl(O)&&(O=O.slice(0,-7),S.capture=!0),!_&&m){if(y!=null)continue;t.removeEventListener(O,l[$],S),l[$]=null}if(y!=null)if(_)t[`__${O}`]=y,nc([O]);else{let U=function(C){l[b].call(this,C)};l[$]=no(O,t,U,S)}else _&&(t[`__${O}`]=void 0)}else if(b==="style")_r(t,b,y);else if(b==="autofocus")tc(t,!!y);else if(!a&&(b==="__value"||b==="value"&&y!=null))t.value=t.__value=y;else if(b==="selected"&&c)mc(t,y);else{var g=b;o||(g=Xl(g));var k=g==="defaultValue"||g==="defaultChecked";if(y==null&&!a&&!k)if(i[b]=null,g==="value"||g==="checked"){let S=t;const $=e===void 0;if(g==="value"){let O=S.defaultValue;S.removeAttribute(g),S.defaultValue=O,S.value=S.__value=$?O:null}else{let O=S.defaultChecked;S.removeAttribute(g),S.defaultChecked=O,S.checked=$?O:!1}}else t.removeAttribute(b);else k||h.includes(g)&&(a||typeof y!="string")?t[g]=y:typeof y!="function"&&_r(t,g,y)}}}return l}function lo(t){return t.__attributes??(t.__attributes={[ao]:t.nodeName.includes("-"),[oo]:t.namespaceURI===Sl})}var Ni=new Map;function co(t){var e=Ni.get(t.nodeName);if(e)return e;Ni.set(t.nodeName,e=[]);for(var r,n=t,s=Element.prototype;s!==n;){r=Ta(n);for(var i in r)r[i].set&&e.push(i);n=ii(n)}return e}const wc=()=>performance.now(),Zt={tick:t=>requestAnimationFrame(t),now:()=>wc(),tasks:new Set};function uo(){const t=Zt.now();Zt.tasks.forEach(e=>{e.c(t)||(Zt.tasks.delete(e),e.f())}),Zt.tasks.size!==0&&Zt.tick(uo)}function yc(t){let e;return Zt.tasks.size===0&&Zt.tick(uo),{promise:new Promise(r=>{Zt.tasks.add(e={c:t,f:r})}),abort(){Zt.tasks.delete(e)}}}function Bn(t,e){hi(()=>{t.dispatchEvent(new CustomEvent(e))})}function bc(t){if(t==="float")return"cssFloat";if(t==="offset")return"cssOffset";if(t.startsWith("--"))return t;const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function Ui(t){const e={},r=t.split(";");for(const n of r){const[s,i]=n.split(":");if(!s||i===void 0)break;const a=bc(s.trim());e[a]=i.trim()}return e}const xc=t=>t;function kc(t,e,r,n){var s=(t&xl)!==0,i="both",a,o=e.inert,l=e.style.overflow,c,u;function h(){var g=xe,k=pe;Rt(null),Jt(null);try{return a??(a=r()(e,(n==null?void 0:n())??{},{direction:i}))}finally{Rt(g),Jt(k)}}var f={is_global:s,in(){e.inert=o,Bn(e,"introstart"),c=Ys(e,h(),u,1,()=>{Bn(e,"introend"),c==null||c.abort(),c=a=void 0,e.style.overflow=l})},out(g){e.inert=!0,Bn(e,"outrostart"),u=Ys(e,h(),c,0,()=>{Bn(e,"outroend"),g==null||g()})},stop:()=>{c==null||c.abort(),u==null||u.abort()}},m=pe;if((m.transitions??(m.transitions=[])).push(f),ss){var p=s;if(!p){for(var _=m.parent;_&&(_.f&dn)!==0;)for(;(_=_.parent)&&(_.f&us)===0;);p=!_||(_.f&Aa)!==0}p&&Nn(()=>{Tt(()=>f.in())})}}function Ys(t,e,r,n,s){var i=n===1;if(Zr(e)){var a,o=!1;return fs(()=>{if(!o){var g=e({direction:i?"in":"out"});a=Ys(t,g,r,n,s)}}),{abort:()=>{o=!0,a==null||a.abort()},deactivate:()=>a.deactivate(),reset:()=>a.reset(),t:()=>a.t()}}if(r==null||r.deactivate(),!(e!=null&&e.duration))return s(),{abort:zt,deactivate:zt,reset:zt,t:()=>n};const{delay:l=0,css:c,tick:u,easing:h=xc}=e;var f=[];if(i&&r===void 0&&(u&&u(0,1),c)){var m=Ui(c(0,1));f.push(m,m)}var p=()=>1-n,_=t.animate(f,{duration:l});return _.onfinish=()=>{var g=(r==null?void 0:r.t())??1-n;r==null||r.abort();var k=n-g,b=e.duration*Math.abs(k),y=[];if(b>0){var S=!1;if(c)for(var $=Math.ceil(b/16.666666666666668),O=0;O<=$;O+=1){var U=g+k*h(O/$),C=Ui(c(U,1-U));y.push(C),S||(S=C.overflow==="hidden")}S&&(t.style.overflow="hidden"),p=()=>{var K=_.currentTime;return g+k*h(K/b)},u&&yc(()=>{if(_.playState!=="running")return!1;var K=p();return u(K,1-K),!0})}_=t.animate(y,{duration:b,fill:"forwards"}),_.onfinish=()=>{p=()=>n,u==null||u(n,1-n),s()}},{abort:()=>{_&&(_.cancel(),_.effect=null,_.onfinish=zt)},deactivate:()=>{s=zt},reset:()=>{n===0&&(u==null||u(1,0))},t:()=>p()}}function Wt(t,e,r=e){var n=Dn();fi(t,"input",s=>{var i=s?t.defaultValue:t.value;if(i=Ts(t)?Os(i):i,r(i),n&&i!==(i=e())){var a=t.selectionStart,o=t.selectionEnd;t.value=i??"",o!==null&&(t.selectionStart=a,t.selectionEnd=Math.min(o,t.value.length))}}),Tt(e)==null&&t.value&&r(Ts(t)?Os(t.value):t.value),Un(()=>{var s=e();Ts(t)&&s===Os(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function Ps(t,e,r=e){fi(t,"change",n=>{var s=n?t.defaultChecked:t.checked;r(s)}),Tt(e)==null&&r(t.checked),Un(()=>{var n=e();t.checked=!!n})}function Ts(t){var e=t.type;return e==="number"||e==="range"}function Os(t){return t===""?null:+t}function as(t,e,r){if(t.multiple)return $c(t,e);for(var n of t.options){var s=$n(n);if(Pl(s,e)){n.selected=!0;return}}(!r||e!==void 0)&&(t.selectedIndex=-1)}function ho(t,e){let r=!0;Nn(()=>{e&&as(t,Tt(e),r),r=!1;var n=new MutationObserver(()=>{var s=t.__value;as(t,s)});return n.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{n.disconnect()}})}function Dr(t,e,r=e){var n=!0;fi(t,"change",s=>{var i=s?"[selected]":":checked",a;if(t.multiple)a=[].map.call(t.querySelectorAll(i),$n);else{var o=t.querySelector(i)??t.querySelector("option:not([disabled])");a=o&&$n(o)}r(a)}),Nn(()=>{var s=e();if(as(t,s,n),n&&s===void 0){var i=t.querySelector(":checked");i!==null&&(s=$n(i),r(s))}t.__value=s,n=!1}),ho(t)}function $c(t,e){for(var r of t.options)r.selected=~e.indexOf($n(r))}function $n(t){return"__value"in t?t.__value:t.value}function jn(t){return function(...e){var r=e[0];return r.stopPropagation(),t==null?void 0:t.apply(this,e)}}function Or(t){return function(...e){var r=e[0];return r.preventDefault(),t==null?void 0:t.apply(this,e)}}function gt(t=!1){const e=Pe,r=e.l.u;if(!r)return;let n=()=>dr(e.s);if(t){let s=0,i={};const a=Tn(()=>{let o=!1;const l=e.s;for(const c in l)l[c]!==i[c]&&(i[c]=l[c],o=!0);return o&&s++,s});n=()=>d(a)}r.b.length&&Ll(()=>{zi(e,n),Fs(r.b)}),Ws(()=>{const s=Tt(()=>r.m.map(nl));return()=>{for(const i of s)typeof i=="function"&&i()}}),r.a.length&&Ws(()=>{zi(e,n),Fs(r.a)})}function zi(t,e){if(t.l.s)for(const r of t.l.s)d(r);e()}function fo(t,e){var i;var r=(i=t.$$events)==null?void 0:i[e.type],n=In(r)?r.slice():r==null?[]:[r];for(var s of n)s.call(this,e)}function vo(t,e,r){if(t==null)return e(void 0),zt;const n=Tt(()=>t.subscribe(e,r));return n.unsubscribe?()=>n.unsubscribe():n}const Br=[];function _s(t,e=zt){let r=null;const n=new Set;function s(o){if(Ia(t,o)&&(t=o,r)){const l=!Br.length;for(const c of n)c[1](),Br.push(c,t);if(l){for(let c=0;c<Br.length;c+=2)Br[c][0](Br[c+1]);Br.length=0}}}function i(o){s(o(t))}function a(o,l=zt){const c=[o,l];return n.add(c),n.size===1&&(r=e(s,i)||zt),o(t),()=>{n.delete(c),n.size===0&&r&&(r(),r=null)}}return{set:s,update:i,subscribe:a}}function Sc(t){let e;return vo(t,r=>e=r)(),e}let Wn=!1,Js=Symbol();function Nr(t,e,r){const n=r[e]??(r[e]={store:null,source:R(void 0),unsubscribe:zt});if(n.store!==t&&!(Js in r))if(n.unsubscribe(),n.store=t??null,t==null)n.source.v=void 0,n.unsubscribe=zt;else{var s=!0;n.unsubscribe=vo(t,i=>{s?n.source.v=i:E(n.source,i)}),s=!1}return t&&Js in r?Sc(t):d(n.source)}function Ur(){const t={};function e(){ci(()=>{for(var r in t)t[r].unsubscribe();Pa(t,Js,{enumerable:!1,value:!0})})}return[t,e]}function Ec(t){var e=Wn;try{return Wn=!1,[t(),Wn]}finally{Wn=e}}const Pc={get(t,e){if(!t.exclude.includes(e))return d(t.version),e in t.special?t.special[e]():t.props[e]},set(t,e,r){return e in t.special||(t.special[e]=te({get[e](){return t.props[e]}},e,Ma)),t.special[e](r),Oi(t.version),!0},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},deleteProperty(t,e){return t.exclude.includes(e)||(t.exclude.push(e),Oi(t.version)),!0},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function Ie(t,e){return new Proxy({props:t,exclude:e,special:{},version:nn(0)},Pc)}const Tc={get(t,e){let r=t.props.length;for(;r--;){let n=t.props[r];if(Zr(n)&&(n=n()),typeof n=="object"&&n!==null&&e in n)return n[e]}},set(t,e,r){let n=t.props.length;for(;n--;){let s=t.props[n];Zr(s)&&(s=s());const i=wr(s,e);if(i&&i.set)return i.set(r),!0}return!1},getOwnPropertyDescriptor(t,e){let r=t.props.length;for(;r--;){let n=t.props[r];if(Zr(n)&&(n=n()),typeof n=="object"&&n!==null&&e in n){const s=wr(n,e);return s&&!s.configurable&&(s.configurable=!0),s}}},has(t,e){if(e===tr||e===La)return!1;for(let r of t.props)if(Zr(r)&&(r=r()),r!=null&&e in r)return!0;return!1},ownKeys(t){const e=[];for(let r of t.props){Zr(r)&&(r=r());for(const n in r)e.includes(n)||e.push(n)}return e}};function Ye(...t){return new Proxy({props:t},Tc)}function Fi(t){var e;return((e=t.ctx)==null?void 0:e.d)??!1}function te(t,e,r,n){var U;var s=(r&ml)!==0,i=!hn||(r&wl)!==0,a=(r&yl)!==0,o=(r&bl)!==0,l=!1,c;a?[c,l]=Ec(()=>t[e]):c=t[e];var u=tr in t||La in t,h=a&&(((U=wr(t,e))==null?void 0:U.set)??(u&&e in t&&(C=>t[e]=C)))||void 0,f=n,m=!0,p=!1,_=()=>(p=!0,m&&(m=!1,o?f=Tt(n):f=n),f);c===void 0&&n!==void 0&&(h&&i&&ul(),c=_(),h&&h(c));var g;if(i)g=()=>{var C=t[e];return C===void 0?_():(m=!0,p=!1,C)};else{var k=(s?Tn:ce)(()=>t[e]);k.f|=Ca,g=()=>{var C=d(k);return C!==void 0&&(f=void 0),C===void 0?f:C}}if((r&Ma)===0)return g;if(h){var b=t.$$legacy;return function(C,K){return arguments.length>0?((!i||!K||b||l)&&h(K?g():C),C):g()}}var y=!1,S=!1,$=R(c),O=Tn(()=>{var C=g(),K=d($);return y?(y=!1,S=!0,K):(S=!1,$.v=C)});return a&&d(O),s||(O.equals=ai),function(C,K){if(vr!==null&&(y=S,g(),d($)),arguments.length>0){const B=K?d(O):i&&a?jr(C):C;if(!O.equals(B)){if(y=!0,E($,B),p&&f!==void 0&&(f=B),Fi(O))return C;Tt(()=>d(O))}return C}return Fi(O)?O.v:d(O)}}function sr(t){Pe===null&&Na(),hn&&Pe.l!==null?Ac(Pe).m.push(t):Ws(()=>{const e=Tt(t);if(typeof e=="function")return e})}function Oc(t,e,{bubbles:r=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:r,cancelable:n})}function vi(){const t=Pe;return t===null&&Na(),(e,r,n)=>{var i;const s=(i=t.s.$$events)==null?void 0:i[e];if(s){const a=In(s)?s.slice():[s],o=Oc(e,r,n);for(const l of a)l.call(t.x,o);return!o.defaultPrevented}return!0}}function Ac(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const Cc="5";var Ea;typeof window<"u"&&((Ea=window.__svelte??(window.__svelte={})).v??(Ea.v=new Set)).add(Cc);gl();const jc="modulepreload",Lc=function(t){return"/"+t},qi={},ln=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){let a=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=a(r.map(c=>{if(c=Lc(c),c in qi)return;qi[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":jc,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((m,p)=>{f.addEventListener("load",m),f.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return s.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},Rc=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ln(async()=>{const{default:n}=await Promise.resolve().then(()=>gn);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class gi extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class Ic extends gi{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Dc extends gi{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Mc extends gi{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ks;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ks||(Ks={}));var Nc=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(u){try{c(n.next(u))}catch(h){a(h)}}function l(u){try{c(n.throw(u))}catch(h){a(h)}}function c(u){u.done?i(u.value):s(u.value).then(o,l)}c((n=n.apply(t,e||[])).next())})};class Uc{constructor(e,{headers:r={},customFetch:n,region:s=Ks.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=Rc(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return Nc(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=r;let o={},{region:l}=r;l||(l=this.region),l&&l!=="any"&&(o["x-region"]=l);let c;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",c=a):typeof a=="string"?(o["Content-Type"]="text/plain",c=a):typeof FormData<"u"&&a instanceof FormData?c=a:(o["Content-Type"]="application/json",c=JSON.stringify(a)));const u=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),s),body:c}).catch(p=>{throw new Ic(p)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new Dc(u);if(!u.ok)throw new Mc(u);let f=((n=u.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return f==="application/json"?m=yield u.json():f==="application/octet-stream"?m=yield u.blob():f==="text/event-stream"?m=u:f==="multipart/form-data"?m=yield u.formData():m=yield u.text(),{data:m,error:null}}catch(s){return{data:null,error:s}}})}}function zc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Fc(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var rt={},Wr={},Hr={},Vr={},Gr={},Yr={},qc=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},cn=qc();const Bc=cn.fetch,go=cn.fetch.bind(cn),po=cn.Headers,Wc=cn.Request,Hc=cn.Response,gn=Object.freeze(Object.defineProperty({__proto__:null,Headers:po,Request:Wc,Response:Hc,default:go,fetch:Bc},Symbol.toStringTag,{value:"Module"})),Vc=Fc(gn);var Hn={},Bi;function _o(){if(Bi)return Hn;Bi=1,Object.defineProperty(Hn,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Hn.default=t,Hn}var Wi;function mo(){if(Wi)return Yr;Wi=1;var t=Yr&&Yr.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Yr,"__esModule",{value:!0});const e=t(Vc),r=t(_o());class n{constructor(i){this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=i.headers,this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=i.shouldThrowOnError,this.signal=i.signal,this.isMaybeSingle=i.isMaybeSingle,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,a){return this.headers=Object.assign({},this.headers),this.headers[i]=a,this}then(i,a){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,h,f;let m=null,p=null,_=null,g=c.status,k=c.statusText;if(c.ok){if(this.method!=="HEAD"){const $=await c.text();$===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?p=$:p=JSON.parse($))}const y=(u=this.headers.Prefer)===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),S=(h=c.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");y&&S&&S.length>1&&(_=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(p)&&(p.length>1?(m={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,_=null,g=406,k="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{const y=await c.text();try{m=JSON.parse(y),Array.isArray(m)&&c.status===404&&(p=[],m=null,g=200,k="OK")}catch{c.status===404&&y===""?(g=204,k="No Content"):m={message:y}}if(m&&this.isMaybeSingle&&(!((f=m==null?void 0:m.details)===null||f===void 0)&&f.includes("0 rows"))&&(m=null,g=200,k="OK"),m&&this.shouldThrowOnError)throw new r.default(m)}return{error:m,data:p,count:_,status:g,statusText:k}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,h,f;return{error:{message:`${(u=c==null?void 0:c.name)!==null&&u!==void 0?u:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(h=c==null?void 0:c.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(f=c==null?void 0:c.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),l.then(i,a)}returns(){return this}overrideTypes(){return this}}return Yr.default=n,Yr}var Hi;function wo(){if(Hi)return Gr;Hi=1;var t=Gr&&Gr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Gr,"__esModule",{value:!0});const e=t(mo());class r extends e.default{select(s){let i=!1;const a=(s??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(s,{ascending:i=!0,nullsFirst:a,foreignTable:o,referencedTable:l=o}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${s}.${i?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:a=i}={}){const o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${s}`),this}range(s,i,{foreignTable:a,referencedTable:o=a}={}){const l=typeof o>"u"?"offset":`${o}.offset`,c=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${s}`),this.url.searchParams.set(c,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:s=!1,verbose:i=!1,settings:a=!1,buffers:o=!1,wal:l=!1,format:c="text"}={}){var u;const h=[s?"analyze":null,i?"verbose":null,a?"settings":null,o?"buffers":null,l?"wal":null].filter(Boolean).join("|"),f=(u=this.headers.Accept)!==null&&u!==void 0?u:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${c}; for="${f}"; options=${h};`,c==="json"?this:this}rollback(){var s;return((s=this.headers.Prefer)!==null&&s!==void 0?s:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}return Gr.default=r,Gr}var Vi;function pi(){if(Vi)return Vr;Vi=1;var t=Vr&&Vr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Vr,"__esModule",{value:!0});const e=t(wo());class r extends e.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const a=Array.from(new Set(i)).map(o=>typeof o=="string"&&new RegExp("[,()]").test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(s,`in.(${a})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:a,type:o}={}){let l="";o==="plain"?l="pl":o==="phrase"?l="ph":o==="websearch"&&(l="w");const c=a===void 0?"":`(${a})`;return this.url.searchParams.append(s,`${l}fts${c}.${i}`),this}match(s){return Object.entries(s).forEach(([i,a])=>{this.url.searchParams.append(i,`eq.${a}`)}),this}not(s,i,a){return this.url.searchParams.append(s,`not.${i}.${a}`),this}or(s,{foreignTable:i,referencedTable:a=i}={}){const o=a?`${a}.or`:"or";return this.url.searchParams.append(o,`(${s})`),this}filter(s,i,a){return this.url.searchParams.append(s,`${i}.${a}`),this}}return Vr.default=r,Vr}var Gi;function yo(){if(Gi)return Hr;Gi=1;var t=Hr&&Hr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Hr,"__esModule",{value:!0});const e=t(pi());class r{constructor(s,{headers:i={},schema:a,fetch:o}){this.url=s,this.headers=i,this.schema=a,this.fetch=o}select(s,{head:i=!1,count:a}={}){const o=i?"HEAD":"GET";let l=!1;const c=(s??"*").split("").map(u=>/\s/.test(u)&&!l?"":(u==='"'&&(l=!l),u)).join("");return this.url.searchParams.set("select",c),a&&(this.headers.Prefer=`count=${a}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:i,defaultToNull:a=!0}={}){const o="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),i&&l.push(`count=${i}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(s)){const c=s.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(c.length>0){const u=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:i,ignoreDuplicates:a=!1,count:o,defaultToNull:l=!0}={}){const c="POST",u=[`resolution=${a?"ignore":"merge"}-duplicates`];if(i!==void 0&&this.url.searchParams.set("on_conflict",i),this.headers.Prefer&&u.push(this.headers.Prefer),o&&u.push(`count=${o}`),l||u.push("missing=default"),this.headers.Prefer=u.join(","),Array.isArray(s)){const h=s.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(h.length>0){const f=[...new Set(h)].map(m=>`"${m}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:i}={}){const a="PATCH",o=[];return this.headers.Prefer&&o.push(this.headers.Prefer),i&&o.push(`count=${i}`),this.headers.Prefer=o.join(","),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const i="DELETE",a=[];return s&&a.push(`count=${s}`),this.headers.Prefer&&a.unshift(this.headers.Prefer),this.headers.Prefer=a.join(","),new e.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}return Hr.default=r,Hr}var yn={},bn={},Yi;function Gc(){return Yi||(Yi=1,Object.defineProperty(bn,"__esModule",{value:!0}),bn.version=void 0,bn.version="0.0.0-automated"),bn}var Ji;function Yc(){if(Ji)return yn;Ji=1,Object.defineProperty(yn,"__esModule",{value:!0}),yn.DEFAULT_HEADERS=void 0;const t=Gc();return yn.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${t.version}`},yn}var Ki;function Jc(){if(Ki)return Wr;Ki=1;var t=Wr&&Wr.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Wr,"__esModule",{value:!0});const e=t(yo()),r=t(pi()),n=Yc();class s{constructor(a,{headers:o={},schema:l,fetch:c}={}){this.url=a,this.headers=Object.assign(Object.assign({},n.DEFAULT_HEADERS),o),this.schemaName=l,this.fetch=c}from(a){const o=new URL(`${this.url}/${a}`);return new e.default(o,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new s(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,o={},{head:l=!1,get:c=!1,count:u}={}){let h;const f=new URL(`${this.url}/rpc/${a}`);let m;l||c?(h=l?"HEAD":"GET",Object.entries(o).filter(([_,g])=>g!==void 0).map(([_,g])=>[_,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([_,g])=>{f.searchParams.append(_,g)})):(h="POST",m=o);const p=Object.assign({},this.headers);return u&&(p.Prefer=`count=${u}`),new r.default({method:h,url:f,headers:p,schema:this.schemaName,body:m,fetch:this.fetch,allowEmpty:!1})}}return Wr.default=s,Wr}var Qi;function Kc(){if(Qi)return rt;Qi=1;var t=rt&&rt.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(rt,"__esModule",{value:!0}),rt.PostgrestError=rt.PostgrestBuilder=rt.PostgrestTransformBuilder=rt.PostgrestFilterBuilder=rt.PostgrestQueryBuilder=rt.PostgrestClient=void 0;const e=t(Jc());rt.PostgrestClient=e.default;const r=t(yo());rt.PostgrestQueryBuilder=r.default;const n=t(pi());rt.PostgrestFilterBuilder=n.default;const s=t(wo());rt.PostgrestTransformBuilder=s.default;const i=t(mo());rt.PostgrestBuilder=i.default;const a=t(_o());return rt.PostgrestError=a.default,rt.default={PostgrestClient:e.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:a.default},rt}var Qc=Kc();const Xc=zc(Qc),{PostgrestClient:Zc,PostgrestQueryBuilder:sp,PostgrestFilterBuilder:ip,PostgrestTransformBuilder:ap,PostgrestBuilder:op,PostgrestError:lp}=Xc,eu="2.11.2",tu={"X-Client-Info":`realtime-js/${eu}`},ru="1.0.0",bo=1e4,nu=1e3;var tn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(tn||(tn={}));var St;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(St||(St={}));var Nt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Nt||(Nt={}));var Qs;(function(t){t.websocket="websocket"})(Qs||(Qs={}));var Lr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Lr||(Lr={}));class su{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2);let a=this.HEADER_LENGTH+2;const o=n.decode(e.slice(a,a+s));a=a+s;const l=n.decode(e.slice(a,a+i));a=a+i;const c=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:c}}}class xo{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ee;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ee||(Ee={}));const Xi=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,a)=>(i[a]=iu(a,t,e,s),i),{})},iu=(t,e,r,n)=>{const s=e.find(o=>o.name===t),i=s==null?void 0:s.type,a=r[t];return i&&!n.includes(i)?ko(i,a):Xs(a)},ko=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return cu(e,r)}switch(t){case Ee.bool:return au(e);case Ee.float4:case Ee.float8:case Ee.int2:case Ee.int4:case Ee.int8:case Ee.numeric:case Ee.oid:return ou(e);case Ee.json:case Ee.jsonb:return lu(e);case Ee.timestamp:return uu(e);case Ee.abstime:case Ee.date:case Ee.daterange:case Ee.int4range:case Ee.int8range:case Ee.money:case Ee.reltime:case Ee.text:case Ee.time:case Ee.timestamptz:case Ee.timetz:case Ee.tsrange:case Ee.tstzrange:return Xs(e);default:return Xs(e)}},Xs=t=>t,au=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},ou=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},lu=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},cu=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const a=t.slice(1,r);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>ko(e,o))}return t},uu=t=>typeof t=="string"?t.replace(" ","T"):t,$o=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class As{constructor(e,r,n={},s=bo){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Zi;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Zi||(Zi={}));class Sn{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Sn.syncState(this.state,s,i,a),this.pendingDiffs.forEach(l=>{this.state=Sn.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Sn.syncDiff(this.state,s,i,a),o())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const i=this.cloneDeep(e),a=this.transformState(r),o={},l={};return this.map(i,(c,u)=>{a[c]||(l[c]=u)}),this.map(a,(c,u)=>{const h=i[c];if(h){const f=u.map(g=>g.presence_ref),m=h.map(g=>g.presence_ref),p=u.filter(g=>m.indexOf(g.presence_ref)<0),_=h.filter(g=>f.indexOf(g.presence_ref)<0);p.length>0&&(o[c]=p),_.length>0&&(l[c]=_)}else o[c]=u}),this.syncDiff(i,{joins:o,leaves:l},n,s)}static syncDiff(e,r,n,s){const{joins:i,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(o,l)=>{var c;const u=(c=e[o])!==null&&c!==void 0?c:[];if(e[o]=this.cloneDeep(l),u.length>0){const h=e[o].map(m=>m.presence_ref),f=u.filter(m=>h.indexOf(m.presence_ref)<0);e[o].unshift(...f)}n(o,u,l)}),this.map(a,(o,l)=>{let c=e[o];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),e[o]=c,s(o,c,l),c.length===0&&delete e[o]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ea;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(ea||(ea={}));var ta;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ta||(ta={}));var Xt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Xt||(Xt={}));class _i{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=St.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new As(this,Nt.join,this.params,this.timeout),this.rejoinTimer=new xo(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=St.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=St.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=St.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=St.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Nt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new Sn(this),this.broadcastEndpointURL=$o(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a,private:o}}=this.params;this._onError(u=>e==null?void 0:e(Xt.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Xt.CLOSED));const l={},c={broadcast:i,presence:a,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&s!==void 0?s:[],private:o};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(Xt.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,m=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,p=[];for(let _=0;_<m;_++){const g=f[_],{filter:{event:k,schema:b,table:y,filter:S}}=g,$=u&&u[_];if($&&$.event===k&&$.schema===b&&$.table===y&&$.filter===S)p.push(Object.assign(Object.assign({},g),{id:$.id}));else{this.unsubscribe(),e==null||e(Xt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(Xt.SUBSCRIBED);return}}).receive("error",u=>{e==null||e(Xt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Xt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this._on(e,r,n)}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const c=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=St.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Nt.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const s=new As(this,Nt.leave,{},e);s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}async _fetchWithTimeout(e,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),a}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new As(this,e,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,i;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:c,join:u}=Nt;if(n&&[o,l,c,u].indexOf(a)>=0&&n!==this._joinRef())return;let f=this._onMessage(a,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var p,_,g;return((p=m.filter)===null||p===void 0?void 0:p.event)==="*"||((g=(_=m.filter)===null||_===void 0?void 0:_.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===a}).map(m=>m.callback(f,n)):(i=this.bindings[a])===null||i===void 0||i.filter(m=>{var p,_,g,k,b,y;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const S=m.id,$=(p=m.filter)===null||p===void 0?void 0:p.event;return S&&((_=r.ids)===null||_===void 0?void 0:_.includes(S))&&($==="*"||($==null?void 0:$.toLocaleLowerCase())===((g=r.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const S=(b=(k=m==null?void 0:m.filter)===null||k===void 0?void 0:k.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return S==="*"||S===((y=r==null?void 0:r.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:_,table:g,commit_timestamp:k,type:b,errors:y}=p;f=Object.assign(Object.assign({},{schema:_,table:g,commit_timestamp:k,eventType:b,new:{},old:{},errors:y}),this._getPayloadRecords(p))}m.callback(f,n)})}_isClosed(){return this.state===St.closed}_isJoined(){return this.state===St.joined}_isJoining(){return this.state===St.joining}_isLeaving(){return this.state===St.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&_i.isEqual(s.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Nt.close,{},e)}_onError(e){this._on(Nt.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=St.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Xi(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Xi(e.columns,e.old_record)),r}}const du=()=>{},hu=typeof WebSocket<"u",fu=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class vu{constructor(e,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=tu,this.params={},this.timeout=bo,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=du,this.conn=null,this.sendBuffer=[],this.serializer=new su,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>ln(async()=>{const{default:l}=await Promise.resolve().then(()=>gn);return{default:l}},void 0).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${Qs.websocket}`,this.httpEndpoint=$o(e),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,a)=>a(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new xo(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(hu){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new gu(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),ln(async()=>{const{default:e}=await import("./browser-Ce-p-h9I.js").then(r=>r.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ru}))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case tn.connecting:return Lr.Connecting;case tn.open:return Lr.Open;case tn.closing:return Lr.Closing;default:return Lr.Closed}}isConnected(){return this.connectionState()===Lr.Open}channel(e,r={config:{}}){const n=new _i(`realtime:${e}`,r,this);return this.channels.push(n),n}push(e){const{topic:r,event:n,payload:s,ref:i}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let r=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(r){let n=null;try{n=JSON.parse(atob(r.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=r,this.channels.forEach(s=>{r&&s.updateJoinPayload({access_token:r}),s.joinedOnce&&s._isJoined()&&s._push(Nt.access_token,{access_token:r})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(nu,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:n,event:s,payload:i,ref:a}=r;a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${a&&"("+a+")"||""}`,i),this.channels.filter(o=>o._isMember(n)).forEach(o=>o._trigger(s,i,a)),this.stateChangeCallbacks.message.forEach(o=>o(r))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Nt.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([fu],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class gu{constructor(e,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=tn.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class mi extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function nt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class pu extends mi{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Zs extends mi{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var _u=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(u){try{c(n.next(u))}catch(h){a(h)}}function l(u){try{c(n.throw(u))}catch(h){a(h)}}function c(u){u.done?i(u.value):s(u.value).then(o,l)}c((n=n.apply(t,e||[])).next())})};const So=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ln(async()=>{const{default:n}=await Promise.resolve().then(()=>gn);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},mu=()=>_u(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ln(()=>Promise.resolve().then(()=>gn),void 0)).Response:Response}),ei=t=>{if(Array.isArray(t))return t.map(r=>ei(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=ei(n)}),e};var zr=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(u){try{c(n.next(u))}catch(h){a(h)}}function l(u){try{c(n.throw(u))}catch(h){a(h)}}function c(u){u.done?i(u.value):s(u.value).then(o,l)}c((n=n.apply(t,e||[])).next())})};const Cs=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),wu=(t,e,r)=>zr(void 0,void 0,void 0,function*(){const n=yield mu();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{e(new pu(Cs(s),t.status||500))}).catch(s=>{e(new Zs(Cs(s),s))}):e(new Zs(Cs(t),t))}),yu=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function qn(t,e,r,n,s,i){return zr(this,void 0,void 0,function*(){return new Promise((a,o)=>{t(r,yu(e,n,s,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>wu(l,o,n))})})}function os(t,e,r,n){return zr(this,void 0,void 0,function*(){return qn(t,"GET",e,r,n)})}function fr(t,e,r,n,s){return zr(this,void 0,void 0,function*(){return qn(t,"POST",e,n,s,r)})}function bu(t,e,r,n,s){return zr(this,void 0,void 0,function*(){return qn(t,"PUT",e,n,s,r)})}function xu(t,e,r,n){return zr(this,void 0,void 0,function*(){return qn(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Eo(t,e,r,n,s){return zr(this,void 0,void 0,function*(){return qn(t,"DELETE",e,n,s,r)})}var yt=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(u){try{c(n.next(u))}catch(h){a(h)}}function l(u){try{c(n.throw(u))}catch(h){a(h)}}function c(u){u.done?i(u.value):s(u.value).then(o,l)}c((n=n.apply(t,e||[])).next())})};const ku={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ra={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class $u{constructor(e,r={},n,s){this.url=e,this.headers=r,this.bucketId=n,this.fetch=So(s)}uploadOrUpdate(e,r,n,s){return yt(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},ra),s);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=n,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(o=Object.assign(Object.assign({},o),s.headers));const c=this._removeEmptyFolders(r),u=this._getFinalPath(c),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),f=yield h.json();return h.ok?{data:{path:c,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(nt(i))return{data:null,error:i};throw i}})}upload(e,r,n){return yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return yt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",r);try{let l;const c=Object.assign({upsert:ra.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:u}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(nt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,r){return yt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield fr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new mi("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}})}update(e,r,n){return yt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return yt(this,void 0,void 0,function*(){try{return{data:yield fr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(nt(s))return{data:null,error:s};throw s}})}copy(e,r,n){return yt(this,void 0,void 0,function*(){try{return{data:{path:(yield fr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(nt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return yt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield fr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(nt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return yt(this,void 0,void 0,function*(){try{const s=yield fr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(nt(s))return{data:null,error:s};throw s}})}download(e,r){return yt(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield os(this.fetch,`${this.url}/${s}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(nt(o))return{data:null,error:o};throw o}})}info(e){return yt(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield os(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:ei(n),error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}})}exists(e){return yt(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield xu(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(nt(n)&&n instanceof Zs){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const o=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${c}`)}}}remove(e){return yt(this,void 0,void 0,function*(){try{return{data:yield Eo(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}})}list(e,r,n){return yt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},ku),r),{prefix:e||""});return{data:yield fr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(nt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const Su="2.7.1",Eu={"X-Client-Info":`storage-js/${Su}`};var Jr=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(u){try{c(n.next(u))}catch(h){a(h)}}function l(u){try{c(n.throw(u))}catch(h){a(h)}}function c(u){u.done?i(u.value):s(u.value).then(o,l)}c((n=n.apply(t,e||[])).next())})};class Pu{constructor(e,r={},n){this.url=e,this.headers=Object.assign(Object.assign({},Eu),r),this.fetch=So(n)}listBuckets(){return Jr(this,void 0,void 0,function*(){try{return{data:yield os(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(nt(e))return{data:null,error:e};throw e}})}getBucket(e){return Jr(this,void 0,void 0,function*(){try{return{data:yield os(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Jr(this,void 0,void 0,function*(){try{return{data:yield fr(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return Jr(this,void 0,void 0,function*(){try{return{data:yield bu(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(nt(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Jr(this,void 0,void 0,function*(){try{return{data:yield fr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Jr(this,void 0,void 0,function*(){try{return{data:yield Eo(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(nt(r))return{data:null,error:r};throw r}})}}class Tu extends Pu{constructor(e,r={},n){super(e,r,n)}from(e){return new $u(this.url,this.headers,e,this.fetch)}}const Ou="2.49.4";let kn="";typeof Deno<"u"?kn="deno":typeof document<"u"?kn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?kn="react-native":kn="node";const Au={"X-Client-Info":`supabase-js-${kn}/${Ou}`},Cu={headers:Au},ju={schema:"public"},Lu={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Ru={};var Iu=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(u){try{c(n.next(u))}catch(h){a(h)}}function l(u){try{c(n.throw(u))}catch(h){a(h)}}function c(u){u.done?i(u.value):s(u.value).then(o,l)}c((n=n.apply(t,e||[])).next())})};const Du=t=>{let e;return t?e=t:typeof fetch>"u"?e=go:e=fetch,(...r)=>e(...r)},Mu=()=>typeof Headers>"u"?po:Headers,Nu=(t,e,r)=>{const n=Du(r),s=Mu();return(i,a)=>Iu(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:t;let c=new s(a==null?void 0:a.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},a),{headers:c}))})};var Uu=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(u){try{c(n.next(u))}catch(h){a(h)}}function l(u){try{c(n.throw(u))}catch(h){a(h)}}function c(u){u.done?i(u.value):s(u.value).then(o,l)}c((n=n.apply(t,e||[])).next())})};function zu(t){return t.replace(/\/$/,"")}function Fu(t,e){const{db:r,auth:n,realtime:s,global:i}=t,{db:a,auth:o,realtime:l,global:c}=e,u={db:Object.assign(Object.assign({},a),r),auth:Object.assign(Object.assign({},o),n),realtime:Object.assign(Object.assign({},l),s),global:Object.assign(Object.assign({},c),i),accessToken:()=>Uu(this,void 0,void 0,function*(){return""})};return t.accessToken?u.accessToken=t.accessToken:delete u.accessToken,u}const Po="2.69.1",en=30*1e3,ti=3,js=ti*en,qu="http://localhost:9999",Bu="supabase.auth.token",Wu={"X-Client-Info":`gotrue-js/${Po}`},ri="X-Supabase-Api-Version",To={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Hu=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Vu=6e5;class wi extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function ee(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Gu extends wi{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Yu(t){return ee(t)&&t.name==="AuthApiError"}class Oo extends wi{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class xr extends wi{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class cr extends xr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ju(t){return ee(t)&&t.name==="AuthSessionMissingError"}class Ls extends xr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Vn extends xr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Gn extends xr{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ku(t){return ee(t)&&t.name==="AuthImplicitGrantRedirectError"}class na extends xr{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ni extends xr{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Rs(t){return ee(t)&&t.name==="AuthRetryableFetchError"}class sa extends xr{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class En extends xr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ia="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),aa=` 	
\r=`.split(""),Qu=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<aa.length;e+=1)t[aa[e].charCodeAt(0)]=-2;for(let e=0;e<ia.length;e+=1)t[ia[e].charCodeAt(0)]=e;return t})();function Ao(t,e,r){const n=Qu[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function oa(t){const e=[],r=a=>{e.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{ed(a,n,r)};for(let a=0;a<t.length;a+=1)Ao(t.charCodeAt(a),s,i);return e.join("")}function Xu(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Zu(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}Xu(n,e)}}function ed(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if((t>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function td(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Ao(t.charCodeAt(s),r,n);return new Uint8Array(e)}function rd(t){const e=[];return Zu(t,r=>e.push(r)),new Uint8Array(e)}function nd(t){return Math.round(Date.now()/1e3)+t}function sd(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const qt=()=>typeof window<"u"&&typeof document<"u",Tr={tested:!1,writable:!1},Pn=()=>{if(!qt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Tr.tested)return Tr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Tr.tested=!0,Tr.writable=!0}catch{Tr.tested=!0,Tr.writable=!1}return Tr.writable};function id(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const Co=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>ln(async()=>{const{default:n}=await Promise.resolve().then(()=>gn);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},ad=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",jo=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Yn=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Jn=async(t,e)=>{await t.removeItem(e)};class ms{constructor(){this.promise=new ms.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}ms.promiseConstructor=Promise;function Is(t){const e=t.split(".");if(e.length!==3)throw new En("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Hu.test(e[n]))throw new En("JWT not in base64url format");return{header:JSON.parse(oa(e[0])),payload:JSON.parse(oa(e[1])),signature:td(e[2]),raw:{header:e[0],payload:e[1]}}}async function od(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function ld(t,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await t(i);if(!e(i,null,a)){n(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function cd(t){return("0"+t.toString(16)).substr(-2)}function ud(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,cd).join("")}async function dd(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function hd(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await dd(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Kr(t,e,r=!1){const n=ud();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await jo(t,`${e}-code-verifier`,s);const i=await hd(n);return[i,n===i?"plain":"s256"]}const fd=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function vd(t){const e=t.headers.get(ri);if(!e||!e.match(fd))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function gd(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function pd(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var _d=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};const Ar=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),md=[502,503,504];async function la(t){var e;if(!ad(t))throw new ni(Ar(t),0);if(md.includes(t.status))throw new ni(Ar(t),t.status);let r;try{r=await t.json()}catch(i){throw new Oo(Ar(i),i)}let n;const s=vd(t);if(s&&s.getTime()>=To["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new sa(Ar(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new cr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new sa(Ar(r),t.status,r.weak_password.reasons);throw new Gu(Ar(r),t.status||500,n)}const wd=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function ie(t,e,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[ri]||(i[ri]=To["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await yd(t,e,r+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function yd(t,e,r,n,s,i){const a=wd(e,n,s,i);let o;try{o=await t(r,Object.assign({},a))}catch(l){throw console.error(l),new ni(Ar(l),0)}if(o.ok||await la(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(l){await la(l)}}function ur(t){var e;let r=null;$d(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=nd(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function ca(t){const e=ur(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function gr(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function bd(t){return{data:t,error:null}}function xd(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=t,a=_d(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function kd(t){return t}function $d(t){return t.access_token&&t.refresh_token&&t.expires_in}var Sd=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class Ed{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=Co(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r="global"){try{return await ie(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ee(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await ie(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:gr})}catch(n){if(ee(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Sd(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await ie(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:xd,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(ee(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await ie(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:gr})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,i,a,o,l;try{const c={nextPage:null,lastPage:0,total:0},u=await ie(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:kd});if(u.error)throw u.error;const h=await u.json(),f=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(l=(o=u.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(p=>{const _=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(p.split(";")[1].split("=")[1]);c[`${g}Page`]=_}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(ee(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await ie(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:gr})}catch(r){if(ee(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){try{return await ie(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:gr})}catch(n){if(ee(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){try{return await ie(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:gr})}catch(n){if(ee(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:r,error:n}=await ie(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(ee(r))return{data:null,error:r};throw r}}async _deleteFactor(e){try{return{data:await ie(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(ee(r))return{data:null,error:r};throw r}}}const Pd={getItem:t=>Pn()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Pn()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Pn()&&globalThis.localStorage.removeItem(t)}};function ua(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function Td(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Qr={debug:!!(globalThis&&Pn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Lo extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Od extends Lo{}async function Ad(t,e,r){Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Od(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Qr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Td();const Cd={url:qu,storageKey:Bu,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Wu,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function da(t,e,r){return await r()}class Ln{constructor(e){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ln.nextInstanceID,Ln.nextInstanceID+=1,this.instanceID>0&&qt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Cd),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Ed({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Co(s.fetch),this.lock=s.lock||da,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:qt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Ad:this.lock=da,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Pn()?this.storage=Pd:(this.memoryStorage={},this.storage=ua(this.memoryStorage)):(this.memoryStorage={},this.storage=ua(this.memoryStorage)),qt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Po}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=id(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),qt()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Ku(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ee(r)?{error:r}:{error:new Oo("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const i=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:ur}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(ee(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,n,s;try{let i;if("email"in e){const{email:u,password:h,options:f}=e;let m=null,p=null;this.flowType==="pkce"&&([m,p]=await Kr(this.storage,this.storageKey)),i=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:p},xform:ur})}else if("phone"in e){const{phone:u,password:h,options:f}=e;i=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ur})}else throw new Vn("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,c=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(ee(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:a,options:o}=e;r=await ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ca})}else if("phone"in e){const{phone:i,password:a,options:o}=e;r=await ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:ca})}else throw new Vn("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ls}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(ee(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const r=await Yn(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:a}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:ur});if(await Jn(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ls}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(ee(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:i,nonce:a}=e,o=await ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:ur}),{data:l,error:c}=o;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Ls}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(r){if(ee(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,i,a;try{if("email"in e){const{email:o,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await Kr(this.storage,this.storageKey));const{error:h}=await ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:o,options:l}=e,{data:c,error:u}=await ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Vn("You must provide either an email or phone number.")}catch(o){if(ee(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var r,n;try{let s,i;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:o}=await ie(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:ur});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,c=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(ee(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Kr(this.storage,this.storageKey)),await ie(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:bd})}catch(i){if(ee(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new cr;const{error:s}=await ie(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(ee(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:a}=await ie(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:a,error:o}=await ie(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new Vn("You must provide either an email or phone number and a type")}catch(r){if(ee(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Yn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<js:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!a&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:gr}):await this._useSession(async r=>{var n,s,i;const{data:a,error:o}=r;if(o)throw o;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new cr}:await ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:gr})})}catch(r){if(ee(r))return Ju(r)&&(await this._removeSession(),await Jn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new cr;const a=s.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await Kr(this.storage,this.storageKey));const{data:c,error:u}=await ie(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:gr});if(u)throw u;return a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(ee(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new cr;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:a}=Is(e.access_token);if(a.exp&&(n=a.exp,s=n<=r),s){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(ee(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:a,error:o}=r;if(o)throw o;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new cr;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ee(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!qt())throw new Gn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Gn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new na("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Gn("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new na("No code detected.");const{data:b,error:y}=await this._exchangeCodeForSession(e.code);if(y)throw y;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:o,expires_at:l,token_type:c}=e;if(!i||!o||!a||!c)throw new Gn("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(o);let f=u+h;l&&(f=parseInt(l));const m=f-u;m*1e3<=en&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const p=f-h;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,u);const{data:_,error:g}=await this._getUser(i);if(g)throw g;const k={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:a,token_type:c,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:k,redirectType:e.type},error:null}}catch(n){if(ee(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Yn(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(Yu(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await Jn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=sd(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Kr(this.storage,this.storageKey,!0));try{return await ie(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(ee(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(ee(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var a,o,l,c,u;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ie(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return qt()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ee(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)throw a;return await ie(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(ee(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await ld(async s=>(s>0&&await od(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await ie(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ur})),(s,i)=>{const a=200*Math.pow(2,s);return i&&Rs(i)&&Date.now()+a-n<en})}catch(n){if(this._debug(r,"error",n),ee(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),qt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Yn(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const s=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<js;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${js}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Rs(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new cr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new ms;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new cr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(s,"error",i),ee(i)){const a={session:null,error:i};return Rs(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,r)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await jo(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Jn(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&qt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),en);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/en);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${en}ms, refresh threshold is ${ti} ticks`),s<=ti&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Lo)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!qt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await Kr(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await ie(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ee(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await ie(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(ee(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:a,error:o}=await ie(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(r){if(ee(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await ie(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(ee(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],s=n.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=n.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Is(s.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const u=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(a=>a.kid===e);if(n||(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+Vu>Date.now()))return n;const{data:s,error:i}=await ie(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new En("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find(a=>a.kid===e),!n)throw new En("No matching signing key found in JWKS");return n}async getClaims(e,r={keys:[]}){try{let n=e;if(!n){const{data:m,error:p}=await this.getSession();if(p||!m.session)return{data:null,error:p};n=m.session.access_token}const{header:s,payload:i,signature:a,raw:{header:o,payload:l}}=Is(n);if(gd(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:s,signature:a},error:null}}const c=pd(s.alg),u=await this.fetchJwk(s.kid,r),h=await crypto.subtle.importKey("jwk",u,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,a,rd(`${o}.${l}`)))throw new En("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(n){if(ee(n))return{data:null,error:n};throw n}}}Ln.nextInstanceID=0;const jd=Ln;class Ld extends jd{constructor(e){super(e)}}var Rd=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function o(u){try{c(n.next(u))}catch(h){a(h)}}function l(u){try{c(n.throw(u))}catch(h){a(h)}}function c(u){u.done?i(u.value):s(u.value).then(o,l)}c((n=n.apply(t,e||[])).next())})};class Id{constructor(e,r,n){var s,i,a;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const o=zu(e);this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:ju,realtime:Ru,auth:Object.assign(Object.assign({},Lu),{storageKey:l}),global:Cu},u=Fu(n??{},c);this.storageKey=(s=u.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=u.auth)!==null&&a!==void 0?a:{},this.headers,u.global.fetch),this.fetch=Nu(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Zc(`${o}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new Uc(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Tu(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return Rd(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:a,lock:o,debug:l},c,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Ld({url:this.authUrl,headers:Object.assign(Object.assign({},h),c),storageKey:i,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,flowType:a,lock:o,debug:l,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new vu(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Dd=(t,e,r)=>new Id(t,e,r),ha="https://gajgtaibreddewxawawx.supabase.co",fa="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imdhamd0YWlicmVkZGV3eGF3YXd4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUyODc4MzIsImV4cCI6MjA2MDg2MzgzMn0.MHaf8RgumPoNG2VAzeNEU7mPcs9BbpDAjuHa8ETY4eo";let Ro=null;try{ha&&fa&&(Ro=Dd(ha,fa,{auth:{persistSession:!0,autoRefreshToken:!0}}))}catch(t){throw console.error("Supabase 클라이언트 생성 실패:",t),t}const le=Ro,Ds={fromSupabase:{event:t=>({id:t.id,title:t.title,description:t.description,organizer:t.organizer,category:t.category,reservationStart:t.reservation_start?new Date(t.reservation_start):null,reservationPlatform:t.reservation_platform,reservationLink:t.reservation_link,createdAt:t.created_at?new Date(t.created_at):null,updatedAt:t.updated_at?new Date(t.updated_at):null,hasNotification:!1}),note:t=>({id:t.id,userId:t.user_id,eventId:t.event_id,content:t.content,createdAt:t.created_at?new Date(t.created_at):null,updatedAt:t.updated_at?new Date(t.updated_at):null}),notification:t=>({id:t.id,userId:t.user_id,eventId:t.event_id,type:t.type,minutesBefore:t.minutes_before,createdAt:t.created_at?new Date(t.created_at):null,updatedAt:t.updated_at?new Date(t.updated_at):null})},toSupabase:{event:t=>({id:t.id,title:t.title,description:t.description,organizer:t.organizer,category:t.category,reservation_start:t.reservationStart,reservation_platform:t.reservationPlatform,reservation_link:t.reservationLink}),note:t=>({id:t.id,user_id:t.userId,event_id:t.eventId,content:t.content}),notification:t=>({id:t.id,user_id:t.userId,event_id:t.eventId,type:t.type,minutes_before:t.minutesBefore})}},va=async()=>{if(!le)throw new Error("Supabase 클라이언트가 초기화되지 않았습니다.");try{const{data:t,error:e}=await le.auth.getUser();if(e){if(e.name==="AuthSessionMissingError")return console.log("비로그인 사용자입니다. 제한된 기능을 제공합니다."),null;throw console.error("사용자 정보를 가져오는 중 오류 발생:",e),ga("AUTH_GET_USER_ERROR","사용자 정보를 가져오는 중 오류가 발생했습니다.",e)}return(t==null?void 0:t.user)||null}catch(t){if(t instanceof Error&&t.name==="AuthSessionMissingError")return console.log("비로그인 사용자입니다. 제한된 기능을 제공합니다."),null;throw console.error("현재 사용자 확인 중 예외 발생:",t),ga("AUTH_UNEXPECTED_ERROR","사용자 확인 중 예기치 않은 오류가 발생했습니다.",t)}};function ga(t,e,r){return{code:t,message:e,details:r}}const Md={isLoggedIn:!1,isLoading:!0,user:null,error:null};function Nd(){const{subscribe:t,set:e,update:r}=_s(Md),n=async()=>{var l,c;try{r(h=>({...h,isLoading:!0,error:null}));const u=await va();if(u){const{data:h,error:f}=await le.from("resv_profiles").select("role").eq("id",u.id).single();f&&console.error("프로필 정보를 가져오는데 실패했습니다:",f.message);const m={id:u.id,email:u.email||void 0,fullName:(l=u.user_metadata)==null?void 0:l.full_name,avatarUrl:(c=u.user_metadata)==null?void 0:c.avatar_url,role:(h==null?void 0:h.role)||"user"};e({isLoggedIn:!0,isLoading:!1,user:m,error:null})}else e({isLoggedIn:!1,isLoading:!1,user:null,error:null})}catch(u){r(h=>({...h,isLoading:!1,error:u instanceof Error?u.message:"인증 상태를 확인하는 중 오류가 발생했습니다"}))}},s=async()=>{try{const l=await va();if(!l)return{isAdmin:!1};const{data:c,error:u}=await le.from("resv_profiles").select("role").eq("id",l.id).single();if(u)throw u;return{isAdmin:c&&["admin","super_admin"].includes(c.role),role:c==null?void 0:c.role}}catch(l){return console.error("관리자 권한 확인 중 오류:",l),{isAdmin:!1}}},i=async()=>{try{r(c=>({...c,isLoading:!0,error:null}));const{error:l}=await le.auth.signInWithOAuth({provider:"kakao",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(l)throw l}catch(l){r(c=>({...c,isLoading:!1,error:l instanceof Error?l.message:"로그인 중 오류가 발생했습니다"}))}},a=async()=>{try{r(c=>({...c,isLoading:!0,error:null}));const{error:l}=await le.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(l)throw l}catch(l){r(c=>({...c,isLoading:!1,error:l instanceof Error?l.message:"구글 로그인 중 오류가 발생했습니다"}))}},o=async()=>{try{r(c=>({...c,isLoading:!0,error:null}));const{error:l}=await le.auth.signOut();if(l)throw l;e({isLoggedIn:!1,isLoading:!1,user:null,error:null})}catch(l){r(c=>({...c,isLoading:!1,error:l instanceof Error?l.message:"로그아웃 중 오류가 발생했습니다"}))}};return le.auth.onAuthStateChange((l,c)=>{l==="SIGNED_IN"&&c?n():l==="SIGNED_OUT"&&e({isLoggedIn:!1,isLoading:!1,user:null,error:null})}),n(),{subscribe:t,login:i,loginWithGoogle:a,logout:o,refresh:n,checkAdminAccess:s}}const it=Nd();var Ud=P("<button><!></button>");function Re(t,e){let r=te(e,"type",8,"button"),n=te(e,"variant",8,"primary"),s=te(e,"size",8,"md"),i=te(e,"disabled",8,!1),a=te(e,"fullWidth",8,!1),o=te(e,"onClick",8,void 0),l=te(e,"className",8,"");const c=()=>{const f="inline-flex items-center justify-center gap-2 font-medium rounded transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",m={primary:"bg-[#3B82F6] text-white hover:bg-[#2563EB] focus:ring-blue-500",secondary:"bg-[#10B981] text-white hover:bg-[#059669] focus:ring-green-500",outline:"bg-transparent border border-gray-300 text-[#374151] hover:bg-gray-50 focus:ring-[#3B82F6]",text:"bg-transparent text-[#3B82F6] hover:bg-gray-50 focus:ring-[#3B82F6]",ghost:"bg-transparent hover:bg-gray-100 text-[#374151]",icon:"bg-transparent text-[#374151] hover:bg-gray-100 rounded-full p-1"},p={sm:"py-1 px-2 text-sm",md:"py-2 px-4 text-base",lg:"py-3 px-6 text-lg",icon:"h-9 w-9 p-0"},_=a()?"w-full":"max-w-fit",g=i()?"opacity-50 cursor-not-allowed":"cursor-pointer";return`${f} ${m[n()]} ${p[s()]} ${_} ${g} ${l()}`};var u=Ud(),h=v(u);je(h,e,"default",{}),z(f=>{_r(u,"type",r()),at(u,1,f),u.disabled=i()},[()=>is(c())],ce),D("click",u,function(...f){var m;(m=o())==null||m.apply(this,f)}),D("click",u,function(f){fo.call(this,e,f)}),x(t,u)}/**
 * @license lucide-svelte v0.507.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 */const zd={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var Fd=sc("<svg><!><!></svg>");function Je(t,e){const r=Ie(e,["children","$$slots","$$events","$$legacy"]),n=Ie(r,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);lt(e,!1);let s=te(e,"name",8,void 0),i=te(e,"color",8,"currentColor"),a=te(e,"size",8,24),o=te(e,"strokeWidth",8,2),l=te(e,"absoluteStrokeWidth",8,!1),c=te(e,"iconNode",24,()=>[]);const u=(..._)=>_.filter((g,k,b)=>!!g&&b.indexOf(g)===k).join(" ");gt();var h=Fd();let f;var m=v(h);Et(m,1,c,Gt,(_,g)=>{let k=()=>d(g)[0],b=()=>d(g)[1];var y=ye(),S=V(y);fc(S,k,!0,($,O)=>{let U;z(()=>U=Mi($,U,{...b()}))}),x(_,y)});var p=w(m);je(p,e,"default",{}),z((_,g)=>f=Mi(h,f,{...zd,...n,width:a(),height:a(),stroke:i(),"stroke-width":_,class:g}),[()=>l()?Number(o())*24/Number(a()):o(),()=>u("lucide-icon","lucide",s()?`lucide-${s()}`:"",r.class)],ce),x(t,h),ct()}function Io(t,e){const r=Ie(e,["children","$$slots","$$events","$$legacy"]);Je(t,Ye({name:"bell-off"},()=>r,{iconNode:[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742"}],["path",{d:"m2 2 20 20"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05"}]],children:(s,i)=>{var a=ye(),o=V(a);je(o,e,"default",{}),x(s,a)},$$slots:{default:!0}}))}function yi(t,e){const r=Ie(e,["children","$$slots","$$events","$$legacy"]);Je(t,Ye({name:"bell"},()=>r,{iconNode:[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326"}]],children:(s,i)=>{var a=ye(),o=V(a);je(o,e,"default",{}),x(s,a)},$$slots:{default:!0}}))}function Do(t,e){const r=Ie(e,["children","$$slots","$$events","$$legacy"]);Je(t,Ye({name:"calendar"},()=>r,{iconNode:[["path",{d:"M8 2v4"}],["path",{d:"M16 2v4"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2"}],["path",{d:"M3 10h18"}]],children:(s,i)=>{var a=ye(),o=V(a);je(o,e,"default",{}),x(s,a)},$$slots:{default:!0}}))}function qd(t,e){const r=Ie(e,["children","$$slots","$$events","$$legacy"]);Je(t,Ye({name:"chevron-down"},()=>r,{iconNode:[["path",{d:"m6 9 6 6 6-6"}]],children:(s,i)=>{var a=ye(),o=V(a);je(o,e,"default",{}),x(s,a)},$$slots:{default:!0}}))}function bi(t,e){const r=Ie(e,["children","$$slots","$$events","$$legacy"]);Je(t,Ye({name:"chevron-right"},()=>r,{iconNode:[["path",{d:"m9 18 6-6-6-6"}]],children:(s,i)=>{var a=ye(),o=V(a);je(o,e,"default",{}),x(s,a)},$$slots:{default:!0}}))}function Bd(t,e){const r=Ie(e,["children","$$slots","$$events","$$legacy"]);Je(t,Ye({name:"chevron-up"},()=>r,{iconNode:[["path",{d:"m18 15-6-6-6 6"}]],children:(s,i)=>{var a=ye(),o=V(a);je(o,e,"default",{}),x(s,a)},$$slots:{default:!0}}))}function Ms(t,e){const r=Ie(e,["children","$$slots","$$events","$$legacy"]);Je(t,Ye({name:"clock"},()=>r,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["polyline",{points:"12 6 12 12 16 14"}]],children:(s,i)=>{var a=ye(),o=V(a);je(o,e,"default",{}),x(s,a)},$$slots:{default:!0}}))}function Wd(t,e){const r=Ie(e,["children","$$slots","$$events","$$legacy"]);Je(t,Ye({name:"download"},()=>r,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]],children:(s,i)=>{var a=ye(),o=V(a);je(o,e,"default",{}),x(s,a)},$$slots:{default:!0}}))}function Mo(t,e){const r=Ie(e,["children","$$slots","$$events","$$legacy"]);Je(t,Ye({name:"external-link"},()=>r,{iconNode:[["path",{d:"M15 3h6v6"}],["path",{d:"M10 14 21 3"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}]],children:(s,i)=>{var a=ye(),o=V(a);je(o,e,"default",{}),x(s,a)},$$slots:{default:!0}}))}function Hd(t,e){const r=Ie(e,["children","$$slots","$$events","$$legacy"]);Je(t,Ye({name:"funnel"},()=>r,{iconNode:[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z"}]],children:(s,i)=>{var a=ye(),o=V(a);je(o,e,"default",{}),x(s,a)},$$slots:{default:!0}}))}function Vd(t,e){const r=Ie(e,["children","$$slots","$$events","$$legacy"]);Je(t,Ye({name:"globe"},()=>r,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"}],["path",{d:"M2 12h20"}]],children:(s,i)=>{var a=ye(),o=V(a);je(o,e,"default",{}),x(s,a)},$$slots:{default:!0}}))}function Gd(t,e){const r=Ie(e,["children","$$slots","$$events","$$legacy"]);Je(t,Ye({name:"house"},()=>r,{iconNode:[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}]],children:(s,i)=>{var a=ye(),o=V(a);je(o,e,"default",{}),x(s,a)},$$slots:{default:!0}}))}function Yd(t,e){const r=Ie(e,["children","$$slots","$$events","$$legacy"]);Je(t,Ye({name:"log-in"},()=>r,{iconNode:[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}],["polyline",{points:"10 17 15 12 10 7"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12"}]],children:(s,i)=>{var a=ye(),o=V(a);je(o,e,"default",{}),x(s,a)},$$slots:{default:!0}}))}function No(t,e){const r=Ie(e,["children","$$slots","$$events","$$legacy"]);Je(t,Ye({name:"log-out"},()=>r,{iconNode:[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}],["polyline",{points:"16 17 21 12 16 7"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12"}]],children:(s,i)=>{var a=ye(),o=V(a);je(o,e,"default",{}),x(s,a)},$$slots:{default:!0}}))}function Jd(t,e){const r=Ie(e,["children","$$slots","$$events","$$legacy"]);Je(t,Ye({name:"moon"},()=>r,{iconNode:[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"}]],children:(s,i)=>{var a=ye(),o=V(a);je(o,e,"default",{}),x(s,a)},$$slots:{default:!0}}))}function pa(t,e){const r=Ie(e,["children","$$slots","$$events","$$legacy"]);Je(t,Ye({name:"plus"},()=>r,{iconNode:[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]],children:(s,i)=>{var a=ye(),o=V(a);je(o,e,"default",{}),x(s,a)},$$slots:{default:!0}}))}function Kd(t,e){const r=Ie(e,["children","$$slots","$$events","$$legacy"]);Je(t,Ye({name:"settings"},()=>r,{iconNode:[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}],["circle",{cx:"12",cy:"12",r:"3"}]],children:(s,i)=>{var a=ye(),o=V(a);je(o,e,"default",{}),x(s,a)},$$slots:{default:!0}}))}function Qd(t,e){const r=Ie(e,["children","$$slots","$$events","$$legacy"]);Je(t,Ye({name:"shield"},()=>r,{iconNode:[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"}]],children:(s,i)=>{var a=ye(),o=V(a);je(o,e,"default",{}),x(s,a)},$$slots:{default:!0}}))}function Uo(t,e){const r=Ie(e,["children","$$slots","$$events","$$legacy"]);Je(t,Ye({name:"user"},()=>r,{iconNode:[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}],["circle",{cx:"12",cy:"7",r:"4"}]],children:(s,i)=>{var a=ye(),o=V(a);je(o,e,"default",{}),x(s,a)},$$slots:{default:!0}}))}function Xd(t,e){const r=Ie(e,["children","$$slots","$$events","$$legacy"]);Je(t,Ye({name:"x"},()=>r,{iconNode:[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]],children:(s,i)=>{var a=ye(),o=V(a);je(o,e,"default",{}),x(s,a)},$$slots:{default:!0}}))}var Zd=P("<!> 앱 설치",1),eh=P("<!> 로그아웃",1),th=P("<!> 로그인",1),rh=P('<header class="bg-white border-b border-gray-200 py-3 mb-6"><div class="container-app flex justify-between items-center"><div class="logo cursor-pointer svelte-1wug9ul" tabindex="0" role="button"><h1 class="text-xl font-bold text-blue-600">PopItGo</h1></div> <div class="flex items-center gap-3"><!> <!></div></div></header>');function nh(t,e){lt(e,!1);let r=R(!1),n=R(null),s=R(!1);sr(()=>{window.addEventListener("beforeinstallprompt",y=>{y.preventDefault(),E(n,y)}),window.addEventListener("appinstalled",()=>{E(r,!0),E(n,null)}),window.matchMedia("(display-mode: standalone)").matches&&E(r,!0);const b=it.subscribe(y=>{var S;E(s,y.isLoggedIn),(S=y.user)!=null&&S.email,y.isLoading});return()=>{b()}});async function i(){if(!d(n))return;d(n).prompt();const{outcome:b}=await d(n).userChoice;E(n,null),b==="accepted"&&E(r,!0)}function a(){window.location.href="/"}function o(){window.location.href="/login"}function l(){it.logout(),window.location.href="/"}gt();var c=rh(),u=v(c),h=v(u),f=w(h,2),m=v(f);{var p=b=>{Re(b,{variant:"outline",size:"sm",onClick:i,children:(y,S)=>{var $=Zd(),O=V($);Wd(O,{size:16,class:"mr-1"}),x(y,$)},$$slots:{default:!0}})};N(m,b=>{!d(r)&&d(n)&&b(p)})}var _=w(m,2);{var g=b=>{Re(b,{variant:"outline",size:"sm",onClick:l,children:(y,S)=>{var $=eh(),O=V($);No(O,{size:16,class:"mr-1"}),x(y,$)},$$slots:{default:!0}})},k=b=>{Re(b,{variant:"outline",size:"sm",onClick:o,children:(y,S)=>{var $=th(),O=V($);Yd(O,{size:16,class:"mr-1"}),x(y,$)},$$slots:{default:!0}})};N(_,b=>{d(s)?b(g):b(k,!1)})}D("click",h,a),D("keydown",h,b=>b.key==="Enter"&&a()),x(t,c),ct()}const sh="PopItGo",ih="0.1.0.0";var ah=P('<footer class="mt-auto bg-neutral-800 text-white py-4"><div class="container-app text-center text-sm"><p></p></div></footer> <nav class="bottom-nav svelte-182kl9v"><button><!> <span class="svelte-182kl9v">홈</span></button> <button><!> <span class="svelte-182kl9v">이벤트</span></button> <button><!> <span class="svelte-182kl9v">예약</span></button> <button><!> <span class="svelte-182kl9v">설정</span></button></nav>',1);function oh(t,e){lt(e,!1);const[r,n]=Ur(),s=()=>Nr(a,"$activeTab",r),i=new Date().getFullYear(),a=_s("home");(B=>{if(B==="/")a.set("home");else if(B.startsWith("/events")){const T=new URLSearchParams(window.location.search);T.has("tab")&&T.get("tab")==="my-reservations"?a.set("bookings"):a.set("events")}else B.startsWith("/settings")&&a.set("settings")})(window.location.pathname);function l(B,T){a.set(T),window.location.href=B}gt();var c=ah(),u=V(c),h=v(u),f=v(h);f.textContent=`© ${i??""} ${sh} v${ih}`;var m=w(u,2),p=v(m);let _;var g=v(p);Gd(g,{size:24});var k=w(p,2);let b;var y=v(k);Do(y,{size:24});var S=w(k,2);let $;var O=v(S);Uo(O,{size:24});var U=w(S,2);let C;var K=v(U);Kd(K,{size:24}),z((B,T,H,A)=>{_=at(p,1,"svelte-182kl9v",null,_,B),b=at(k,1,"svelte-182kl9v",null,b,T),$=at(S,1,"svelte-182kl9v",null,$,H),C=at(U,1,"svelte-182kl9v",null,C,A)},[()=>({active:s()==="home"}),()=>({active:s()==="events"}),()=>({active:s()==="bookings"}),()=>({active:s()==="settings"})],ce),D("click",p,()=>l("/","home")),D("click",k,()=>l("/events","events")),D("click",S,()=>l("/events?tab=my-reservations","bookings")),D("click",U,()=>l("/settings","settings")),x(t,c),ct(),n()}const lh={events:[],isLoading:!1,error:null,filter:{}};function ch(){const{subscribe:t,set:e,update:r}=_s(lh),n=async()=>{var p;r(_=>({..._,isLoading:!0,error:null}));try{const{data:_,error:g}=await le.from("resv_events").select("*").order("reservation_start",{ascending:!0});if(g)throw g;if(!_||_.length===0){r(y=>({...y,events:[],isLoading:!1}));return}const k=_.map(y=>({id:y.id,title:y.title,description:y.description,organizer:y.organizer,category:y.category,reservationStart:y.reservation_start,reservationPlatform:y.reservation_platform,reservationLink:y.reservation_link,hasNotification:!1,createdAt:y.created_at,updatedAt:y.updated_at})),b=await le.auth.getUser();if((p=b.data)!=null&&p.user)try{const{data:y,error:S}=await le.from("resv_notifications").select("event_id").eq("user_id",b.data.user.id);if(!S&&y&&y.length>0){const $=new Set(y.map(O=>O.event_id));console.log("사용자의 알림이 설정된 이벤트 목록:",Array.from($)),k.forEach(O=>{O.hasNotification=$.has(O.id),O.hasNotification&&console.log(`이벤트 '${O.title}'에 알림이 설정됨`)})}else console.log("알림 정보가 없거나 가져오는 중 오류가 발생했습니다:",S)}catch(y){console.error("알림 정보 가져오기 오류:",y)}r(y=>({...y,events:k,isLoading:!1}))}catch(_){console.error("이벤트 목록 가져오기 오류:",_),r(g=>({...g,isLoading:!1,error:_ instanceof Error?_.message:"이벤트를 불러오는 중 오류가 발생했습니다"}))}},s=async p=>{r(_=>({..._,isLoading:!0,error:null}));try{const{data:_,error:g}=await le.from("resv_events").insert([{title:p.title,description:p.description,organizer:p.organizer,category:p.category,reservation_start:p.reservationStart,reservation_platform:p.reservationPlatform,reservation_link:p.reservationLink}]).select().single();if(g)throw g;const k={id:_.id,title:_.title,description:_.description,organizer:_.organizer,category:_.category,reservationStart:_.reservation_start,reservationPlatform:_.reservation_platform,reservationLink:_.reservation_link,hasNotification:!1,createdAt:_.created_at,updatedAt:_.updated_at};return r(b=>({...b,events:[...b.events,k],isLoading:!1})),k}catch(_){throw r(g=>({...g,isLoading:!1,error:_ instanceof Error?_.message:"이벤트를 추가하는 중 오류가 발생했습니다"})),_}},i=async(p,_)=>{r(g=>({...g,isLoading:!0,error:null}));try{const{data:g,error:k}=await le.from("resv_events").update({title:_.title,description:_.description,organizer:_.organizer,category:_.category,reservation_start:_.reservationStart,reservation_platform:_.reservationPlatform,reservation_link:_.reservationLink}).eq("id",p).select().single();if(k)throw k;const b=await c(p),y=(b==null?void 0:b.hasNotification)||!1,S={id:g.id,title:g.title,description:g.description,organizer:g.organizer,category:g.category,reservationStart:g.reservation_start,reservationPlatform:g.reservation_platform,reservationLink:g.reservation_link,hasNotification:y,createdAt:g.created_at,updatedAt:g.updated_at};return r($=>({...$,events:$.events.map(O=>O.id===p?S:O),isLoading:!1})),S}catch(g){throw r(k=>({...k,isLoading:!1,error:g instanceof Error?g.message:"이벤트를 수정하는 중 오류가 발생했습니다"})),g}},a=async p=>{r(_=>({..._,isLoading:!0,error:null}));try{const{error:_}=await le.from("resv_events").delete().eq("id",p);if(_)throw _;r(g=>({...g,events:g.events.filter(k=>k.id!==p),isLoading:!1}))}catch(_){throw r(g=>({...g,isLoading:!1,error:_ instanceof Error?_.message:"이벤트를 삭제하는 중 오류가 발생했습니다"})),_}},o=p=>{r(_=>({..._,filter:{..._.filter,...p}}))},l=async p=>{r(_=>({..._,isLoading:!0,error:null}));try{const g=(await new Promise(k=>{const b=t(y=>{k(y),b()})})).events.find(k=>k.id===p);if(!g)throw new Error("이벤트를 찾을 수 없습니다.");if(g.hasNotification){const{error:k}=await le.from("resv_notifications").delete().eq("event_id",p);if(k)throw k}else{const{error:k}=await le.from("resv_notifications").insert([{event_id:p,type:"reservation_start",minutes_before:30}]);if(k)throw k}r(k=>({...k,events:k.events.map(b=>b.id===p?{...b,hasNotification:!b.hasNotification}:b),isLoading:!1}))}catch(_){throw console.error("알림 설정 오류:",_),r(g=>({...g,isLoading:!1,error:_ instanceof Error?_.message:"알림 설정을 변경하는 데 실패했습니다."})),_}},c=async p=>{var _;try{const{data:g,error:k}=await le.from("resv_events").select("*, resv_notifications(id)").eq("id",p).single();if(k)throw k;if(!g)return null;const b={id:g.id,title:g.title,description:g.description,organizer:g.organizer,category:g.category,reservationStart:g.reservation_start,reservationPlatform:g.reservation_platform,reservationLink:g.reservation_link,hasNotification:g.notifications&&g.notifications.length>0,createdAt:g.created_at,updatedAt:g.updated_at},y=await le.auth.getUser();if((_=y.data)!=null&&_.user){const{data:S}=await le.from("resv_notifications").select("*").eq("event_id",p).eq("user_id",y.data.user.id).single();b.hasNotification=!!S}return b}catch(g){throw console.error("이벤트 상세 정보를 가져오는 중 오류 발생:",g),g}};return{subscribe:t,fetchEvents:n,addEvent:s,updateEvent:i,deleteEvent:a,setFilter:o,toggleNotification:l,getEventById:c,setNotification:async(p,_)=>{var g;try{const k=await le.auth.getUser();if(!((g=k.data)!=null&&g.user))throw new Error("로그인이 필요합니다.");const b={userId:k.data.user.id,eventId:p,type:"reservation_start",minutesBefore:_},{error:y}=await le.from("resv_notifications").upsert([Ds.toSupabase.notification(b)]);if(y)throw y}catch(k){throw console.error("알림 설정 중 오류 발생:",k),k}},removeNotification:async p=>{var _;try{const g=await le.auth.getUser();if(!((_=g.data)!=null&&_.user))throw new Error("로그인이 필요합니다.");const{error:k}=await le.from("resv_notifications").delete().eq("event_id",p).eq("user_id",g.data.user.id);if(k)throw k}catch(g){throw console.error("알림 해제 중 오류 발생:",g),g}},getNoteForEvent:async p=>{var _;try{const g=await le.auth.getUser();if(!((_=g.data)!=null&&_.user))throw new Error("로그인이 필요합니다.");const{data:k,error:b}=await le.from("resv_notes").select("*").eq("event_id",p).eq("user_id",g.data.user.id).single();if(b){if(b.code==="PGRST116")return null;throw b}const y=Ds.fromSupabase.note(k);return y.createdAt===null&&(y.createdAt=new Date),y.updatedAt===null&&(y.updatedAt=new Date),y}catch(g){return console.error("메모를 가져오는 중 오류 발생:",g),null}},saveNoteForEvent:async(p,_)=>{var g;try{const k=await le.auth.getUser();if(!((g=k.data)!=null&&g.user))throw new Error("로그인이 필요합니다.");const b={userId:k.data.user.id,eventId:p,content:_},{error:y}=await le.from("resv_notes").upsert([Ds.toSupabase.note(b)]);if(y)throw y}catch(k){throw console.error("메모 저장 중 오류 발생:",k),k}}}}const Ut=ch();var uh=P('<div role="button" tabindex="0"><!></div>'),dh=P("<div><!></div>");function mr(t,e){lt(e,!1);let r=te(e,"padding",8,"md"),n=te(e,"shadow",8,"md"),s=te(e,"border",8,!1),i=te(e,"rounded",8,"md"),a=te(e,"onClick",8,void 0),o=te(e,"hover",8,!1),l=te(e,"className",8,"");const c=()=>{const p="bg-white",_={none:"p-0",sm:"p-2",md:"p-4",lg:"p-6"},g={none:"",sm:"shadow-sm",md:"shadow-card",lg:"shadow-lg"},k=s()?"border border-neutral-200":"",b={none:"rounded-none",sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg",full:"rounded-full"},y=o()?"hover:shadow-lg transition-shadow cursor-pointer":"";return`${p} ${_[r()]} ${g[n()]} ${k} ${b[i()]} ${y} ${l()}`};gt();var u=ye(),h=V(u);{var f=p=>{var _=uh(),g=v(_);je(g,e,"default",{}),z(k=>at(_,1,k),[()=>is(c())],ce),D("click",_,function(...k){var b;(b=a())==null||b.apply(this,k)}),D("keydown",_,k=>k.key==="Enter"&&a()&&a()()),x(p,_)},m=p=>{var _=dh(),g=v(_);je(g,e,"default",{}),z(k=>at(_,1,k),[()=>is(c())],ce),x(p,_)};N(h,p=>{a()?p(f):p(m,!1)})}x(t,u),ct()}function hh(t){const e=t-1;return e*e*e+1}function _a(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}function fh(t,{delay:e=0,duration:r=400,easing:n=hh,x:s=0,y:i=0,opacity:a=0}={}){const o=getComputedStyle(t),l=+o.opacity,c=o.transform==="none"?"":o.transform,u=l*(1-a),[h,f]=_a(s),[m,p]=_a(i);return{delay:e,duration:r,easing:n,css:(_,g)=>`
			transform: ${c} translate(${(1-_)*h}${f}, ${(1-_)*m}${p});
			opacity: ${l-u*g}`}}function vh(t){const e=new Date(t),r=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return`${r}-${n}-${s}`}function gh(t){const e=new Date(t),r=String(e.getHours()).padStart(2,"0"),n=String(e.getMinutes()).padStart(2,"0");return`${r}:${n}`}function ph(t){const e=new Date(t);return`${vh(e)} ${gh(e)}`}function _h(t){const e=new Date,n=new Date(t).getTime()-e.getTime();if(n<0)return"이미 지났습니다";const s=Math.floor(n/1e3),i=Math.floor(s/60),a=Math.floor(i/60),o=Math.floor(a/24);return o>0?`${o}일 후`:a>0?`${a}시간 후`:i>0?`${i}분 후`:"곧 시작"}const zo=6048e5,mh=864e5,ma=Symbol.for("constructDateFrom");function yr(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&ma in t?t[ma](e):t instanceof Date?new t.constructor(e):new Date(e)}function Ft(t,e){return yr(e||t,t)}let wh={};function ws(){return wh}function Rn(t,e){var o,l,c,u;const r=ws(),n=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??r.weekStartsOn??((u=(c=r.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,s=Ft(t,e==null?void 0:e.in),i=s.getDay(),a=(i<n?7:0)+i-n;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function ls(t,e){return Rn(t,{...e,weekStartsOn:1})}function Fo(t,e){const r=Ft(t,e==null?void 0:e.in),n=r.getFullYear(),s=yr(r,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const i=ls(s),a=yr(r,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const o=ls(a);return r.getTime()>=i.getTime()?n+1:r.getTime()>=o.getTime()?n:n-1}function wa(t){const e=Ft(t),r=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return r.setUTCFullYear(e.getFullYear()),+t-+r}function yh(t,...e){const r=yr.bind(null,e.find(n=>typeof n=="object"));return e.map(r)}function ya(t,e){const r=Ft(t,e==null?void 0:e.in);return r.setHours(0,0,0,0),r}function bh(t,e,r){const[n,s]=yh(r==null?void 0:r.in,t,e),i=ya(n),a=ya(s),o=+i-wa(i),l=+a-wa(a);return Math.round((o-l)/mh)}function xh(t,e){const r=Fo(t,e),n=yr(t,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),ls(n)}function kh(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function $h(t){return!(!kh(t)&&typeof t!="number"||isNaN(+Ft(t)))}function Sh(t,e){const r=Ft(t,e==null?void 0:e.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Eh={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ph=(t,e,r)=>{let n;const s=Eh[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function rn(t){return(e={})=>{const r=e.width?String(e.width):t.defaultWidth;return t.formats[r]||t.formats[t.defaultWidth]}}const Th={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Oh={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ah={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ch={date:rn({formats:Th,defaultWidth:"full"}),time:rn({formats:Oh,defaultWidth:"full"}),dateTime:rn({formats:Ah,defaultWidth:"full"})},jh={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Lh=(t,e,r,n)=>jh[t];function Ht(t){return(e,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,o=r!=null&&r.width?String(r.width):a;s=t.formattingValues[o]||t.formattingValues[a]}else{const a=t.defaultWidth,o=r!=null&&r.width?String(r.width):t.defaultWidth;s=t.values[o]||t.values[a]}const i=t.argumentCallback?t.argumentCallback(e):e;return s[i]}}const Rh={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ih={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Dh={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Mh={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Nh={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Uh={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},zh=(t,e)=>{const r=Number(t),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Fh={ordinalNumber:zh,era:Ht({values:Rh,defaultWidth:"wide"}),quarter:Ht({values:Ih,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ht({values:Dh,defaultWidth:"wide"}),day:Ht({values:Mh,defaultWidth:"wide"}),dayPeriod:Ht({values:Nh,defaultWidth:"wide",formattingValues:Uh,defaultFormattingWidth:"wide"})};function Vt(t){return(e,r={})=>{const n=r.width,s=n&&t.matchPatterns[n]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],o=n&&t.parsePatterns[n]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(o)?Bh(o,h=>h.test(a)):qh(o,h=>h.test(a));let c;c=t.valueCallback?t.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c;const u=e.slice(a.length);return{value:c,rest:u}}}function qh(t,e){for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&e(t[r]))return r}function Bh(t,e){for(let r=0;r<t.length;r++)if(e(t[r]))return r}function qo(t){return(e,r={})=>{const n=e.match(t.matchPattern);if(!n)return null;const s=n[0],i=e.match(t.parsePattern);if(!i)return null;let a=t.valueCallback?t.valueCallback(i[0]):i[0];a=r.valueCallback?r.valueCallback(a):a;const o=e.slice(s.length);return{value:a,rest:o}}}const Wh=/^(\d+)(th|st|nd|rd)?/i,Hh=/\d+/i,Vh={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Gh={any:[/^b/i,/^(a|c)/i]},Yh={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Jh={any:[/1/i,/2/i,/3/i,/4/i]},Kh={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Qh={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Xh={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Zh={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ef={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},tf={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},rf={ordinalNumber:qo({matchPattern:Wh,parsePattern:Hh,valueCallback:t=>parseInt(t,10)}),era:Vt({matchPatterns:Vh,defaultMatchWidth:"wide",parsePatterns:Gh,defaultParseWidth:"any"}),quarter:Vt({matchPatterns:Yh,defaultMatchWidth:"wide",parsePatterns:Jh,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Vt({matchPatterns:Kh,defaultMatchWidth:"wide",parsePatterns:Qh,defaultParseWidth:"any"}),day:Vt({matchPatterns:Xh,defaultMatchWidth:"wide",parsePatterns:Zh,defaultParseWidth:"any"}),dayPeriod:Vt({matchPatterns:ef,defaultMatchWidth:"any",parsePatterns:tf,defaultParseWidth:"any"})},nf={code:"en-US",formatDistance:Ph,formatLong:Ch,formatRelative:Lh,localize:Fh,match:rf,options:{weekStartsOn:0,firstWeekContainsDate:1}};function sf(t,e){const r=Ft(t,e==null?void 0:e.in);return bh(r,Sh(r))+1}function af(t,e){const r=Ft(t,e==null?void 0:e.in),n=+ls(r)-+xh(r);return Math.round(n/zo)+1}function Bo(t,e){var u,h,f,m;const r=Ft(t,e==null?void 0:e.in),n=r.getFullYear(),s=ws(),i=(e==null?void 0:e.firstWeekContainsDate)??((h=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(f=s.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,a=yr((e==null?void 0:e.in)||t,0);a.setFullYear(n+1,0,i),a.setHours(0,0,0,0);const o=Rn(a,e),l=yr((e==null?void 0:e.in)||t,0);l.setFullYear(n,0,i),l.setHours(0,0,0,0);const c=Rn(l,e);return+r>=+o?n+1:+r>=+c?n:n-1}function of(t,e){var o,l,c,u;const r=ws(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(c=r.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,s=Bo(t,e),i=yr((e==null?void 0:e.in)||t,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),Rn(i,e)}function lf(t,e){const r=Ft(t,e==null?void 0:e.in),n=+Rn(r,e)-+of(r,e);return Math.round(n/zo)+1}function we(t,e){const r=t<0?"-":"",n=Math.abs(t).toString().padStart(e,"0");return r+n}const lr={y(t,e){const r=t.getFullYear(),n=r>0?r:1-r;return we(e==="yy"?n%100:n,e.length)},M(t,e){const r=t.getMonth();return e==="M"?String(r+1):we(r+1,2)},d(t,e){return we(t.getDate(),e.length)},a(t,e){const r=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(t,e){return we(t.getHours()%12||12,e.length)},H(t,e){return we(t.getHours(),e.length)},m(t,e){return we(t.getMinutes(),e.length)},s(t,e){return we(t.getSeconds(),e.length)},S(t,e){const r=e.length,n=t.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return we(s,e.length)}},Xr={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ba={G:function(t,e,r){const n=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(t,e,r){if(e==="yo"){const n=t.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return lr.y(t,e)},Y:function(t,e,r,n){const s=Bo(t,n),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return we(a,2)}return e==="Yo"?r.ordinalNumber(i,{unit:"year"}):we(i,e.length)},R:function(t,e){const r=Fo(t);return we(r,e.length)},u:function(t,e){const r=t.getFullYear();return we(r,e.length)},Q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return we(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(t,e,r){const n=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return we(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(t,e,r){const n=t.getMonth();switch(e){case"M":case"MM":return lr.M(t,e);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(t,e,r){const n=t.getMonth();switch(e){case"L":return String(n+1);case"LL":return we(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(t,e,r,n){const s=lf(t,n);return e==="wo"?r.ordinalNumber(s,{unit:"week"}):we(s,e.length)},I:function(t,e,r){const n=af(t);return e==="Io"?r.ordinalNumber(n,{unit:"week"}):we(n,e.length)},d:function(t,e,r){return e==="do"?r.ordinalNumber(t.getDate(),{unit:"date"}):lr.d(t,e)},D:function(t,e,r){const n=sf(t);return e==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):we(n,e.length)},E:function(t,e,r){const n=t.getDay();switch(e){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(t,e,r,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return we(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(t,e,r,n){const s=t.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return we(i,e.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(t,e,r){const n=t.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return we(s,e.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(t,e,r){const s=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(t,e,r){const n=t.getHours();let s;switch(n===12?s=Xr.noon:n===0?s=Xr.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(t,e,r){const n=t.getHours();let s;switch(n>=17?s=Xr.evening:n>=12?s=Xr.afternoon:n>=4?s=Xr.morning:s=Xr.night,e){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(t,e,r){if(e==="ho"){let n=t.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return lr.h(t,e)},H:function(t,e,r){return e==="Ho"?r.ordinalNumber(t.getHours(),{unit:"hour"}):lr.H(t,e)},K:function(t,e,r){const n=t.getHours()%12;return e==="Ko"?r.ordinalNumber(n,{unit:"hour"}):we(n,e.length)},k:function(t,e,r){let n=t.getHours();return n===0&&(n=24),e==="ko"?r.ordinalNumber(n,{unit:"hour"}):we(n,e.length)},m:function(t,e,r){return e==="mo"?r.ordinalNumber(t.getMinutes(),{unit:"minute"}):lr.m(t,e)},s:function(t,e,r){return e==="so"?r.ordinalNumber(t.getSeconds(),{unit:"second"}):lr.s(t,e)},S:function(t,e){return lr.S(t,e)},X:function(t,e,r){const n=t.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return ka(n);case"XXXX":case"XX":return Cr(n);case"XXXXX":case"XXX":default:return Cr(n,":")}},x:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"x":return ka(n);case"xxxx":case"xx":return Cr(n);case"xxxxx":case"xxx":default:return Cr(n,":")}},O:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+xa(n,":");case"OOOO":default:return"GMT"+Cr(n,":")}},z:function(t,e,r){const n=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+xa(n,":");case"zzzz":default:return"GMT"+Cr(n,":")}},t:function(t,e,r){const n=Math.trunc(+t/1e3);return we(n,e.length)},T:function(t,e,r){return we(+t,e.length)}};function xa(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=Math.trunc(n/60),i=n%60;return i===0?r+String(s):r+String(s)+e+we(i,2)}function ka(t,e){return t%60===0?(t>0?"-":"+")+we(Math.abs(t)/60,2):Cr(t,e)}function Cr(t,e=""){const r=t>0?"-":"+",n=Math.abs(t),s=we(Math.trunc(n/60),2),i=we(n%60,2);return r+s+e+i}const $a=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Wo=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},cf=(t,e)=>{const r=t.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return $a(t,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",$a(n,e)).replace("{{time}}",Wo(s,e))},uf={p:Wo,P:cf},df=/^D+$/,hf=/^Y+$/,ff=["D","DD","YY","YYYY"];function vf(t){return df.test(t)}function gf(t){return hf.test(t)}function pf(t,e,r){const n=_f(t,e,r);if(console.warn(n),ff.includes(t))throw new RangeError(n)}function _f(t,e,r){const n=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const mf=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,wf=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,yf=/^'([^]*?)'?$/,bf=/''/g,xf=/[a-zA-Z]/;function Ns(t,e,r){var u,h,f,m,p,_,g,k;const n=ws(),s=(r==null?void 0:r.locale)??n.locale??nf,i=(r==null?void 0:r.firstWeekContainsDate)??((h=(u=r==null?void 0:r.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((m=(f=n.locale)==null?void 0:f.options)==null?void 0:m.firstWeekContainsDate)??1,a=(r==null?void 0:r.weekStartsOn)??((_=(p=r==null?void 0:r.locale)==null?void 0:p.options)==null?void 0:_.weekStartsOn)??n.weekStartsOn??((k=(g=n.locale)==null?void 0:g.options)==null?void 0:k.weekStartsOn)??0,o=Ft(t,r==null?void 0:r.in);if(!$h(o))throw new RangeError("Invalid time value");let l=e.match(wf).map(b=>{const y=b[0];if(y==="p"||y==="P"){const S=uf[y];return S(b,s.formatLong)}return b}).join("").match(mf).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const y=b[0];if(y==="'")return{isToken:!1,value:kf(b)};if(ba[y])return{isToken:!0,value:b};if(y.match(xf))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:b}});s.localize.preprocessor&&(l=s.localize.preprocessor(o,l));const c={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return l.map(b=>{if(!b.isToken)return b.value;const y=b.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&gf(y)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&vf(y))&&pf(y,e,String(t));const S=ba[y[0]];return S(o,y,s.localize,c)}).join("")}function kf(t){const e=t.match(yf);return e?e[1].replace(bf,"'"):t}const $f={lessThanXSeconds:{one:"1초 미만",other:"{{count}}초 미만"},xSeconds:{one:"1초",other:"{{count}}초"},halfAMinute:"30초",lessThanXMinutes:{one:"1분 미만",other:"{{count}}분 미만"},xMinutes:{one:"1분",other:"{{count}}분"},aboutXHours:{one:"약 1시간",other:"약 {{count}}시간"},xHours:{one:"1시간",other:"{{count}}시간"},xDays:{one:"1일",other:"{{count}}일"},aboutXWeeks:{one:"약 1주",other:"약 {{count}}주"},xWeeks:{one:"1주",other:"{{count}}주"},aboutXMonths:{one:"약 1개월",other:"약 {{count}}개월"},xMonths:{one:"1개월",other:"{{count}}개월"},aboutXYears:{one:"약 1년",other:"약 {{count}}년"},xYears:{one:"1년",other:"{{count}}년"},overXYears:{one:"1년 이상",other:"{{count}}년 이상"},almostXYears:{one:"거의 1년",other:"거의 {{count}}년"}},Sf=(t,e,r)=>{let n;const s=$f[t];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?n+" 후":n+" 전":n},Ef={full:"y년 M월 d일 EEEE",long:"y년 M월 d일",medium:"y.MM.dd",short:"y.MM.dd"},Pf={full:"a H시 mm분 ss초 zzzz",long:"a H:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Tf={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},Of={date:rn({formats:Ef,defaultWidth:"full"}),time:rn({formats:Pf,defaultWidth:"full"}),dateTime:rn({formats:Tf,defaultWidth:"full"})},Af={lastWeek:"'지난' eeee p",yesterday:"'어제' p",today:"'오늘' p",tomorrow:"'내일' p",nextWeek:"'다음' eeee p",other:"P"},Cf=(t,e,r,n)=>Af[t],jf={narrow:["BC","AD"],abbreviated:["BC","AD"],wide:["기원전","서기"]},Lf={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1분기","2분기","3분기","4분기"]},Rf={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],wide:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]},If={narrow:["일","월","화","수","목","금","토"],short:["일","월","화","수","목","금","토"],abbreviated:["일","월","화","수","목","금","토"],wide:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"]},Df={narrow:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},abbreviated:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},wide:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"}},Mf={narrow:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},abbreviated:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},wide:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"}},Nf=(t,e)=>{const r=Number(t);switch(String(e==null?void 0:e.unit)){case"minute":case"second":return String(r);case"date":return r+"일";default:return r+"번째"}},Uf={ordinalNumber:Nf,era:Ht({values:jf,defaultWidth:"wide"}),quarter:Ht({values:Lf,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Ht({values:Rf,defaultWidth:"wide"}),day:Ht({values:If,defaultWidth:"wide"}),dayPeriod:Ht({values:Df,defaultWidth:"wide",formattingValues:Mf,defaultFormattingWidth:"wide"})},zf=/^(\d+)(일|번째)?/i,Ff=/\d+/i,qf={narrow:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(기원전|서기)/i},Bf={any:[/^(bc|기원전)/i,/^(ad|서기)/i]},Wf={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234]사?분기/i},Hf={any:[/1/i,/2/i,/3/i,/4/i]},Vf={narrow:/^(1[012]|[123456789])/,abbreviated:/^(1[012]|[123456789])월/i,wide:/^(1[012]|[123456789])월/i},Gf={any:[/^1월?$/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},Yf={narrow:/^[일월화수목금토]/,short:/^[일월화수목금토]/,abbreviated:/^[일월화수목금토]/,wide:/^[일월화수목금토]요일/},Jf={any:[/^일/,/^월/,/^화/,/^수/,/^목/,/^금/,/^토/]},Kf={any:/^(am|pm|오전|오후|자정|정오|아침|저녁|밤)/i},Qf={any:{am:/^(am|오전)/i,pm:/^(pm|오후)/i,midnight:/^자정/i,noon:/^정오/i,morning:/^아침/i,afternoon:/^오후/i,evening:/^저녁/i,night:/^밤/i}},Xf={ordinalNumber:qo({matchPattern:zf,parsePattern:Ff,valueCallback:t=>parseInt(t,10)}),era:Vt({matchPatterns:qf,defaultMatchWidth:"wide",parsePatterns:Bf,defaultParseWidth:"any"}),quarter:Vt({matchPatterns:Wf,defaultMatchWidth:"wide",parsePatterns:Hf,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Vt({matchPatterns:Vf,defaultMatchWidth:"wide",parsePatterns:Gf,defaultParseWidth:"any"}),day:Vt({matchPatterns:Yf,defaultMatchWidth:"wide",parsePatterns:Jf,defaultParseWidth:"any"}),dayPeriod:Vt({matchPatterns:Kf,defaultMatchWidth:"any",parsePatterns:Qf,defaultParseWidth:"any"})},Us={code:"ko",formatDistance:Sf,formatLong:Of,formatRelative:Cf,localize:Uf,match:Xf,options:{weekStartsOn:0,firstWeekContainsDate:1}};var Zf=P('<div class="brand-title svelte-ih9smi"><div class="title-with-brand svelte-ih9smi"><span class="brand-name svelte-ih9smi"> </span> <h2 class="svelte-ih9smi"> </h2></div></div>'),ev=P('<h2 class="svelte-ih9smi"> </h2>'),tv=P("<span> </span>"),rv=P('<img width="12" height="12" class="svelte-ih9smi">'),nv=P('<span class="platform-icon svelte-ih9smi"><!></span>'),sv=P('<span class="reservation-count svelte-ih9smi"> </span>'),iv=P('<p class="event-description svelte-ih9smi"> </p>'),av=P('<div class="reservation-seats svelte-ih9smi"> </div>'),ov=P('<div class="reservation-memo svelte-ih9smi"> </div>'),lv=P('<div class="reservation-item svelte-ih9smi"><div class="reservation-details svelte-ih9smi"><div class="reservation-time svelte-ih9smi"><!> <span> </span> <span class="visit-minutes svelte-ih9smi"> </span></div> <!> <!></div> <button class="delete-button svelte-ih9smi">삭제</button></div>'),cv=P('<button class="add-reservation-button svelte-ih9smi"><!> 예약 추가</button>'),uv=P('<div class="my-reservations svelte-ih9smi"><h3 class="section-title svelte-ih9smi"> </h3> <div class="reservations-list svelte-ih9smi"></div> <!></div>'),dv=P('<div class="reservation-form svelte-ih9smi"><h3 class="form-title svelte-ih9smi">새 예약 추가</h3> <div class="form-row svelte-ih9smi"><label for="visitTime" class="svelte-ih9smi">방문 예정 시간</label> <select id="visitTime" class="svelte-ih9smi"><option>이벤트 시작 시간</option><option>15분 전</option><option>30분 전</option><option>1시간 전</option><option>1시간 30분 전</option><option>2시간 전</option></select></div> <div class="form-row svelte-ih9smi"><label for="seats" class="svelte-ih9smi">좌석 정보 (선택)</label> <input type="text" id="seats" placeholder="예: A열 22번" class="svelte-ih9smi"></div> <div class="form-row svelte-ih9smi"><label for="memo" class="svelte-ih9smi">메모 (선택)</label> <textarea id="memo" placeholder="예약 관련 메모" class="svelte-ih9smi"></textarea></div> <div class="form-actions svelte-ih9smi"><button class="cancel-button svelte-ih9smi">취소</button> <button class="save-button svelte-ih9smi">예약 추가</button></div></div>'),hv=P("<!> 예약 추가하기",1),fv=P("<!> 알림 해제",1),vv=P("<!> 알림 설정",1),gv=P('<div class="action-buttons svelte-ih9smi"><!> <!></div>'),pv=P('<a target="_blank" rel="noopener noreferrer" class="booking-link svelte-ih9smi"><!> 예약 링크로 이동</a>'),_v=P('<div class="event-details svelte-ih9smi"><!> <div class="event-schedule svelte-ih9smi"><div class="schedule-item svelte-ih9smi"><!> <span class="schedule-text svelte-ih9smi"> </span></div> <div class="schedule-item svelte-ih9smi"><!> <span class="schedule-text svelte-ih9smi"> </span></div></div> <!> <!> <div class="event-actions svelte-ih9smi"><!> <div class="bottom-actions svelte-ih9smi"><!> <button class="detail-button svelte-ih9smi" aria-label="상세 페이지로 이동"><!> 상세 보기</button></div></div></div>'),mv=P('<div tabindex="0" role="button"><div class="event-header svelte-ih9smi"><div class="event-title-row svelte-ih9smi"><div class="title-container svelte-ih9smi"><!></div> <div class="expand-icon svelte-ih9smi"><!></div></div> <div class="event-meta svelte-ih9smi"><span> </span> <!> <div class="event-time svelte-ih9smi"><!> <span> </span></div> <!> <!></div></div> <!></div>');function Ho(t,e){lt(e,!1);const[r,n]=Ur(),s=()=>Nr(it,"$authStore",r),i=R(),a=R(),o=R(),l=R(),c=R(),u=R(),h=R(),f=R(),m=R();let p=te(e,"id",8),_=te(e,"title",8),g=te(e,"description",8,""),k=te(e,"reservationStart",8),b=te(e,"reservationPlatform",8,""),y=te(e,"reservationLink",8,""),S=te(e,"category",8,""),$=te(e,"organizer",8,""),O=te(e,"hasNotification",8,!1),U=te(e,"isMyReservation",8,!1),C=te(e,"onNotifyClick",8,void 0),K=te(e,"visitTime",8,30),B=te(e,"reservations",28,()=>[]);const T=vi();let H=R(!1),A=R(!1),L=R({visitTime:K(),seats:"",memo:""});const re=new Date,Y=new Date(k());function ue(j,I){if(!I||!j)return j;if(j.toLowerCase().includes(I.toLowerCase())&&I.length>=2){const Q=new RegExp(`${I}[\\s:-]*`,"i");return j.replace(Q,"").trim()}return j}function he(){return O()||U()||B().length>0?{text:"예약됨",class:"status-booked"}:d(o)?{text:"종료됨",class:"status-past"}:d(l)?{text:"진행중",class:"status-active"}:{text:"예약가능",class:"status-open"}}function _e(j,I){const Q=j.getMonth()+1,Oe=j.getDate(),Ze=j.getHours().toString().padStart(2,"0"),Ae=j.getMinutes().toString().padStart(2,"0");return I?`${Q}/${Oe} ${Ze}:${Ae}~`:`~${Q}/${Oe} ${Ze}:${Ae}`}function ze(j,I){const Q=new Date(j);return Q.setMinutes(Q.getMinutes()-I),Q}function Z(j,I){const Q=ze(j,I);return Ns(Q,"HH:mm",{locale:Us})}function fe(j){switch(j.toLowerCase()){case"콘서트":return"bg-pink-100 text-pink-800";case"전시회":return"bg-blue-100 text-blue-800";case"공연":return"bg-purple-100 text-purple-800";case"페스티벌":return"bg-yellow-100 text-yellow-800";case"스포츠":return"bg-green-100 text-green-800";case"굿즈":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}}function me(j){const I=j.toLowerCase();return I.includes("카카오")?"https://www.kakaocorp.com/page/favicon.ico":I.includes("네이버")?"https://ssl.pstatic.net/sstatic/search/favicon/favicon_32x32_240820.ico":I.includes("구글")?"https://www.google.co.kr/favicon.ico":I.includes("인터파크")?"https://tickets.interpark.com/favicon.ico":I.includes("예스24")?"https://image.yes24.com/sysimage/renew/gnb/favicon_n.ico":I.includes("멜론")?"https://www.melon.com/favicon.ico":I.includes("티켓링크")?"https://www.ticketlink.co.kr/favicon.ico":"🌐"}function De(){E(H,!d(H))}function ae(j){j.stopPropagation(),window.location.href=`/events/${p()}`}function Fe(j){j.stopPropagation(),E(A,!d(A))}function Te(j){if(j.stopPropagation(),!s().isLoggedIn){alert("예약을 추가하려면 로그인이 필요합니다.");return}const I={id:crypto.randomUUID(),eventId:p(),visitTime:d(L).visitTime,seats:d(L).seats||void 0,memo:d(L).memo||void 0,createdAt:new Date};B([...B(),I]),E(A,!1),E(L,{visitTime:K(),seats:"",memo:""}),T("reservationAdded",I)}function Ke(j,I){j.stopPropagation(),confirm("이 예약을 삭제하시겠습니까?")&&(B(B().filter(Q=>Q.id!==I)),T("reservationRemoved",I))}dt(()=>(dr(B()),dr(U())),()=>{E(i,B().length>0?`${B().length}개의 예약`:U()?"예약됨":"")}),dt(()=>{},()=>{E(a,Y>re)}),dt(()=>{},()=>{E(o,Y<re)}),dt(()=>{},()=>{E(l,!1)}),dt(()=>{},()=>{E(c,he())}),dt(()=>(dr(_()),dr($())),()=>{E(u,ue(_(),$()))}),dt(()=>d(a),()=>{E(h,_e(Y,d(a)))}),dt(()=>dr(S()),()=>{E(f,fe(S()))}),dt(()=>dr(b()),()=>{E(m,me(b()))}),ui(),gt();var qe=mv(),pt=v(qe),Me=v(pt),Ne=v(Me),Be=v(Ne);{var We=j=>{var I=Zf(),Q=v(I),Oe=v(Q),Ze=v(Oe),Ae=w(Oe,2),et=v(Ae);z(()=>{M(Ze,$()),M(et,d(u))}),x(j,I)},Qe=j=>{var I=ev(),Q=v(I);z(()=>M(Q,_())),x(j,I)};N(Be,j=>{$()?j(We):j(Qe,!1)})}var F=w(Ne,2),J=v(F);{var ve=j=>{Bd(j,{size:18})},Le=j=>{qd(j,{size:18})};N(J,j=>{d(H)?j(ve):j(Le,!1)})}var ne=w(Me,2),de=v(ne),be=v(de),He=w(de,2);{var Se=j=>{var I=tv(),Q=v(I);z(()=>{at(I,1,`category-badge ${d(f)??""}`,"svelte-ih9smi"),M(Q,S())}),x(j,I)};N(He,j=>{S()&&j(Se)})}var Ue=w(He,2),G=v(Ue);Ms(G,{size:12});var q=w(G,2),W=v(q),X=w(Ue,2);{var se=j=>{var I=nv(),Q=v(I);{var Oe=Ae=>{var et=rv();z(()=>{_r(et,"src",d(m)),_r(et,"alt",b())}),x(Ae,et)},Ze=(Ae,et)=>{{var Ot=_t=>{Vd(_t,{size:12})},Kt=_t=>{var oe=st();z(()=>M(oe,d(m))),x(_t,oe)};N(Ae,_t=>{d(m)==="🌐"?_t(Ot):_t(Kt,!1)},et)}};N(Q,Ae=>{d(m).startsWith("http")||d(m).startsWith("data:")?Ae(Oe):Ae(Ze,!1)})}x(j,I)};N(X,j=>{b()&&j(se)})}var ke=w(X,2);{var $e=j=>{var I=sv(),Q=v(I);z(()=>M(Q,d(i))),x(j,I)};N(ke,j=>{d(i)&&j($e)})}var Xe=w(pt,2);{var ot=j=>{var I=_v(),Q=v(I);{var Oe=Ce=>{var tt=iv(),mt=v(tt);z(()=>M(mt,g())),x(Ce,tt)};N(Q,Ce=>{g()&&Ce(Oe)})}var Ze=w(Q,2),Ae=v(Ze),et=v(Ae);Do(et,{size:16,class:"schedule-icon"});var Ot=w(et,2),Kt=v(Ot),_t=w(Ae,2),oe=v(_t);Ms(oe,{size:16,class:"schedule-icon"});var ge=w(oe,2),Ve=v(ge),xt=w(Ze,2);{var kr=Ce=>{var tt=uv(),mt=v(tt),ir=v(mt),ar=w(mt,2);Et(ar,5,B,ut=>ut.id,(ut,Ge)=>{var At=lv(),Dt=v(At),Er=v(Dt),Pr=v(Er);Ms(Pr,{size:14});var Fr=w(Pr,2),pn=v(Fr),Mt=w(Fr,2),Qt=v(Mt),Ct=w(Er,2);{var Qo=wt=>{var _n=av(),xs=v(_n);z(()=>M(xs,`좌석: ${d(Ge).seats??""}`)),x(wt,_n)};N(Ct,wt=>{d(Ge).seats&&wt(Qo)})}var Xo=w(Ct,2);{var Zo=wt=>{var _n=ov(),xs=v(_n);z(()=>M(xs,d(Ge).memo)),x(wt,_n)};N(Xo,wt=>{d(Ge).memo&&wt(Zo)})}var $i=w(Dt,2);z(wt=>{M(pn,`방문 예정: ${wt??""}`),M(Qt,`(${d(Ge).visitTime??""}분 전)`)},[()=>Z(Y,d(Ge).visitTime)],ce),D("click",$i,wt=>Ke(wt,d(Ge).id)),D("keydown",$i,wt=>wt.key==="Enter"&&Ke(wt,d(Ge).id)),x(ut,At)});var Sr=w(ar,2);{var kt=ut=>{var Ge=cv(),At=v(Ge);pa(At,{size:14}),D("click",Ge,Fe),D("keydown",Ge,Dt=>Dt.key==="Enter"&&Fe(Dt)),x(ut,Ge)};N(Sr,ut=>{d(A)||ut(kt)})}z(()=>M(ir,`나의 예약 (${B().length??""}개)`)),x(Ce,tt)};N(xt,Ce=>{B().length>0&&Ce(kr)})}var $r=w(xt,2);{var ys=Ce=>{var tt=dv(),mt=w(v(tt),2),ir=w(v(mt),2);z(()=>{d(L),Ir(()=>{})});var ar=v(ir);ar.value=ar.__value=0;var Sr=w(ar);Sr.value=Sr.__value=15;var kt=w(Sr);kt.value=kt.__value=30;var ut=w(kt);ut.value=ut.__value=60;var Ge=w(ut);Ge.value=Ge.__value=90;var At=w(Ge);At.value=At.__value=120;var Dt=w(mt,2),Er=w(v(Dt),2),Pr=w(Dt,2),Fr=w(v(Pr),2),pn=w(Pr,2),Mt=v(pn),Qt=w(Mt,2);Dr(ir,()=>d(L).visitTime,Ct=>$s(L,d(L).visitTime=Ct)),Wt(Er,()=>d(L).seats,Ct=>$s(L,d(L).seats=Ct)),Wt(Fr,()=>d(L).memo,Ct=>$s(L,d(L).memo=Ct)),D("click",Mt,Fe),D("click",Qt,Te),x(Ce,tt)};N($r,Ce=>{d(A)&&Ce(ys)})}var Vo=w($r,2),xi=v(Vo);{var Go=Ce=>{var tt=gv(),mt=v(tt);{var ir=kt=>{Re(kt,{variant:"primary",className:"action-button",onClick:()=>Fe(new Event("click")),fullWidth:!1,children:(ut,Ge)=>{var At=hv(),Dt=V(At);pa(Dt,{size:14}),x(ut,At)},$$slots:{default:!0}})};N(mt,kt=>{U()||kt(ir)})}var ar=w(mt,2);{var Sr=kt=>{const ut=ce(()=>O()?"primary":"outline"),Ge=ce(()=>O()?"active-notify":"");Re(kt,{get variant(){return d(ut)},get className(){return`action-button ${d(Ge)??""}`},onClick:()=>{if(!s().isLoggedIn){alert("알림 설정을 위해서는 로그인이 필요합니다.");return}C()()},fullWidth:!1,children:(At,Dt)=>{var Er=ye(),Pr=V(Er);{var Fr=Mt=>{var Qt=fv(),Ct=V(Qt);Io(Ct,{size:16}),x(Mt,Qt)},pn=Mt=>{var Qt=vv(),Ct=V(Qt);yi(Ct,{size:16}),x(Mt,Qt)};N(Pr,Mt=>{O()?Mt(Fr):Mt(pn,!1)})}x(At,Er)},$$slots:{default:!0}})};N(ar,kt=>{C()&&kt(Sr)})}x(Ce,tt)};N(xi,Ce=>{d(a)&&B().length===0&&!d(A)&&Ce(Go)})}var Yo=w(xi,2),ki=v(Yo);{var Jo=Ce=>{var tt=pv(),mt=v(tt);Mo(mt,{size:16}),z(()=>_r(tt,"href",y())),D("click",tt,jn(function(ir){fo.call(this,e,ir)})),x(Ce,tt)};N(ki,Ce=>{y()&&Ce(Jo)})}var bs=w(ki,2),Ko=v(bs);bi(Ko,{size:16}),z((Ce,tt,mt)=>{M(Kt,Ce),M(Ve,`${tt??""} (${mt??""})`)},[()=>Ns(Y,"yyyy년 MM월 dd일",{locale:Us}),()=>Ns(Y,"HH:mm",{locale:Us}),()=>_h(k())],ce),D("click",bs,ae),D("keydown",bs,Ce=>Ce.key==="Enter"&&ae(Ce)),kc(3,I,()=>fh,()=>({y:-20,duration:200})),x(j,I)};N(Xe,j=>{d(H)&&j(ot)})}z(()=>{at(qe,1,`event-card ${U()||B().length>0?"booked":""} ${d(o)?"past":""}`,"svelte-ih9smi"),_r(qe,"aria-expanded",d(H)),at(de,1,`status-tag ${d(c).class??""}`,"svelte-ih9smi"),M(be,d(c).text),M(W,d(h))}),D("click",qe,De),D("keydown",qe,j=>j.key==="Enter"&&De()),x(t,qe),ct(),n()}var wv=P('<div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4"> </div>'),yv=P("<option> </option>"),bv=P("<option> </option>"),xv=P('<form class="space-y-6"><h2 class="text-xl font-bold text-neutral-800"> </h2> <!> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="md:col-span-2"><label for="title" class="block text-sm font-medium text-neutral-700 mb-1">이벤트 제목 *</label> <input id="title" type="text" placeholder="이벤트 제목을 입력하세요" required class="w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[--primary]"></div> <div class="md:col-span-2"><label for="description" class="block text-sm font-medium text-neutral-700 mb-1">이벤트 설명</label> <textarea id="description" placeholder="이벤트에 대한 설명을 입력하세요" rows="3" class="w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[--primary]"></textarea></div> <div><label for="organizer" class="block text-sm font-medium text-neutral-700 mb-1">주최자</label> <input id="organizer" type="text" placeholder="주최자 이름" class="w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[--primary]"></div> <div><label for="category" class="block text-sm font-medium text-neutral-700 mb-1">카테고리</label> <select id="category" class="w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[--primary]"><option disabled>카테고리 선택</option><!></select></div> <div><label for="reservationStart" class="block text-sm font-medium text-neutral-700 mb-1">예약 시작 시간 *</label> <input id="reservationStart" type="datetime-local" required class="w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[--primary]"></div> <div><label for="reservationPlatform" class="block text-sm font-medium text-neutral-700 mb-1">예약 플랫폼</label> <select id="reservationPlatform" class="w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[--primary]"><option disabled>플랫폼 선택</option><!></select></div> <div class="md:col-span-2"><label for="reservationLink" class="block text-sm font-medium text-neutral-700 mb-1">예약 링크</label> <input id="reservationLink" type="url" placeholder="https://example.com/reservation" class="w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[--primary]"></div></div> <div class="flex space-x-4 justify-end"><!> <!></div></form>');function kv(t,e){lt(e,!1);const r=vi();let n=te(e,"event",28,()=>({title:"",description:"",organizer:"",category:"",reservationStart:"",reservationPlatform:"",reservationLink:""})),s=te(e,"isSubmitting",8,!1),i=te(e,"error",12,null);const a=["콘서트","전시회","공연","페스티벌","스포츠","굿즈","기타"],o=["인터파크","티켓링크","예스24","멜론티켓","네이버예약","카카오톡","기타"];function l(){if(!n().title){i("이벤트 제목을 입력해주세요.");return}if(!n().reservationStart){i("예약 시작 시간을 설정해주세요.");return}r("submit",n())}function c(){r("cancel")}dt(()=>dr(n()),()=>{n().reservationStart&&typeof n().reservationStart=="string"&&!n().reservationStart.includes("T")&&n(n().reservationStart=new Date(n().reservationStart).toISOString(),!0)}),ui(),gt();var u=xv(),h=v(u),f=v(h),m=w(h,2);{var p=Z=>{var fe=wv(),me=v(fe);z(()=>M(me,i())),x(Z,fe)};N(m,Z=>{i()&&Z(p)})}var _=w(m,2),g=v(_),k=w(v(g),2),b=w(g,2),y=w(v(b),2),S=w(b,2),$=w(v(S),2),O=w(S,2),U=w(v(O),2);z(()=>{n(),Ir(()=>{})});var C=v(U);C.value=C.__value="";var K=w(C);Et(K,1,()=>a,Gt,(Z,fe)=>{var me=yv(),De={},ae=v(me);z(()=>{De!==(De=d(fe))&&(me.value=(me.__value=d(fe))??""),M(ae,d(fe))}),x(Z,me)});var B=w(O,2),T=w(v(B),2),H=w(B,2),A=w(v(H),2);z(()=>{n(),Ir(()=>{})});var L=v(A);L.value=L.__value="";var re=w(L);Et(re,1,()=>o,Gt,(Z,fe)=>{var me=bv(),De={},ae=v(me);z(()=>{De!==(De=d(fe))&&(me.value=(me.__value=d(fe))??""),M(ae,d(fe))}),x(Z,me)});var Y=w(H,2),ue=w(v(Y),2),he=w(_,2),_e=v(he);Re(_e,{variant:"outline",onClick:c,get disabled(){return s()},children:(Z,fe)=>{var me=st("취소");x(Z,me)},$$slots:{default:!0}});var ze=w(_e,2);Re(ze,{type:"submit",variant:"primary",get disabled(){return s()},children:(Z,fe)=>{var me=st();z(()=>M(me,s()?"처리 중...":n().id?"수정하기":"추가하기")),x(Z,me)},$$slots:{default:!0}}),z(()=>M(f,n().id?"이벤트 수정":"새 이벤트 추가")),Wt(k,()=>n().title,Z=>n(n().title=Z,!0)),Wt(y,()=>n().description,Z=>n(n().description=Z,!0)),Wt($,()=>n().organizer,Z=>n(n().organizer=Z,!0)),Dr(U,()=>n().category,Z=>n(n().category=Z,!0)),Wt(T,()=>n().reservationStart,Z=>n(n().reservationStart=Z,!0)),Dr(A,()=>n().reservationPlatform,Z=>n(n().reservationPlatform=Z,!0)),Wt(ue,()=>n().reservationLink,Z=>n(n().reservationLink=Z,!0)),D("submit",u,Or(l)),x(t,u),ct()}var $v=P('<button class="absolute top-4 right-4 text-neutral-400 hover:text-neutral-600" aria-label="닫기"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button> <!>',1),Sv=P('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" tabindex="0" role="button" aria-label="모달 닫기"><div class="w-full max-w-2xl" tabindex="0" role="dialog" aria-modal="true"><!></div></div>');function Ev(t,e){lt(e,!1);let r=te(e,"isOpen",8,!1),n=te(e,"event",28,()=>({title:"",description:"",organizer:"",category:"",reservationStart:"",reservationPlatform:"",reservationLink:""})),s=te(e,"isSubmitting",12,!1),i=te(e,"error",12,null);const a=vi();function o(){a("close")}function l(p){a("submit",p.detail)}function c(){o()}function u(p){p.key==="Escape"&&r()&&o()}gt();var h=ye();D("keydown",Bs,u);var f=V(h);{var m=p=>{var _=Sv(),g=v(_),k=v(g);mr(k,{padding:"lg",shadow:"lg",className:"max-h-[90vh] overflow-y-auto",children:(b,y)=>{var S=$v(),$=V(S),O=w($,2);kv(O,{get event(){return n()},set event(U){n(U)},get isSubmitting(){return s()},set isSubmitting(U){s(U)},get error(){return i()},set error(U){i(U)},$$events:{submit:l,cancel:c},$$legacy:!0}),D("click",$,o),x(b,S)},$$slots:{default:!0}}),D("click",g,jn(()=>{})),D("keydown",g,jn(()=>{})),D("click",_,o),D("keydown",_,b=>b.key==="Enter"&&o()),x(p,_)};N(f,p=>{r()&&p(m)})}x(t,h),ct()}var Pv=P("<option> </option>"),Tv=P('<div class="filter-panel svelte-1wn1d4a"><div class="filter-group"><label for="search" class="block text-sm font-medium mb-1">검색</label> <input id="search" type="text" placeholder="이벤트 제목이나 내용 검색..." class="w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[--primary]"></div> <div class="filter-group"><label for="category" class="block text-sm font-medium mb-1">카테고리</label> <select id="category" class="w-full p-2 border border-neutral-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[--primary]"></select></div></div>'),Ov=P('<div class="loading-state svelte-1wn1d4a"><p>이벤트를 불러오는 중...</p></div>'),Av=P('<div class="error-state svelte-1wn1d4a"><p> </p> <button class="svelte-1wn1d4a">다시 시도</button></div>'),Cv=P("<p>예약된 이벤트가 없습니다</p>"),jv=P('<p>표시할 이벤트가 없습니다</p> <button class="svelte-1wn1d4a">필터 조정하기</button>',1),Lv=P('<div class="empty-state svelte-1wn1d4a"><!></div>'),Rv=P('<div class="app-container svelte-1wn1d4a"><main class="main-content svelte-1wn1d4a"><div class="events-tab svelte-1wn1d4a"><div class="header svelte-1wn1d4a"><div class="flex justify-between items-center mb-4"><h1 class="text-2xl font-semibold mb-2 svelte-1wn1d4a"> </h1> <div class="flex gap-2"><!></div></div> <div class="header-actions svelte-1wn1d4a"><button class="filter-button svelte-1wn1d4a"><!></button></div></div> <!> <div class="event-list svelte-1wn1d4a"><!></div></div></main> <!></div>');function Iv(t,e){lt(e,!1);const[r,n]=Ur(),s=()=>Nr(it,"$authStore",r),i=R(),a=R(),o=R(),l=R(),c=R();let u=R([]),h=R(!0),f=R(null),m=R(""),p=R(""),_=R(!1),g=R([]),k=R(!1),b=R({}),y=R(!1),S=R(null),$=R("all");function O(){return new URLSearchParams(window.location.search).get("tab")==="my-reservations"?"my-reservations":"all"}function U(){E($,O())}sr(()=>{U(),C();const F=Ut.subscribe(ve=>{E(u,ve.events),E(h,ve.isLoading),E(f,ve.error)}),J=()=>{U()};return window.addEventListener("popstate",J),()=>{F(),window.removeEventListener("popstate",J)}});async function C(){await Ut.fetchEvents()}function K(){E(b,{title:"",description:"",organizer:"",category:"",reservationStart:"",reservationPlatform:"",reservationLink:""}),E(k,!0)}async function B(F){try{E(y,!0),E(S,null);const J=F.detail;await Ut.addEvent({title:J.title,description:J.description,organizer:J.organizer,category:J.category,reservationStart:J.reservationStart,reservationPlatform:J.reservationPlatform,reservationLink:J.reservationLink}),E(k,!1)}catch(J){console.error("이벤트 추가 중 오류 발생:",J),J instanceof Error?E(S,J.message):E(S,"이벤트를 추가하는 중 오류가 발생했습니다.")}finally{E(y,!1)}}function T(F){d(g).includes(F)?E(g,d(g).filter(J=>J!==F)):E(g,[...d(g),F])}function H(){E(_,!d(_))}const A=[{value:"",label:"모든 카테고리"},{value:"콘서트",label:"콘서트"},{value:"전시회",label:"전시회"},{value:"공연",label:"공연"},{value:"페스티벌",label:"페스티벌"},{value:"스포츠",label:"스포츠"},{value:"굿즈",label:"굿즈"},{value:"기타",label:"기타"}];dt(()=>(d(u),d(m),d(p)),()=>{E(i,d(u).filter(F=>{let J=!0,ve=!0;if(d(m)){const Le=d(m).toLowerCase();J=!!(F.title.toLowerCase().includes(Le)||F.description&&F.description.toLowerCase().includes(Le)||F.organizer&&F.organizer.toLowerCase().includes(Le))}return ve=!d(p)||F.category===d(p),J&&ve}))}),dt(()=>d(i),()=>{E(a,d(i).filter(F=>new Date(F.reservationStart)>new Date))}),dt(()=>d(i),()=>{E(o,d(i).filter(F=>F.hasNotification))}),dt(()=>(d($),d(o),d(a)),()=>{E(l,d($)==="my-reservations"?d(o):d(a))}),dt(()=>d($),()=>{E(c,d($)==="my-reservations"?"나의 예약":"이벤트")}),ui(),gt();var L=Rv(),re=v(L),Y=v(re),ue=v(Y),he=v(ue),_e=v(he),ze=v(_e),Z=w(_e,2),fe=v(Z);{var me=F=>{Re(F,{variant:"primary",onClick:K,children:(J,ve)=>{var Le=st("이벤트 추가");x(J,Le)},$$slots:{default:!0}})},De=F=>{};N(fe,F=>{s().isLoggedIn?F(me):F(De,!1)})}var ae=w(he,2),Fe=v(ae),Te=v(Fe);Hd(Te,{size:20});var Ke=w(ue,2);{var qe=F=>{var J=Tv(),ve=v(J),Le=w(v(ve),2),ne=w(ve,2),de=w(v(ne),2);z(()=>{d(p),Ir(()=>{})}),Et(de,5,()=>A,Gt,(be,He)=>{var Se=Pv(),Ue={},G=v(Se);z(()=>{Ue!==(Ue=d(He).value)&&(Se.value=(Se.__value=d(He).value)??""),M(G,d(He).label)}),x(be,Se)}),Wt(Le,()=>d(m),be=>E(m,be)),Dr(de,()=>d(p),be=>E(p,be)),x(F,J)};N(Ke,F=>{d(_)&&F(qe)})}var pt=w(Ke,2),Me=v(pt);{var Ne=F=>{var J=Ov();x(F,J)},Be=(F,J)=>{{var ve=ne=>{var de=Av(),be=v(de),He=v(be),Se=w(be,2);z(()=>M(He,`오류가 발생했습니다: ${d(f)??""}`)),D("click",Se,C),x(ne,de)},Le=(ne,de)=>{{var be=Se=>{var Ue=Lv(),G=v(Ue);{var q=X=>{var se=Cv();x(X,se)},W=X=>{var se=jv(),ke=w(V(se),2);D("click",ke,H),x(X,se)};N(G,X=>{d($)==="my-reservations"?X(q):X(W,!1)})}x(Se,Ue)},He=Se=>{var Ue=ye(),G=V(Ue);Et(G,1,()=>d(l),q=>q.id,(q,W)=>{const X=ce(()=>d(W).description||""),se=ce(()=>d(W).reservationPlatform||""),ke=ce(()=>d(W).reservationLink||""),$e=ce(()=>d(W).category||""),Xe=ce(()=>d(W).organizer||""),ot=ce(()=>!!d(W).hasNotification),j=ce(()=>d($)==="my-reservations"||d(W).hasNotification||d(g).includes(d(W).id));Ho(q,{get id(){return d(W).id},get title(){return d(W).title},get description(){return d(X)},get reservationStart(){return d(W).reservationStart},get reservationPlatform(){return d(se)},get reservationLink(){return d(ke)},get category(){return d($e)},get organizer(){return d(Xe)},get hasNotification(){return d(ot)},get isMyReservation(){return d(j)},onNotifyClick:()=>T(d(W).id),$$events:{select:I=>T(I.detail)}})}),x(Se,Ue)};N(ne,Se=>{d(l).length===0?Se(be):Se(He,!1)},de)}};N(F,ne=>{d(f)?ne(ve):ne(Le,!1)},J)}};N(Me,F=>{d(h)?F(Ne):F(Be,!1)})}var We=w(re,2);{var Qe=F=>{Ev(F,{isOpen:!0,get event(){return d(b)},get isSubmitting(){return d(y)},get error(){return d(S)},$$events:{close:()=>E(k,!1),submit:B}})};N(We,F=>{d(k)&&F(Qe)})}z(()=>M(ze,d(c))),D("click",Fe,H),x(t,L),ct(),n()}var Dv=P('<div class="loading svelte-z7g6jo">이벤트 정보를 불러오는 중...</div>'),Mv=P('<div class="error svelte-z7g6jo"><p> </p> <!></div>'),Nv=P("<!> 알림 해제",1),Uv=P("<!> 알림 설정",1),zv=P('<div class="login-prompt svelte-z7g6jo"><p class="mb-2 text-sm text-gray-600">알림 설정을 위해 로그인하세요</p> <!></div>'),Fv=P('<div class="info-item svelte-z7g6jo"><div class="label svelte-z7g6jo">주최:</div> <div class="value svelte-z7g6jo"> </div></div>'),qv=P('<div class="info-item svelte-z7g6jo"><div class="label svelte-z7g6jo">카테고리:</div> <div class="value svelte-z7g6jo"><span class="category-badge svelte-z7g6jo"> </span></div></div>'),Bv=P('<div class="info-item svelte-z7g6jo"><div class="label svelte-z7g6jo">예약 플랫폼:</div> <div class="value svelte-z7g6jo"> </div></div>'),Wv=P('<div class="info-item svelte-z7g6jo"><div class="label svelte-z7g6jo">예약 링크:</div> <div class="value link svelte-z7g6jo"><a target="_blank" rel="noopener noreferrer" class="svelte-z7g6jo"> <!></a></div></div>'),Hv=P('<div class="event-description svelte-z7g6jo"><h2 class="svelte-z7g6jo">상세 설명</h2> <p> </p></div>'),Vv=P("<p>메모를 불러오는 중...</p>"),Gv=P('<p class="error-text svelte-z7g6jo"> </p>'),Yv=P('<div class="note-editor svelte-z7g6jo"><textarea placeholder="이 이벤트에 대한 메모를 입력하세요" rows="4" class="svelte-z7g6jo"></textarea> <!></div>'),Jv=P('<div class="login-prompt svelte-z7g6jo"><p>메모 기능을 사용하려면 로그인이 필요합니다.</p> <!></div>'),Kv=P('<div class="event-header svelte-z7g6jo"><h1 class="svelte-z7g6jo"> </h1> <div class="header-actions svelte-z7g6jo"><!></div></div> <div class="event-info svelte-z7g6jo"><div class="info-item svelte-z7g6jo"><div class="label svelte-z7g6jo">예약 시작:</div> <div class="value svelte-z7g6jo"> </div></div> <!> <!> <!> <!></div> <!> <div class="event-notes svelte-z7g6jo"><h2 class="svelte-z7g6jo">나의 메모</h2> <!></div> <!>',1),Qv=P('<div class="not-found svelte-z7g6jo"><p>이벤트를 찾을 수 없습니다.</p> <!></div>'),Xv=P('<div class="mb-4"><button class="flex items-center text-neutral-700 hover:text-primary transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path></svg> 돌아가기</button></div> <div class="event-detail svelte-z7g6jo"><!></div>',1);function Zv(t,e){lt(e,!1);const[r,n]=Ur(),s=()=>Nr(it,"$authStore",r);let i="",a=R(null),o=R(!0),l=R(null),c=R(""),u=R(!1),h=R(!1),f=R(null),m="30";sr(async()=>{const T=window.location.pathname.split("/");i=T[T.length-1],i&&await g()});function p(){window.location.href="/login"}function _(){window.location.href="/events"}async function g(){E(o,!0),E(l,null);try{if(E(a,await Ut.getEventById(i)),s().isLoggedIn&&d(a)){E(h,!0);try{const T=await Ut.getNoteForEvent(i);T&&E(c,T.content)}catch(T){console.error("메모를 불러오는 중 오류 발생:",T),E(f,"메모를 불러올 수 없습니다.")}finally{E(h,!1)}}}catch(T){console.error("이벤트 상세 정보를 불러오는 중 오류 발생:",T),E(l,"이벤트 정보를 불러올 수 없습니다. 나중에 다시 시도해주세요.")}finally{E(o,!1)}}async function k(){if(!s().isLoggedIn){alert("알림을 설정하려면 로그인이 필요합니다.");return}if(d(a))try{d(a).hasNotification?await Ut.removeNotification(i):await Ut.setNotification(i,parseInt(m)),E(a,await Ut.getEventById(i))}catch(T){console.error("알림 설정 중 오류 발생:",T),alert("알림 설정을 변경하는 중 오류가 발생했습니다.")}finally{}}async function b(){if(!s().isLoggedIn){alert("메모를 저장하려면 로그인이 필요합니다.");return}if(d(a)){E(u,!0);try{await Ut.saveNoteForEvent(i,d(c)),alert("메모가 저장되었습니다.")}catch(T){console.error("메모 저장 중 오류 발생:",T),alert("메모를 저장하는 중 오류가 발생했습니다.")}finally{E(u,!1)}}}function y(){window.history.back()}gt();var S=Xv(),$=V(S),O=v($),U=w($,2),C=v(U);{var K=T=>{var H=Dv();x(T,H)},B=(T,H)=>{{var A=re=>{var Y=Mv(),ue=v(Y),he=v(ue),_e=w(ue,2);Re(_e,{variant:"outline",onClick:()=>g(),children:(ze,Z)=>{var fe=st("다시 시도");x(ze,fe)},$$slots:{default:!0}}),z(()=>M(he,`오류가 발생했습니다: ${d(l)??""}`)),x(re,Y)},L=(re,Y)=>{{var ue=_e=>{var ze=Kv(),Z=V(ze),fe=v(Z),me=v(fe),De=w(fe,2),ae=v(De);{var Fe=q=>{const W=ce(()=>d(a).hasNotification?"primary":"outline");Re(q,{get variant(){return d(W)},onClick:k,className:"notification-button",children:(X,se)=>{var ke=ye(),$e=V(ke);{var Xe=j=>{var I=Nv(),Q=V(I);yi(Q,{size:18}),x(j,I)},ot=j=>{var I=Uv(),Q=V(I);Io(Q,{size:18}),x(j,I)};N($e,j=>{d(a).hasNotification?j(Xe):j(ot,!1)})}x(X,ke)},$$slots:{default:!0}})},Te=q=>{var W=zv(),X=w(v(W),2);Re(X,{variant:"outline",onClick:p,children:(se,ke)=>{var $e=st("로그인");x(se,$e)},$$slots:{default:!0}}),x(q,W)};N(ae,q=>{s().isLoggedIn?q(Fe):q(Te,!1)})}var Ke=w(Z,2),qe=v(Ke),pt=w(v(qe),2),Me=v(pt),Ne=w(qe,2);{var Be=q=>{var W=Fv(),X=w(v(W),2),se=v(X);z(()=>M(se,d(a).organizer)),x(q,W)};N(Ne,q=>{d(a).organizer&&q(Be)})}var We=w(Ne,2);{var Qe=q=>{var W=qv(),X=w(v(W),2),se=v(X),ke=v(se);z(()=>M(ke,d(a).category)),x(q,W)};N(We,q=>{d(a).category&&q(Qe)})}var F=w(We,2);{var J=q=>{var W=Bv(),X=w(v(W),2),se=v(X);z(()=>M(se,d(a).reservationPlatform)),x(q,W)};N(F,q=>{d(a).reservationPlatform&&q(J)})}var ve=w(F,2);{var Le=q=>{var W=Wv(),X=w(v(W),2),se=v(X),ke=v(se),$e=w(ke);Mo($e,{size:14}),z(()=>{_r(se,"href",d(a).reservationLink),M(ke,`${d(a).reservationLink??""} `)}),x(q,W)};N(ve,q=>{d(a).reservationLink&&q(Le)})}var ne=w(Ke,2);{var de=q=>{var W=Hv(),X=w(v(W),2),se=v(X);z(()=>M(se,d(a).description)),x(q,W)};N(ne,q=>{d(a).description&&q(de)})}var be=w(ne,2),He=w(v(be),2);{var Se=q=>{var W=ye(),X=V(W);{var se=$e=>{var Xe=Vv();x($e,Xe)},ke=($e,Xe)=>{{var ot=I=>{var Q=Gv(),Oe=v(Q);z(()=>M(Oe,`메모를 불러오는 중 오류가 발생했습니다: ${d(f)??""}`)),x(I,Q)},j=I=>{var Q=Yv(),Oe=v(Q),Ze=w(Oe,2);Re(Ze,{variant:"outline",onClick:b,get disabled(){return d(u)},children:(Ae,et)=>{var Ot=st();z(()=>M(Ot,d(u)?"저장 중...":"메모 저장")),x(Ae,Ot)},$$slots:{default:!0}}),Wt(Oe,()=>d(c),Ae=>E(c,Ae)),x(I,Q)};N($e,I=>{d(f)?I(ot):I(j,!1)},Xe)}};N(X,$e=>{d(h)?$e(se):$e(ke,!1)})}x(q,W)},Ue=q=>{var W=Jv(),X=w(v(W),2);Re(X,{variant:"outline",onClick:p,children:(se,ke)=>{var $e=st("로그인");x(se,$e)},$$slots:{default:!0}}),x(q,W)};N(He,q=>{s().isLoggedIn?q(Se):q(Ue,!1)})}var G=w(be,2);Re(G,{variant:"outline",onClick:_,children:(q,W)=>{var X=st("이벤트 목록으로");x(q,X)},$$slots:{default:!0}}),z(q=>{M(me,d(a).title),M(Me,q)},[()=>ph(d(a).reservationStart)],ce),x(_e,ze)},he=_e=>{var ze=Qv(),Z=w(v(ze),2);Re(Z,{variant:"outline",onClick:_,children:(fe,me)=>{var De=st("이벤트 목록으로");x(fe,De)},$$slots:{default:!0}}),x(_e,ze)};N(re,_e=>{d(a)?_e(ue):_e(he,!1)},Y)}};N(T,re=>{d(l)?re(A):re(L,!1)},H)}};N(C,T=>{d(o)?T(K):T(B,!1)})}D("click",O,y),x(t,S),ct(),n()}var eg=P("<span>더보기</span> <!>",1),tg=P('<div class="text-center py-6"><p>이벤트 로딩 중...</p></div>'),rg=P('<div class="text-center py-6 text-red-500"><p> </p> <!></div>'),ng=P('<div class="text-center py-6"><p>표시할 이벤트가 없습니다.</p></div>'),sg=P('<div class="event-container svelte-ghtd33"><!></div>'),ig=P('<div class="events-grid svelte-ghtd33"></div>'),ag=P('<div class="popup-overlay svelte-ghtd33" tabindex="0"><div class="popup-content svelte-ghtd33" role="dialog" aria-modal="true"><button class="popup-close svelte-ghtd33" aria-label="팝업 닫기"><!></button> <div class="popup-inner svelte-ghtd33"><section class="hero-section svelte-ghtd33"><h1 class="svelte-ghtd33">예약& 방문 알림을<br>놓치지 마세요</h1> <p class="svelte-ghtd33">다양한 이벤트의 예매 시작 시간을 관리하세요</p> <div class="hero-actions svelte-ghtd33"><!></div></section> <section class="features-section svelte-ghtd33"><h2 class="svelte-ghtd33">예약 관리를 쉽고 간편하게</h2> <div class="features-grid svelte-ghtd33"><div class="feature-card svelte-ghtd33"><div class="feature-icon svelte-ghtd33">🔔</div> <h3 class="svelte-ghtd33">예매 알림</h3> <p class="svelte-ghtd33">중요한 예매 오픈 시간을 놓치지 않도록 알림을 설정하세요.</p></div> <div class="feature-card svelte-ghtd33"><div class="feature-icon svelte-ghtd33">📅</div> <h3 class="svelte-ghtd33">일정 관리</h3> <p class="svelte-ghtd33">다양한 이벤트의 예매 일정을 한눈에 확인하고 관리하세요.</p></div> <div class="feature-card svelte-ghtd33"><div class="feature-icon svelte-ghtd33">✅</div> <h3 class="svelte-ghtd33">다중 예약</h3> <p class="svelte-ghtd33">하나의 이벤트에 여러 예약을 추가하고 메모를 관리하세요.</p></div></div></section></div> <div class="popup-actions svelte-ghtd33"><!></div></div></div>'),og=P('<div class="home-container svelte-ghtd33"><section class="upcoming-events svelte-ghtd33"><div class="section-header svelte-ghtd33"><h2 class="svelte-ghtd33">다가오는 예약일정</h2> <!></div> <!></section></div> <!>',1);function Sa(t,e){lt(e,!1);let r=R([]),n=R(!0),s=R(null),i=R([]),a=R(!1);sr(async()=>{await o(),localStorage.getItem("hasSeenWelcomePopup")||E(a,!0)});async function o(){E(n,!0),E(s,null);try{await Ut.fetchEvents();let $=[];Ut.subscribe(C=>{$=C.events})();const U=new Date;E(r,$.filter(C=>new Date(C.reservationStart)>U).sort((C,K)=>new Date(C.reservationStart).getTime()-new Date(K.reservationStart).getTime()).slice(0,3))}catch($){console.error("이벤트 데이터를 불러오는 중 오류 발생:",$),E(s,"이벤트 정보를 불러올 수 없습니다.")}finally{E(n,!1)}}function l(){window.location.href="/events"}function c(){E(a,!1),localStorage.setItem("hasSeenWelcomePopup","true")}function u($){d(i).includes($)?E(i,d(i).filter(O=>O!==$)):E(i,[...d(i),$])}gt();var h=og(),f=V(h),m=v(f),p=v(m),_=w(v(p),2);Re(_,{variant:"ghost",size:"sm",onClick:l,className:"view-more",children:($,O)=>{var U=eg(),C=w(V(U),2);bi(C,{size:16}),x($,U)},$$slots:{default:!0}});var g=w(p,2);{var k=$=>{var O=tg();x($,O)},b=($,O)=>{{var U=K=>{var B=rg(),T=v(B),H=v(T),A=w(T,2);Re(A,{variant:"outline",onClick:o,children:(L,re)=>{var Y=st("다시 시도");x(L,Y)},$$slots:{default:!0}}),z(()=>M(H,`이벤트를 불러오는 중 오류가 발생했습니다: ${d(s)??""}`)),x(K,B)},C=(K,B)=>{{var T=A=>{var L=ng();x(A,L)},H=A=>{var L=ig();Et(L,5,()=>d(r),re=>re.id,(re,Y)=>{var ue=sg(),he=v(ue);const _e=ce(()=>d(Y).description||""),ze=ce(()=>d(Y).reservationPlatform||""),Z=ce(()=>d(Y).reservationLink||""),fe=ce(()=>d(Y).category||""),me=ce(()=>d(Y).organizer||""),De=ce(()=>d(Y).hasNotification||!1),ae=ce(()=>d(Y).hasNotification||d(i).includes(d(Y).id));Ho(he,{get id(){return d(Y).id},get title(){return d(Y).title},get description(){return d(_e)},get reservationStart(){return d(Y).reservationStart},get reservationPlatform(){return d(ze)},get reservationLink(){return d(Z)},get category(){return d(fe)},get organizer(){return d(me)},get hasNotification(){return d(De)},onNotifyClick:()=>u(d(Y).id),get isMyReservation(){return d(ae)}}),x(re,ue)}),x(A,L)};N(K,A=>{d(r).length===0?A(T):A(H,!1)},B)}};N($,K=>{d(s)?K(U):K(C,!1)},O)}};N(g,$=>{d(n)?$(k):$(b,!1)})}var y=w(f,2);{var S=$=>{var O=ag(),U=v(O),C=v(U),K=v(C);Xd(K,{size:24});var B=w(C,2),T=v(B),H=w(v(T),4),A=v(H);Re(A,{variant:"primary",onClick:c,children:(Y,ue)=>{var he=st("이벤트 관리하기");x(Y,he)},$$slots:{default:!0}});var L=w(B,2),re=v(L);Re(re,{variant:"primary",onClick:c,children:(Y,ue)=>{var he=st("시작하기");x(Y,he)},$$slots:{default:!0}}),D("click",C,c),D("click",U,jn(()=>{})),D("keydown",U,jn(()=>{})),D("click",O,c),D("keydown",O,Y=>Y.key==="Escape"&&c()),x($,O)};N(y,$=>{d(a)&&$(S)})}x(t,h),ct()}var lg=P('<div class="text-center p-6"><div class="spinner mb-4"></div> <h2 class="text-xl font-semibold mb-2">로그인 처리 중...</h2> <p class="text-neutral-600">잠시만 기다려주세요.</p></div>'),cg=P('<div class="text-center p-6"><div class="text-red-500 mb-4"><svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></div> <h2 class="text-xl font-semibold mb-2">로그인 오류</h2> <p class="text-neutral-600 mb-4"> </p> <!></div>'),ug=P('<div class="text-center p-6"><div class="text-green-500 mb-4"><svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mx-auto" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg></div> <h2 class="text-xl font-semibold mb-2">로그인 성공!</h2> <p class="text-neutral-600 mb-4">잠시 후 홈 페이지로 이동합니다.</p></div>'),dg=P('<div class="container-app py-8"><!></div>');function hg(t,e){lt(e,!1);let r=R(!0),n=R(null),s=R(!1);function i(){window.location.href="/"}function a(){window.location.href="/login"}sr(async()=>{try{const c=new URLSearchParams(window.location.hash.substring(1)),u=new URLSearchParams(window.location.search);if(c.has("access_token")||u.has("code"))await it.refresh(),E(s,!0),setTimeout(()=>{i()},2e3);else throw new Error("인증 데이터를 찾을 수 없습니다.")}catch(c){console.error("인증 콜백 처리 중 오류 발생:",c),E(n,c instanceof Error?c.message:"인증 처리 중 오류가 발생했습니다.")}finally{E(r,!1)}}),gt();var o=dg(),l=v(o);mr(l,{className:"max-w-md mx-auto",children:(c,u)=>{var h=ye(),f=V(h);{var m=_=>{var g=lg();x(_,g)},p=(_,g)=>{{var k=y=>{var S=cg(),$=w(v(S),4),O=v($),U=w($,2);Re(U,{variant:"outline",$$events:{click:a},children:(C,K)=>{var B=st("다시 시도");x(C,B)},$$slots:{default:!0}}),z(()=>M(O,d(n))),x(y,S)},b=(y,S)=>{{var $=O=>{var U=ug();x(O,U)};N(y,O=>{d(s)&&O($)},S)}};N(_,y=>{d(n)?y(k):y(b,!1)},g)}};N(f,_=>{d(r)?_(m):_(p,!1)})}x(c,h)},$$slots:{default:!0}}),x(t,o),ct()}var fg=P('<div class="bg-red-50 text-red-700 p-3 rounded-md mb-4"> </div>'),vg=P('<button class="flex items-center justify-center gap-2 px-4 py-3 rounded-md bg-white border border-gray-300 text-gray-700 font-medium hover:bg-gray-50 transition-colors w-full" aria-label="구글로 로그인"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M23.766 12.2764C23.766 11.4607 23.6999 10.6406 23.5588 9.83807H12.24V14.4591H18.7217C18.4528 15.9494 17.5885 17.2678 16.323 18.1056V21.1039H20.19C22.4608 19.0139 23.766 15.9274 23.766 12.2764Z" fill="#4285F4"></path><path d="M12.24 24.0008C15.4764 24.0008 18.2058 22.9382 20.1944 21.1039L16.3274 18.1055C15.2516 18.8375 13.8626 19.252 12.2444 19.252C9.11376 19.252 6.45934 17.1399 5.50693 14.3003H1.5166V17.3912C3.55371 21.4434 7.7029 24.0008 12.24 24.0008Z" fill="#34A853"></path><path d="M5.50253 14.3003C5.00973 12.8099 5.00973 11.1961 5.50253 9.70575V6.61481H1.51641C-0.185866 10.0056 -0.185866 14.0004 1.51641 17.3912L5.50253 14.3003Z" fill="#FBBC04"></path><path d="M12.24 4.74966C13.9761 4.7232 15.6521 5.36697 16.8961 6.54867L20.1943 3.12814C18.0221 1.0855 15.2362 -0.034466 12.24 0.000808666C7.7029 0.000808666 3.55371 2.55822 1.5166 6.61481L5.50272 9.70575C6.45553 6.86173 9.10955 4.74966 12.24 4.74966Z" fill="#EA4335"></path></svg> <span> </span></button>'),gg=P('<h1 class="text-2xl font-semibold mb-6 text-center"> </h1> <!> <div class="flex flex-col gap-4"><button class="flex items-center justify-center gap-2 px-4 py-3 rounded-md bg-[#FEE500] text-[#000000] font-medium hover:bg-[#FFDE00] transition-colors w-full" aria-label="카카오로 로그인"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 4C7.03 4 3 7.13 3 11C3 13.45 4.61 15.61 7 16.77V20L10.89 17.38C11.25 17.45 11.62 17.5 12 17.5C16.97 17.5 21 14.37 21 10.5C21 6.63 16.97 4 12 4Z" fill="black"></path></svg> <span> </span></button> <!> <p class="text-center text-sm text-neutral-500 mt-4">로그인하면 PopItGo의 <a href="/terms" class="text-primary hover:underline">이용약관</a>과 <a href="/privacy" class="text-primary hover:underline">개인정보 처리방침</a>에 동의하게 됩니다.</p></div>',1),pg=P('<div class="w-full max-w-md mx-auto my-12"><!></div>');function _g(t,e){lt(e,!1);const[r,n]=Ur(),s=()=>Nr(it,"$authStore",r);let i=R(!1),a=R(null),o=R(!1),l="";function c(){l==="admin"?window.location.href="/admin":window.location.href=d(o)?"/admin":"/"}sr(()=>(l=new URLSearchParams(window.location.search).get("return_to")||"",E(o,window.location.pathname==="/admin"||l==="admin"),s().isLoggedIn&&c(),it.subscribe(b=>{b.isLoggedIn&&c()})));async function u(){try{E(i,!0),E(a,null),await it.login()}catch(g){console.error("카카오 로그인 오류:",g),E(a,"로그인 중 오류가 발생했습니다.")}finally{E(i,!1)}}async function h(){try{E(i,!0),E(a,null),await it.loginWithGoogle()}catch(g){console.error("구글 로그인 오류:",g),E(a,"로그인 중 오류가 발생했습니다.")}finally{E(i,!1)}}function f(g){(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),u())}function m(g){(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),h())}gt();var p=pg(),_=v(p);mr(_,{className:"p-6",children:(g,k)=>{var b=gg(),y=V(b),S=v(y),$=w(y,2);{var O=A=>{var L=fg(),re=v(L);z(()=>M(re,d(a))),x(A,L)};N($,A=>{d(a)&&A(O)})}var U=w($,2),C=v(U),K=w(v(C),2),B=v(K),T=w(C,2);{var H=A=>{var L=vg(),re=w(v(L),2),Y=v(re);z(()=>{L.disabled=d(i),M(Y,d(i)?"로그인 중...":"구글로 로그인")}),D("click",L,h),D("keydown",L,m),x(A,L)};N(T,A=>{d(o)&&A(H)})}z(()=>{M(S,d(o)?"관리자 로그인":"로그인"),C.disabled=d(i),M(B,d(i)?"로그인 중...":"카카오로 로그인")}),D("click",C,u),D("keydown",C,f),x(g,b)},$$slots:{default:!0}}),x(t,p),ct(),n()}const mg=()=>typeof window<"u"&&"document"in window&&"location"in window,zs=t=>({...t.location,state:t.history.state,key:t.history.state&&t.history.state.key||"initial"}),wg=t=>{const e=[];let r=zs(t);return{get location(){return r},listen(n){e.push(n);const s=()=>{r=zs(t),n({location:r,action:"POP"})};return t.addEventListener("popstate",s),()=>{t.removeEventListener("popstate",s);const i=e.indexOf(n);e.splice(i,1)}},navigate(n,{state:s,replace:i=!1,preserveScroll:a=!1,blurActiveElement:o=!0}={}){s={...s,key:Date.now()+""};try{i?t.history.replaceState(s,"",n):t.history.pushState(s,"",n)}catch{t.location[i?"replace":"assign"](n)}r=zs(t),e.forEach(l=>l({location:r,action:"PUSH",preserveScroll:a})),o&&document.activeElement.blur()}}},yg=(t="/")=>{let e=0;const r=[{pathname:t,search:""}],n=[];return{get location(){return r[e]},addEventListener(s,i){},removeEventListener(s,i){},history:{get entries(){return r},get index(){return e},get state(){return n[e]},pushState(s,i,a){const[o,l=""]=a.split("?");e++,r.push({pathname:o,search:l}),n.push(s)},replaceState(s,i,a){const[o,l=""]=a.split("?");r[e]={pathname:o,search:l},n[e]=s}}}},bg=wg(mg()?window:yg()),{navigate:xg}=bg;var kg=P('<div class="flex justify-center items-center h-64"><div class="text-xl font-semibold">로딩 중...</div></div>'),$g=P('<div class="text-sm font-medium text-gray-900"> </div> <div class="text-sm text-gray-500 ml-1"> </div>',1),Sg=P('<div class="text-sm font-medium text-gray-900"> </div>'),Eg=P('<select class="text-sm border rounded p-1"><option>일반 사용자</option><option>관리자</option><option>슈퍼 관리자</option></select>'),Pg=P('<span class="text-gray-400">변경 불가</span>'),Tg=P('<tr><td class="px-6 py-4 whitespace-nowrap"><div class="flex items-center"><!></div></td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900"> </div></td><td class="px-6 py-4 whitespace-nowrap"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"> </td><td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium"><!></td></tr>'),Og=P('<div><h2 class="text-xl font-semibold mb-4">사용자 목록</h2> <div class="overflow-x-auto bg-white rounded-lg shadow"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">이름</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">이메일</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">역할</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">가입일</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">작업</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div></div>'),Ag=P('<tr><td class="px-6 py-4"><div class="text-sm font-medium text-gray-900"> </div> <div class="text-xs text-gray-500"> </div></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"> </td><td class="px-6 py-4 whitespace-nowrap"><span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"> </td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm text-gray-900"> </div> <div class="text-xs text-gray-500"> </div></td></tr>'),Cg=P('<div><h2 class="text-xl font-semibold mb-4">이벤트 목록</h2> <div class="overflow-x-auto bg-white rounded-lg shadow"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">제목</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">주최자</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">카테고리</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">예약시작</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">등록자</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div></div>'),jg=P('<tr><td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"> </td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium"><button class="text-red-600 hover:text-red-900 focus:outline-none">삭제</button></td></tr>'),Lg=P('<div><h2 class="text-xl font-semibold mb-4">카테고리 관리</h2> <div class="mb-6 bg-white rounded-lg shadow p-4"><h3 class="text-lg font-medium mb-2">새 카테고리 추가</h3> <div class="flex"><input type="text" placeholder="카테고리 이름" class="flex-1 rounded-l border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"> <button class="bg-blue-600 text-white px-4 py-2 rounded-r hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">추가</button></div></div> <div class="overflow-x-auto bg-white rounded-lg shadow"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">이름</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">생성일</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">작업</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div></div>'),Rg=P('<pre class="text-xs whitespace-pre-wrap"> </pre>'),Ig=P('<tr><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"> </td><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm font-medium text-gray-900"> </div> <div class="text-xs text-gray-500"> </div></td><td class="px-6 py-4 whitespace-nowrap"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"> </td><td class="px-6 py-4"><div class="text-sm text-gray-900"><!></div></td></tr>'),Dg=P('<div><h2 class="text-xl font-semibold mb-4">관리자 활동 로그</h2> <div class="overflow-x-auto bg-white rounded-lg shadow"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">시간</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">관리자</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">작업</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">테이블</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">세부사항</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div></div>'),Mg=P('<div class="mb-8"><h1 class="text-3xl font-bold">관리자 대시보드</h1> <p class="text-gray-600"> </p></div> <div class="border-b border-gray-200 mb-6"><ul class="flex -mb-px"><li class="mr-1"><button>사용자 관리</button></li> <li class="mr-1"><button>이벤트 관리</button></li> <li class="mr-1"><button>카테고리 관리</button></li> <li class="mr-1"><button>관리자 로그</button></li></ul></div> <!> <!> <!> <!>',1),Ng=P('<div class="text-center py-12"><h1 class="text-2xl font-bold text-red-600">접근 권한이 없습니다</h1> <p class="mt-2 text-gray-600">이 페이지에 접근하려면 관리자 권한이 필요합니다.</p> <button class="mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 focus:outline-none">홈으로 돌아가기</button></div>'),Ug=P('<div class="container mx-auto px-4 py-8"><!></div>');function zg(t,e){lt(e,!1);const[r,n]=Ur(),s=()=>Nr(it,"$authStore",r);let i=R(!1),a=R(""),o=R(!0),l=R("users"),c=R([]),u=R([]),h=R([]),f=R([]);function m(){window.location.href="/"}sr(async()=>{if(!s().isLoggedIn){window.location.href="/login?return_to=admin";return}const{isAdmin:A,role:L}=await it.checkAdminAccess();if(!A){alert("관리자 권한이 필요합니다."),m();return}E(i,A),E(a,L||""),E(o,!1),p()});async function p(){try{const{data:A,error:L}=await le.from("resv_profiles").select("id, username, full_name, email, role, created_at").order("created_at",{ascending:!1});if(L)throw L;E(c,A)}catch(A){console.error("사용자 목록 로드 중 오류:",A),alert("사용자 목록을 불러오는데 실패했습니다.")}}async function _(){try{const{data:A,error:L}=await le.from("resv_events").select(`
          id, title, description, organizer, category, 
          reservation_start, reservation_platform, 
          user_id, profiles:resv_profiles(username, email)
        `).order("reservation_start",{ascending:!1});if(L)throw L;E(u,A)}catch(A){console.error("이벤트 목록 로드 중 오류:",A),alert("이벤트 목록을 불러오는데 실패했습니다.")}}async function g(){try{const{data:A,error:L}=await le.from("resv_categories").select("*").order("name");if(L)throw L;E(h,A)}catch(A){console.error("카테고리 목록 로드 중 오류:",A),alert("카테고리 목록을 불러오는데 실패했습니다.")}}async function k(){try{const{data:A,error:L}=await le.from("resv_admin_logs").select(`
          id, action_type, table_name, record_id, 
          details, ip_address, created_at,
          admin:resv_profiles(username, email)
        `).order("created_at",{ascending:!1});if(L)throw L;E(f,A)}catch(A){console.error("관리자 로그 로드 중 오류:",A),alert("관리자 로그를 불러오는데 실패했습니다.")}}function b(A){E(l,A),A==="users"?p():A==="events"?_():A==="categories"?g():A==="logs"&&k()}async function y(A,L){try{const{error:re}=await le.from("resv_profiles").update({role:L}).eq("id",A);if(re)throw re;await U("update","resv_profiles",A,{changed_fields:["role"],new_values:{role:L}}),p(),alert("사용자 역할이 변경되었습니다.")}catch(re){console.error("사용자 역할 변경 중 오류:",re),alert("사용자 역할 변경에 실패했습니다.")}}let S=R("");async function $(){if(!d(S).trim()){alert("카테고리 이름을 입력해주세요.");return}try{const{data:A,error:L}=await le.from("resv_categories").insert({name:d(S).trim()}).select();if(L)throw L;await U("create","resv_categories",A[0].id,{new_values:{name:d(S).trim()}}),E(S,""),g(),alert("카테고리가 추가되었습니다.")}catch(A){console.error("카테고리 추가 중 오류:",A),alert("카테고리 추가에 실패했습니다.")}}async function O(A){if(confirm("정말 이 카테고리를 삭제하시겠습니까?"))try{const{error:L}=await le.from("resv_categories").delete().eq("id",A);if(L)throw L;await U("delete","resv_categories",A),g(),alert("카테고리가 삭제되었습니다.")}catch(L){console.error("카테고리 삭제 중 오류:",L),alert("카테고리 삭제에 실패했습니다.")}}async function U(A,L,re,Y={}){var ue,he;try{const _e=await it.refresh();await le.from("resv_admin_logs").insert({admin_id:(he=(ue=s())==null?void 0:ue.user)==null?void 0:he.id,action_type:A,table_name:L,record_id:re,details:Y,ip_address:"127.0.0.1"})}catch(_e){console.error("관리자 활동 로깅 중 오류:",_e)}}function C(A){return A?new Date(A).toLocaleString("ko-KR"):""}gt();var K=Ug(),B=v(K);{var T=A=>{var L=kg();x(A,L)},H=(A,L)=>{{var re=ue=>{var he=Mg(),_e=V(he),ze=w(v(_e),2),Z=v(ze),fe=w(_e,2),me=v(fe),De=v(me),ae=v(De),Fe=w(De,2),Te=v(Fe),Ke=w(Fe,2),qe=v(Ke),pt=w(Ke,2),Me=v(pt),Ne=w(fe,2);{var Be=ne=>{var de=Og(),be=w(v(de),2),He=v(be),Se=w(v(He));Et(Se,5,()=>d(c),Gt,(Ue,G)=>{var q=Tg(),W=v(q),X=v(W),se=v(X);{var ke=oe=>{var ge=$g(),Ve=V(ge),xt=v(Ve),kr=w(Ve,2),$r=v(kr);z(()=>{M(xt,d(G).full_name),M($r,`(@${d(G).username??""})`)}),x(oe,ge)},$e=oe=>{var ge=Sg(),Ve=v(ge);z(()=>M(Ve,`@${d(G).username??""}`)),x(oe,ge)};N(se,oe=>{d(G).full_name?oe(ke):oe($e,!1)})}var Xe=w(W),ot=v(Xe),j=v(ot),I=w(Xe),Q=v(I),Oe=v(Q),Ze=w(I),Ae=v(Ze),et=w(Ze),Ot=v(et);{var Kt=oe=>{var ge=Eg();ho(ge,()=>d(G).role||"user");var Ve,xt=v(ge);xt.value=xt.__value="user";var kr=w(xt);kr.value=kr.__value="admin";var $r=w(kr);$r.value=$r.__value="super_admin",z(()=>{Ve!==(Ve=d(G).role||"user")&&(ge.value=(ge.__value=d(G).role||"user")??"",as(ge,d(G).role||"user"))}),D("change",ge,ys=>y(d(G).id,ys.target.value)),x(oe,ge)},_t=oe=>{var ge=Pg();x(oe,ge)};N(Ot,oe=>{var ge,Ve;d(a)==="super_admin"&&d(G).id!==((Ve=(ge=s())==null?void 0:ge.user)==null?void 0:Ve.id)?oe(Kt):oe(_t,!1)})}z(oe=>{M(j,d(G).email||"-"),at(Q,1,`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                      ${d(G).role==="super_admin"?"bg-purple-100 text-purple-800":d(G).role==="admin"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`),M(Oe,d(G).role||"user"),M(Ae,oe)},[()=>C(d(G).created_at)],ce),x(Ue,q)}),x(ne,de)};N(Ne,ne=>{d(l)==="users"&&ne(Be)})}var We=w(Ne,2);{var Qe=ne=>{var de=Cg(),be=w(v(de),2),He=v(be),Se=w(v(He));Et(Se,5,()=>d(u),Gt,(Ue,G)=>{var q=Ag(),W=v(q),X=v(W),se=v(X),ke=w(X,2),$e=v(ke),Xe=w(W),ot=v(Xe),j=w(Xe),I=v(j),Q=v(I),Oe=w(j),Ze=v(Oe),Ae=w(Oe),et=v(Ae),Ot=v(et),Kt=w(et,2),_t=v(Kt);z((oe,ge)=>{var Ve,xt;M(se,d(G).title),M($e,`${oe??""}...`),M(ot,d(G).organizer||"-"),M(Q,d(G).category||"-"),M(Ze,ge),M(Ot,((Ve=d(G).profiles)==null?void 0:Ve.username)||"-"),M(_t,((xt=d(G).profiles)==null?void 0:xt.email)||"-")},[()=>{var oe;return(oe=d(G).description)==null?void 0:oe.substring(0,50)},()=>C(d(G).reservation_start)],ce),x(Ue,q)}),x(ne,de)};N(We,ne=>{d(l)==="events"&&ne(Qe)})}var F=w(We,2);{var J=ne=>{var de=Lg(),be=w(v(de),2),He=w(v(be),2),Se=v(He),Ue=w(Se,2),G=w(be,2),q=v(G),W=w(v(q));Et(W,5,()=>d(h),Gt,(X,se)=>{var ke=jg(),$e=v(ke),Xe=v($e),ot=w($e),j=v(ot),I=w(ot),Q=v(I);z(Oe=>{M(Xe,d(se).name),M(j,Oe)},[()=>C(d(se).created_at)],ce),D("click",Q,()=>O(d(se).id)),x(X,ke)}),Wt(Se,()=>d(S),X=>E(S,X)),D("click",Ue,$),x(ne,de)};N(F,ne=>{d(l)==="categories"&&ne(J)})}var ve=w(F,2);{var Le=ne=>{var de=Dg(),be=w(v(de),2),He=v(be),Se=w(v(He));Et(Se,5,()=>d(f),Gt,(Ue,G)=>{var q=Ig(),W=v(q),X=v(W),se=w(W),ke=v(se),$e=v(ke),Xe=w(ke,2),ot=v(Xe),j=w(se),I=v(j),Q=v(I),Oe=w(j),Ze=v(Oe),Ae=w(Oe),et=v(Ae),Ot=v(et);{var Kt=oe=>{var ge=Rg(),Ve=v(ge);z(xt=>M(Ve,xt),[()=>JSON.stringify(d(G).details,null,2)],ce),x(oe,ge)},_t=oe=>{var ge=st("-");x(oe,ge)};N(Ot,oe=>{d(G).details&&typeof d(G).details=="object"?oe(Kt):oe(_t,!1)})}z(oe=>{var ge,Ve;M(X,oe),M($e,((ge=d(G).admin)==null?void 0:ge.username)||"-"),M(ot,((Ve=d(G).admin)==null?void 0:Ve.email)||"-"),at(I,1,`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                      ${d(G).action_type==="create"?"bg-green-100 text-green-800":d(G).action_type==="update"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`),M(Q,d(G).action_type==="create"?"생성":d(G).action_type==="update"?"수정":d(G).action_type==="delete"?"삭제":d(G).action_type),M(Ze,d(G).table_name)},[()=>C(d(G).created_at)],ce),x(Ue,q)}),x(ne,de)};N(ve,ne=>{d(l)==="logs"&&ne(Le)})}z(()=>{M(Z,`역할: ${d(a)??""}`),at(ae,1,`inline-block py-4 px-4 text-sm font-medium ${d(l)==="users"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`),at(Te,1,`inline-block py-4 px-4 text-sm font-medium ${d(l)==="events"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`),at(qe,1,`inline-block py-4 px-4 text-sm font-medium ${d(l)==="categories"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`),at(Me,1,`inline-block py-4 px-4 text-sm font-medium ${d(l)==="logs"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700"}`)}),D("click",ae,()=>b("users")),D("click",Te,()=>b("events")),D("click",qe,()=>b("categories")),D("click",Me,()=>b("logs")),x(ue,he)},Y=ue=>{var he=Ng(),_e=w(v(he),4);D("click",_e,()=>xg("/")),x(ue,he)};N(A,ue=>{d(i)?ue(re):ue(Y,!1)},L)}};N(B,A=>{d(o)?A(T):A(H,!1)})}x(t,K),ct(),n()}var Fg=P('<div class="error-message svelte-r7imsl"> </div>'),qg=P('<div class="setting-item clickable svelte-r7imsl" tabindex="0" role="button"><div class="setting-info svelte-r7imsl"><h3 class="svelte-r7imsl">프로필 정보 편집</h3> <p class="svelte-r7imsl">사용자 정보를 변경합니다.</p></div> <!></div>  <div class="setting-item logout svelte-r7imsl" tabindex="0" role="button"><div class="setting-info svelte-r7imsl"><h3 class="svelte-r7imsl">로그아웃</h3> <p class="svelte-r7imsl">계정에서 로그아웃합니다.</p></div> <!></div>',1),Bg=P('<div class="login-prompt svelte-r7imsl"><p class="svelte-r7imsl">설정을 관리하려면 로그인하세요.</p> <!></div>'),Wg=P("<option> </option>"),Hg=P("<option> </option>"),Vg=P('<div class="setting-item svelte-r7imsl"><div class="setting-info svelte-r7imsl"><h3 class="svelte-r7imsl">푸시 알림</h3> <p class="svelte-r7imsl">브라우저 또는 앱 푸시 알림을 받습니다.</p></div> <label class="toggle svelte-r7imsl"><input type="checkbox" class="svelte-r7imsl"> <span class="toggle-slider svelte-r7imsl"></span></label></div> <div class="setting-item svelte-r7imsl"><div class="setting-info svelte-r7imsl"><h3 class="svelte-r7imsl">이메일 알림</h3> <p class="svelte-r7imsl">이메일로 알림을 받습니다.</p></div> <label class="toggle svelte-r7imsl"><input type="checkbox" class="svelte-r7imsl"> <span class="toggle-slider svelte-r7imsl"></span></label></div> <div class="setting-item svelte-r7imsl"><div class="setting-info svelte-r7imsl"><h3 class="svelte-r7imsl">기본 알림 시간</h3> <p class="svelte-r7imsl">예약 시작 전 알림을 받을 기본 시간입니다.</p></div> <select class="select-input svelte-r7imsl"></select></div> <div class="setting-item svelte-r7imsl"><div class="setting-info svelte-r7imsl"><h3 class="svelte-r7imsl">방문 시간 설정</h3> <p class="svelte-r7imsl">이벤트 시작 기준 방문 예정 시간입니다.</p></div> <select class="select-input svelte-r7imsl"></select></div>',1),Gg=P('<div class="setting-item svelte-r7imsl"><div class="setting-info svelte-r7imsl"><h3 class="svelte-r7imsl">다크 모드</h3> <p class="svelte-r7imsl">어두운 테마로 표시합니다.</p></div> <label class="toggle svelte-r7imsl"><input type="checkbox" class="svelte-r7imsl"> <span class="toggle-slider svelte-r7imsl"></span></label></div> <div class="setting-item svelte-r7imsl"><div class="setting-info svelte-r7imsl"><h3 class="svelte-r7imsl">언어</h3> <p class="svelte-r7imsl">앱 표시 언어를 선택합니다.</p></div> <select class="select-input svelte-r7imsl"><option>한국어</option><option>English</option><option>日本語</option><option>中文</option></select></div>',1),Yg=P('<div class="about-info svelte-r7imsl"><h3 class="svelte-r7imsl">PopItGo v0.1.0</h3> <p class="svelte-r7imsl">이벤트 예약 알림 서비스</p> <div class="links svelte-r7imsl"><a href="#" class="link svelte-r7imsl">개인정보처리방침</a> <a href="#" class="link svelte-r7imsl">서비스 이용약관</a> <a href="#" class="link svelte-r7imsl">오픈소스 라이선스</a></div></div>'),Jg=P('<div class="settings-page svelte-r7imsl"><!> <section class="settings-section svelte-r7imsl"><h2 class="section-title svelte-r7imsl"><!> 프로필 및 계정</h2> <!></section> <section class="settings-section svelte-r7imsl"><h2 class="section-title svelte-r7imsl"><!> 알림 설정</h2> <!></section> <section class="settings-section svelte-r7imsl"><h2 class="section-title svelte-r7imsl"><!> 테마 및 표시</h2> <!></section> <section class="settings-section about svelte-r7imsl"><h2 class="section-title svelte-r7imsl"><!> 정보</h2> <!></section> <div class="button-container svelte-r7imsl"><!></div></div>');function Kg(t,e){lt(e,!1);const[r,n]=Ur(),s=()=>Nr(it,"$authStore",r);let i=R(!1),a=R(null),o=R(!1),l=R("ko"),c=R(!0),u=R(!1),h=[{value:"5",label:"5분 전"},{value:"10",label:"10분 전"},{value:"15",label:"15분 전"},{value:"30",label:"30분 전"},{value:"60",label:"1시간 전"},{value:"120",label:"2시간 전"},{value:"1440",label:"하루 전"}],f=R("30"),m=R("30"),p=[{value:"0",label:"이벤트 시작 시간"},{value:"15",label:"15분 전"},{value:"30",label:"30분 전"},{value:"60",label:"1시간 전"}];sr(async()=>{_();const ae=window.matchMedia("(prefers-color-scheme: dark)").matches;E(o,localStorage.getItem("darkMode")==="true"||localStorage.getItem("darkMode")===null&&ae),k()});async function _(){if(s().isLoggedIn){E(i,!0),E(a,null);try{E(l,localStorage.getItem("language")||"ko"),E(c,localStorage.getItem("pushNotifications")!=="false"),E(u,localStorage.getItem("emailNotifications")==="true"),E(f,localStorage.getItem("defaultNotificationTime")||"30"),E(m,localStorage.getItem("defaultVisitTime")||"30")}catch(ae){console.error("설정 로드 중 오류 발생:",ae),E(a,"설정을 불러올 수 없습니다.")}finally{E(i,!1)}}}async function g(){E(i,!0),E(a,null);try{localStorage.setItem("darkMode",d(o).toString()),localStorage.setItem("language",d(l)),localStorage.setItem("pushNotifications",d(c).toString()),localStorage.setItem("emailNotifications",d(u).toString()),localStorage.setItem("defaultNotificationTime",d(f)),localStorage.setItem("defaultVisitTime",d(m)),k(),alert("설정이 저장되었습니다.")}catch(ae){console.error("설정 저장 중 오류 발생:",ae),E(a,"설정을 저장할 수 없습니다.")}finally{E(i,!1)}}function k(){d(o)?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}function b(){confirm("로그아웃 하시겠습니까?")&&(it.logout(),window.location.href="/")}function y(){alert("프로필 편집 기능은 개발 중입니다.")}gt();var S=Jg(),$=v(S);{var O=ae=>{var Fe=Fg(),Te=v(Fe);z(()=>M(Te,d(a))),x(ae,Fe)};N($,ae=>{d(a)&&ae(O)})}var U=w($,2),C=v(U),K=v(C);Uo(K,{size:18});var B=w(C,2);mr(B,{children:(ae,Fe)=>{var Te=ye(),Ke=V(Te);{var qe=Me=>{var Ne=qg(),Be=V(Ne),We=w(v(Be),2);bi(We,{size:18});var Qe=w(Be,2),F=w(v(Qe),2);No(F,{size:18}),D("click",Be,y),D("keydown",Be,J=>J.key==="Enter"&&y()),D("click",Qe,b),D("keydown",Qe,J=>J.key==="Enter"&&b()),x(Me,Ne)},pt=Me=>{var Ne=Bg(),Be=w(v(Ne),2);Re(Be,{variant:"primary",onClick:()=>window.location.href="/login",children:(We,Qe)=>{var F=st("로그인");x(We,F)},$$slots:{default:!0}}),x(Me,Ne)};N(Ke,Me=>{s().isLoggedIn?Me(qe):Me(pt,!1)})}x(ae,Te)},$$slots:{default:!0}});var T=w(U,2),H=v(T),A=v(H);yi(A,{size:18});var L=w(H,2);mr(L,{children:(ae,Fe)=>{var Te=Vg(),Ke=V(Te),qe=w(v(Ke),2),pt=v(qe),Me=w(Ke,2),Ne=w(v(Me),2),Be=v(Ne),We=w(Me,2),Qe=w(v(We),2);z(()=>{d(f),Ir(()=>{})}),Et(Qe,5,()=>h,Gt,(ve,Le)=>{var ne=Wg(),de={},be=v(ne);z(()=>{de!==(de=d(Le).value)&&(ne.value=(ne.__value=d(Le).value)??""),M(be,d(Le).label)}),x(ve,ne)});var F=w(We,2),J=w(v(F),2);z(()=>{d(m),Ir(()=>{})}),Et(J,5,()=>p,Gt,(ve,Le)=>{var ne=Hg(),de={},be=v(ne);z(()=>{de!==(de=d(Le).value)&&(ne.value=(ne.__value=d(Le).value)??""),M(be,d(Le).label)}),x(ve,ne)}),Ps(pt,()=>d(c),ve=>E(c,ve)),Ps(Be,()=>d(u),ve=>E(u,ve)),Dr(Qe,()=>d(f),ve=>E(f,ve)),Dr(J,()=>d(m),ve=>E(m,ve)),x(ae,Te)},$$slots:{default:!0}});var re=w(T,2),Y=v(re),ue=v(Y);Jd(ue,{size:18});var he=w(Y,2);mr(he,{children:(ae,Fe)=>{var Te=Gg(),Ke=V(Te),qe=w(v(Ke),2),pt=v(qe),Me=w(Ke,2),Ne=w(v(Me),2);z(()=>{d(l),Ir(()=>{})});var Be=v(Ne);Be.value=Be.__value="ko";var We=w(Be);We.value=We.__value="en";var Qe=w(We);Qe.value=Qe.__value="ja";var F=w(Qe);F.value=F.__value="zh",Ps(pt,()=>d(o),J=>E(o,J)),Dr(Ne,()=>d(l),J=>E(l,J)),x(ae,Te)},$$slots:{default:!0}});var _e=w(re,2),ze=v(_e),Z=v(ze);Qd(Z,{size:18});var fe=w(ze,2);mr(fe,{children:(ae,Fe)=>{var Te=Yg();x(ae,Te)},$$slots:{default:!0}});var me=w(_e,2),De=v(me);Re(De,{variant:"primary",onClick:g,get disabled(){return d(i)},children:(ae,Fe)=>{var Te=st();z(()=>M(Te,d(i)?"저장 중...":"설정 저장")),x(ae,Te)},$$slots:{default:!0}}),x(t,S),ct(),n()}var Qg=P('<h1 class="text-xl font-bold mb-4">페이지를 찾을 수 없습니다</h1> <p class="mb-6">요청하신 페이지가 존재하지 않거나 이동되었을 수 있습니다.</p> <!>',1);function Xg(t){function e(){window.location.href="/"}mr(t,{padding:"lg",className:"container-app my-12",children:(r,n)=>{var s=Qg(),i=w(V(s),4);Re(i,{variant:"primary",$$events:{click:e},children:(a,o)=>{var l=st("홈으로 돌아가기");x(a,l)},$$slots:{default:!0}}),x(r,s)},$$slots:{default:!0}})}var Zg=P('<a href="/admin" class="flex flex-col items-center px-2 py-1 text-gray-600 hover:text-blue-600" tabindex="0" role="button" aria-label="관리자"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> <span class="text-xs">관리자</span></a>'),ep=P('<button class="flex flex-col items-center px-2 py-1 text-gray-600 hover:text-blue-600" tabindex="0" aria-label="로그아웃"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> <span class="text-xs">로그아웃</span></button>'),tp=P('<a href="/login" class="flex flex-col items-center px-2 py-1 text-gray-600 hover:text-blue-600" tabindex="0" role="button" aria-label="로그인"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg> <span class="text-xs">로그인</span></a>'),rp=P('<div class="min-h-screen flex flex-col bg-gray-50"><!> <main class="container-app py-6 pb-24 flex-grow"><!> <nav class="fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 px-4 py-2 flex justify-around" aria-label="주요 메뉴"><a href="/" class="flex flex-col items-center px-2 py-1 text-gray-600 hover:text-blue-600" tabindex="0" role="button" aria-label="홈"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg> <span class="text-xs">홈</span></a> <a href="/events" class="flex flex-col items-center px-2 py-1 text-gray-600 hover:text-blue-600" tabindex="0" role="button" aria-label="이벤트"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> <span class="text-xs">이벤트</span></a> <a href="/events?tab=my-reservations" class="flex flex-col items-center px-2 py-1 text-gray-600 hover:text-blue-600" tabindex="0" role="button" aria-label="예약"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg> <span class="text-xs">예약</span></a> <a href="/settings" class="flex flex-col items-center px-2 py-1 text-gray-600 hover:text-blue-600" tabindex="0" role="button" aria-label="설정"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg> <span class="text-xs">설정</span></a> <!> <!></nav></main> <!></div>');function np(t,e){lt(e,!1);let r=R(null);const n=_s(window.location.pathname),s={"/":Sa,"/events":Iv,"/login":_g,"/admin":zg,"/auth/callback":hg,"/settings":Kg};let i=R(Sa);function a(){const T=window.location.pathname;if(n.set(T),T.startsWith("/events/")&&T!=="/events/"){T.split("/").pop(),E(i,Zv);return}E(i,s[T]||Xg)}function o(){a()}function l(T){window.history.pushState({},"",T),a()}function c(T,H){(T.key==="Enter"||T.key===" ")&&(T.preventDefault(),l(H))}sr(()=>{a(),window.addEventListener("popstate",o);const T=it.subscribe(H=>{E(r,H.user),H.isLoading});return()=>{window.removeEventListener("popstate",o),T()}});function u(T){T.preventDefault(),it.logout()}function h(T){(T.key==="Enter"||T.key===" ")&&(T.preventDefault(),it.logout())}gt();var f=rp(),m=v(f);nh(m,{});var p=w(m,2),_=v(p);hc(_,()=>d(i),(T,H)=>{H(T,{})});var g=w(_,2),k=v(g),b=w(k,2),y=w(b,2),S=w(y,2),$=w(S,2);{var O=T=>{var H=Zg();D("click",H,Or(()=>l("/admin"))),D("keydown",H,A=>c(A,"/admin")),x(T,H)};N($,T=>{d(r)&&d(r).role&&["admin","super_admin"].includes(d(r).role)&&T(O)})}var U=w($,2);{var C=T=>{var H=ep();D("click",H,u),D("keydown",H,h),x(T,H)},K=T=>{var H=tp();D("click",H,Or(()=>l("/login"))),D("keydown",H,A=>c(A,"/login")),x(T,H)};N(U,T=>{d(r)?T(C):T(K,!1)})}var B=w(p,2);oh(B,{}),D("click",k,Or(()=>l("/"))),D("keydown",k,T=>c(T,"/")),D("click",b,Or(()=>l("/events"))),D("keydown",b,T=>c(T,"/events")),D("click",y,Or(()=>l("/events?tab=my-reservations"))),D("keydown",y,T=>c(T,"/events?tab=my-reservations")),D("click",S,Or(()=>l("/settings"))),D("keydown",S,T=>c(T,"/settings")),x(t,f),ct()}ic(np,{target:document.getElementById("app")});export{zc as g};
